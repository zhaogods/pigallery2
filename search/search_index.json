{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#pigallery2-documentation","title":"PiGallery2 Documentation","text":"<p>Welcome to the official documentation for PiGallery2!</p> <p>PiGallery2 is a fast directory-first photo gallery website, optimized for running on low-resource servers (especially on Raspberry Pi).</p> <p>Try our live demo! (First load may take up to 60s while the server boots up) </p>"},{"location":"#navigation","title":"\ud83e\udded Navigation","text":""},{"location":"#features","title":"\u2728 Features","text":"<p>Check out the full list of features and see what PiGallery2 can do for you.</p>"},{"location":"#faq","title":"\u2753 FAQ","text":"<p>Answers to frequently asked questions about the project's philosophy and releases.</p>"},{"location":"#getting-started","title":"\ud83c\udfc1 Getting Started","text":"<p>Learn how to install PiGallery2 using Docker (recommended) or via a native installation.</p>"},{"location":"#user-guide","title":"\u2699\ufe0f User Guide","text":"<p>Find details on how to configure the application and manage user rights.</p>"},{"location":"#development","title":"\ud83d\udcbb Development","text":"<p>Interested in contributing? Check our contribution guides for the main app and Docker builds.</p>"},{"location":"#blog","title":"\ud83d\udcdd Blog","text":"<p>Read about the project's history, future plans, and tutorials.</p>"},{"location":"#references","title":"\ud83d\udd17 References","text":"<p>See what others are saying about PiGallery2.</p>"},{"location":"faq/","title":"FAQ","text":""},{"location":"faq/#frequently-asked-questions-faq","title":"Frequently Asked Questions (FAQ)","text":"Why are there no albums, only logical albums (saved search)? <p>PiGallery2 follows a philosophy where the disk is the source of truth and the database is only a cache. The application is designed to show your photos as they are organized on your storage.</p> <p>Because the database is treated as a cache, it can be deleted and rebuilt at any time without losing your photo organization. \"Logical albums\" (saved search queries) are used instead of traditional database-only albums to maintain this directory-first approach and ensure that your gallery remains portable and easy to rebuild.</p> <p>If you still need traditional album-like behavior, you can use one of these workarounds:</p> <ol> <li>Custom Keywords: Add a unique keyword to your photos in their metadata (e.g., using Lightroom or DigiKam). You can then create a Logical Album in PiGallery2 by searching for that keyword.</li> <li>Extensions: You can develop an extension that automatically adds the keywords and creates albums for you. (see discussion 1110</li> </ol> Why are there breaking changes in the database or config? <p>To maintain high development velocity, we do not provide database upgrade scripts. PiGallery2 is a hobby project, and implementing/debugging complex migration scripts would significantly slow down the addition of new features.</p> <p>As the database is only a cache, it is expected that users might need to delete the database and/or restart the configuration after a new release. This allows the project to move fast and evolve without being held back by legacy structures.</p> Why are there no regular releases? <p>PiGallery2 is a hobby project developed in free time. The developer does not get paid for this work and maintains it alongside a full-time job and other life commitments. Releases happen when new features are ready and time permits, rather than on a fixed schedule.</p>"},{"location":"features/","title":"Features","text":""},{"location":"features/#features","title":"Features","text":"<p>PiGallery 2 is a self-hosted directory-first photo gallery website.</p> <p>Try our live demo! (First load may take up to 60s while the server boots up)</p>"},{"location":"features/#key-features","title":"Key Features","text":""},{"location":"features/#photo-viewer","title":"Photo Viewer","text":"<p>Nice photo viewer with an optional information panel that shows all important information about the photo. </p>"},{"location":"features/#map","title":"Map","text":"<p>PiGallery2 reads the location data of the photos and puts them on a nice map. It supports OpenStreetMap and Mapbox by default, but you can also add your own favorite map provider. The gallery also supports <code>.gpx</code> files to show your tracked path on the map. It recognizes different types of activities (e.g., running, flying) from the <code>.gpx</code> files and shows them with different colors and icons. </p>"},{"location":"features/#advanced-searching","title":"Advanced Searching","text":"<p>Supports full boolean logic with negation and exact or wildcard search. It also provides handy suggestions with autocomplete. </p>"},{"location":"features/#match-types","title":"Match Types","text":"<pre><code>person:\"John\" # exact match\nperson:(John) # wildcard match\nperson:John # same as person:(John)\nperson!:John # negation\n</code></pre>"},{"location":"features/#supported-keywords","title":"Supported Keywords","text":"<pre><code>Range queries:\ndate:2020\nrating:5\nresolution:1 (in MPX)\nperson-count:10\n\nAll possible range usage:\nrating:4..6\nrating=4\nrating!&gt;3\nrating&gt;3\nrating!&gt;=3\nrating&gt;=3\nrating!&lt;3\nrating&lt;3\nrating!&lt;=3\nrating&lt;=3\n\norientation:portrait\norientation:landscape\n\nkeyword:\"house\"\ncaption:\"caption\"\ndirectory:\"dir name/another dir\"\nfile_name:\"img.jpg\"\nperson:\"John\"\nposition:\"USA\" # use city, state, country names\n5-km-from:(New York) # photos 5 km from the center of New York\nany_text:\"apple\" # searches for apple everywhere, \"any_text:\" can be omitted\nlast-4-days:every-week\nlast-4-days:every-month\nlast-4-days:every-year\nlast-4-days:2-days-ago\nlast-4-days:2-weeks-ago\nlast-4-days:2-months-ago\nlast-4-days:2-years-ago\n</code></pre>"},{"location":"features/#bool-expressions","title":"Bool Expressions","text":"<pre><code>John and Kate # photos with \"John\" and \"Kate\" (any string match)\nJohn Kate # same as \"John and Kate\"\nJohn or Kate # photos with \"John\" or \"Kate\" (any string match)\n2-of:(John, Kate, Steve) # lists photos that satisfy at least 2 out of the 3 names\n</code></pre>"},{"location":"features/#folder-sorting","title":"Folder Sorting","text":"<p>Add an empty file like <code>.order_[ORDER].pg2conf</code> to a folder to override the default sorting for that folder. It's not recursively applied to subfolders. Replace <code>[ORDER]</code> with one of the following: - <code>descending_name</code> - <code>ascending_name</code> - <code>descending_date</code> - <code>ascending_date</code> - <code>random</code></p>"},{"location":"features/#sharing","title":"Sharing","text":"<p>You can share your photo folders with your friends. Sharing links can be password protected. </p>"},{"location":"features/#video-playback","title":"Video Playback","text":"<p>Supports <code>.mp4</code>, <code>.webm</code>, <code>.ogv</code>, and <code>.ogg</code> files. </p>"},{"location":"features/#local-filters","title":"Local Filters","text":"<p>Rich filter panel to further filter your directory or search results. </p>"},{"location":"features/#blog","title":"Blog","text":"<p>Add <code>.md</code> files to your directory and the app will show them. You can tag sections in the <code>.md</code> files with <code>&lt;!-- @pg-date &lt;ISO_DATE&gt; --&gt;</code> to attach them to a date. </p>"},{"location":"features/#logical-albums","title":"Logical Albums","text":"<p>Create logical albums (Saved Search) from any search query. </p>"},{"location":"features/#faces","title":"Faces","text":"<p>Reads Adobe's XMP Face region metadata and shows face bounding boxes over images. </p>"},{"location":"features/#random-link","title":"Random Link","text":"<p>Create a link that serves a random photo from your gallery, useful for 3rd party applications like wallpaper changers. </p>"},{"location":"features/#rich-settings","title":"Rich Settings","text":"<p>Easy setup through a rich settings page. </p>"},{"location":"features/#per-user-filter","title":"Per User Filter","text":"<p>Set up allow and block list filters for each user or the whole gallery. </p>"},{"location":"features/#photo-frame","title":"Photo Frame","text":"<p>Generate a photo frame link for the given directory or search result to automatically show and loop through photos. Recommended usage with a Kiosk app. Search for <code>(person:John or person:Kate) and last-7-days:every-year</code>, then Menu -&gt; Tools -&gt; Photo Frame.</p>"},{"location":"features/#extension-support","title":"Extension support","text":"<p>Build your own extensions. Mostly server-side changes are supported with minimal UI modifications. You can add your own button to the photos and do whatever on the server side.  See: Extension Development </p>"},{"location":"features/#detailed-feature-list","title":"Detailed Feature List","text":"<ul> <li>Supported Formats:<ul> <li>Images: <code>jpg, jpeg, jpe, webp, png, gif, svg, dng*, arw*, heic*</code> (depends on the docker container's vips build)</li> <li>Videos: <code>mp4, ogg, ogv, webm</code></li> </ul> </li> <li>Rendering directories as is:<ul> <li>Recursive subdirectories listing.</li> <li>Nice grid layout for photos.</li> <li>Shows tags/keywords, locations, and GPS coordinates.</li> <li>On-demand rendering (on scroll).</li> </ul> </li> <li>On-the-fly Thumbnail Generation:<ul> <li>Multiple sizes.</li> <li>Prioritizes visible photos.</li> <li>Saves thumbnails to TEMP folder.</li> <li>Multi-core CPU support.</li> <li>Hardware acceleration support (sharp).</li> </ul> </li> <li>Custom Lightbox:<ul> <li>Full-screen photo and video viewing.</li> <li>Keyboard navigation.</li> <li>Low-res thumbnail while full image loads.</li> <li>EXIF info panel.</li> <li>Automatic slideshow.</li> <li>Gesture support (swipe left, right, up).</li> </ul> </li> <li>Authentication options:<ul> <li>No authentication.</li> <li>Basic, built-in authentication.</li> <li>ORCID support #1096</li> </ul> </li> <li>Client-side Caching: For directories and search results.</li> <li>GPS &amp; Maps:<ul> <li>Render photos on OpenStreetMap.</li> <li><code>.gpx</code> file support for rendering paths.</li> <li>Support for any tile URL provider.</li> </ul> </li> <li>Photo Frame:<ul> <li>Automatically show and loop through photos of a given directory or search result. #1060</li> </ul> </li> <li>Extensions: Build your own extensions. See: Extension Development</li> <li>Upload support: Drag and drop allowed with per-directory whitelist. #1118 </li> <li>Snappy Experience: Indexes gallery to DB (MySQL and SQLite support).</li> <li>Faces (Persons): Reads Adobe's XMP Face region metadata.</li> <li>Internationalization: Full translation support.</li> <li>Responsive Design: Phone, tablet, and desktop support.</li> <li>Setup Page: Easy configuration UI.</li> <li>Random Photo URL: For 3rd party integrations.</li> <li>Video Support:<ul> <li>Transcoding to <code>.mp4</code>.</li> <li>Video thumbnails via ffmpeg/ffprobe.</li> </ul> </li> <li>Job Scheduling: Task management for indexing, transcoding, etc.</li> <li>Custom Configuration: <code>.pg2conf</code> files for UI behavior modification.</li> <li>Dockerized: Easy deployment.</li> </ul>"},{"location":"references/","title":"References","text":""},{"location":"references/#you-said-about-pigallery2","title":"You said about PiGallery2","text":""},{"location":"references/#reddit","title":"reddit","text":"<p>source: reddit</p>"},{"location":"references/#github","title":"github","text":"<p>source: discussion #328</p> <p></p> <p>source: discussion #328</p> <p></p> <p>source: discussion #370</p> <p></p> <p>source: #209</p> <p></p> <p>source: #401</p> <p></p> <p>source: #346</p> <p> source: #59</p> <p></p> <p>source: #120</p> <p></p> <p>source: #240</p> <p></p> <p>source: #220</p>"},{"location":"references/#others","title":"others","text":"<p>source: forum.cloudron.io</p> <p></p> <p>source: makeuseof</p>"},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/","title":"How do I use PiGallery2 (2021)","text":""},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/#how-do-i-use-pigallery2","title":"How do I use PiGallery2","text":"<p>I figured, I write a blogish entry about how I (the developer behind it) use Pigallery2. What is my workflow, how do I see its future.</p>"},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/#my-setup","title":"My setup","text":"<p>System: Raspberry Pi 4 4G Model B, SandisK Mobile Ultra 32Gb CLass10, UHS-I, HDD: Western Digital Elements 1TB (WDBUZG0010BBK) OS: Raspbian GNU/Linux 10 (buster) I own a raspberry with this WD HDD since 2013 and I run one of my custom made gallery on it (currently pigallery2. Funfact: this is the 4th version actually, the first 2 did not made it to github). I use the default docker-compose setup with the nightly-buster image (Earlier I had random file system errors when the host OS and the docker image version was different). I keep all setting on default (except I use mapbox, instead of OpenStreetMaps, it looks better). In others words: the default settings are optimized for RPi4.</p>"},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/#my-workflow","title":"My workflow","text":""},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/#taking-the-photos","title":"Taking the photos","text":"<p>I like photography. I own a Canon 77D and a gopro. I always took photos in raw (I like to underexpose them a bit then later retouch them. I found that this way the photo has a bit more details).</p>"},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/#retouching-the-photos","title":"Retouching the photos","text":"<p>A retouch all of my photos. I use Adobe Lightroom for this (I was considering to switch to an open source app, but I was lazy). Without a retouch no photos can end up in my photo gallery. I also do not show my photos to anyone before I would retouch them. (I\u2019m strict about it, not as much as I was a few years ago, but still quite strict :) ). * Once I finished retouching them, I annotate them: * I assign keywords, * tag faces. Ligthroom mediumly helpful with this. At some point I would like to implement face detection for pigallery2 #57. Until that is ready, I do it manually, so by the time it is ready, the ML model would already have some samples to classify the faces too. * set geolocation. I usually track when I go for a hike or walk and I use the GPS track to set the location of a photo. Luckily Lightroom can do that for me automatically.</p>"},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/#placing-the-photos","title":"Placing the photos","text":"<p>Once retouching is finished, photos go to their own folders. I use the following structure: </p><pre><code>|-- Family\n  |-- 2000\n  |-- 2001\n  |--2002\n    |--2002.01.01 Event name 1\n    |--2002.04.01 Event name 2\n    |--2002.05.01-10 A long event\n|-- Other\n  |-- 2000\n    |-- 2000.05.02 Some event name\n</code></pre> I keep 3 replicas about all my photos: on my personal computer (I move it a lot, It can just die anytime), on my RPi4 server (for pigallery2), on an offline HDD (I happen to own a spare one, so just in case a backup my data there too). It is actually I good practice to physically separate the backups. So far I my gallery is 170Gig with more than 60K photos in it.<p></p>"},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/#making-pigallery-to-recognize-the-new-photos","title":"Making Pigallery to recognize the new photos","text":"<p>Once I copied the photos to my RPi, I let pigallery to index it (I use sqlite. It proved to be fast enough for me). If its only one small album, I just navigate there in the app, so it can recognize the new folder. If I add multiple new folders, I hit reindex in the settings. Reindexing takes a lot of time unfortunately, as it rereads all the photos from the HDD. I\u2019m considering to implement a \u201cquick reindexing\u201d that would only reindex if the modified date of a folder changes.</p> <p>I do the reindex with \u201cjobs\u201d so it also generates thumbnails, full HD preview images, converts videos and cleans up the temp folder. I do schedules jobs to do reindexing periodically. Once it can be triggered on folder change and it can do \u201cquick reindexing\u201d, I will probably give it a try. Until then I like to be in charge, when my RPi does anything ( I do not trust it :D).</p> <p>If the temp folders needs to be recreated (temp photo name generation changed, or I got a new RPi that can handle videos with higher resolution), I use my own computer to run the app and generate all converted photos, videos. (converting one video on an RPi is ok, but multiple gig of videos are :O ). The filenames and path in the temp folder only depends on the path and filename of the original file and quality (like: resolution) of the conversion. So it is safe to do the heavy lifting on a stronger machine and just copy the result to the RPi.</p>"},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/#using-pigallery2","title":"Using Pigallery2.","text":"<p>At this point I have all my nicely edited photos in place, the app indexed them, created thumbnails, previews and converted the videos. I have the following use-cases where I use the app:</p> <ol> <li> <p>Show the photos of an event: This is the most basic usage. I navigate to a folder and just show photos.</p> </li> <li> <p>Keep track, where I have already been: I go the Faces -&gt; click on my name then click on the map. (since the latest map cluster updates, finally it works smoothly. #256)</p> </li> <li> <p><code>Grandma mode</code>: My grandma loves watching old family photos. (Since the Advanced Search #58 is finally ready ), I can search for queries like: <code>2-of:(person:\u201dname1\u201d person:\u201dname2\u201d person:\u201dname3\u201d person:\u201dname4\u201d)</code>. This would show all family photos that contains at least 2 persons from the listed 4. I plan to implement \u201clogical albums\u201d #45  which would be saved search queries placed in the gallery structure. Or some similar feature, where I can save a family photo search query and just load them with one click. With the angular 11 upgrade #255 , pigallery finally works on our older smart tv, so my family can enjoy the photos on a big screen.</p> </li> <li> <p>Get family photos from the last year (List and download them).</p> </li> <li>Every year, we create family calendars as a Christmas present. With developments of the last year, now I can list all family photos from the last year and download them (kudos to mcdamo@, #278 ).</li> <li>Family quiz: From time-to-time I create a kahoot from our family photos to entertain our broader family. I get family photos and ask questions, like when/where was it taken, how is on it, how old are they, etc\u2026 I was thinking about implementing this quiz like feature to the app, but that would be too out of line from the core app. If I ever implement add-on capability, it would be a good candidate for that.</li> </ol>"},{"location":"blog/How%20do%20I%20use%20PiGallery2%202021/#future-plans-nice-to-have-features","title":"Future plans, nice to have features","text":"<p>I have plenty of ideas about the future of the app. Disclaimer: No promises here. It\u2019s only a hobby project. Ever since I started working for real, I cannot look at code at nights. So only weekends are left. And I expect them to get busier once Covid is somewhat over. Thar is why I started inviting people to contribute and started writing CONTRIBUTING.md. I\u2019m still cautious is this, we are talking about \u201cmy precious\u201d here. :) I spent years on it. I\u2019m particularly picky about the design and performance. My aim is to provide high quality experience (like big tech company high quality) but only using a Raspberry. And the UI should be \u201cmom safe\u201d. (The average user should find everything intuitive). In other words: user experience &gt; features. So about the ideas:</p> <ol> <li>Adding ML to recognize faces. #57  (I do not expect to be ready in 2021)</li> <li>Improvement here could be to auto tag photos too (Should not be too hard to add, once faces are there)</li> <li>Super fancy improvement would be here to see if it is possible to analyze emotions on the photos. If you have photos about your whole life, you could plot what part of the life were you happy. (Do not expect to ever implement)</li> <li>Timeline view. #174  Basically show all the photos at once, grouped by data and the scrollbar shows the dates while you scroll. Basically what the famous big photo galleries can do. (do not expect to get implemented in full extend this year)</li> <li>Technically it is possible to do something similar even today (searching for something like <code>.</code>), but in big galleries (50k+ photos) both the backend and fronted will be slow.<ul> <li>On the backend one bottleneck that all photo info that goes back to to client contains if thumbnail exist for that photo (does a HDD read, for 50k+ photos, 2-3 thumbnails sizes, that is a lot of <code>fileExist</code> check)</li> <li>Rending all 50k+ photos on the page at once would trigger 50k+ http image download from the server. (RPi would just go kaboom from this :/). So some load prioritization is needed here. -&gt; needs to be implemented.   Furthermore, not sure, how a browser would behave If the app wants to show 50k+ photos on one html page.</li> <li>Timeline view only make sense if pigallery could detect filesystem changes on its own (without navigating there in the app). Otherwise, people add new photos to the gallery but that wont show up in the timeline view. They would scratch their head and open tickets on github :)</li> </ul> </li> <li>I can imagen a partial solution, where the app can automatically detect the changes but only shows the last X (=~5k) photos. That would serve most of the use-cases, (like you open the app and sees all new photos), but the app would still be able to handle it.</li> <li>Adding local filters. see #287 . Loading data from the server takes long, adding local filters can serve to purpose (I would need 1-2 rainy weekend for this):</li> <li>Filtering quickly locally based on all available metadata</li> <li>It can also provide some statistic about the rendered photos. (Like: You can filter based on keywords. To do so the app would list all available keywords with their frequency)</li> <li>Saved search / \u201clogical albums\u201d #45  (I need 1-2 rainy weekend for this)</li> <li>I plan to add this, so I can shave my family search queries, so I can show family photos to my grandma with a single click.</li> <li>Themes / nigh modes #140  (It does not affect me closely, so it in my mind with a low priority)</li> <li>There were already effort and PRs to make this happen, but I could not merge it in the current form. I also wanted to make it more universal, where people can define their own themes with both light and night mode)</li> <li>Blog-ish feature: Basically the app would recognize <code>README.md</code> files in the folders and would render them once you open a folder in the app. In this case, we could add some notes, storiette to the individual folders (like memories about your holidays)</li> </ol>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/","title":"The future of PiGallery2 (2023)","text":""},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#past-and-present","title":"Past and present","text":"<p>Before we dive into the future of the app, let's first understand the past and present of the app.</p> <p>I started working on pigallery2 7 years ago. Pigallery2 is my second open-source gallery app, but my 3rd/4th gallery app altogether. The existence of pigallery2 is threefold: 1) I wanted an app where I can share my photos with all their metadata with my family. I could have just used something like dropbox, 2) but I have a highly organized gallery that I don't like to upload to any 3rd party place. I could have used one of the available self hosted solutions, but none of them fitted my needs and 3) I like building stuff.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#evolution","title":"Evolution","text":"<p>PiGallery2 evolved from a simple 'list and show photos directly from HDD' app to where it is now. Now PiGallery2 reads photo metadata, indexes photos to DB, resizes them for a blazing fast user experience. The app also supports searching, sharing, blogging, rendering photos on the map and minimal user control (see full list of features here). At the beginning none of these features existed.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#photo-transcoding","title":"Photo transcoding","text":"<p>Originally, the application ran on a raspberry pi 1 with HDD. However, this solution had some limitations. Firstly, as my photos are usually between 5-10MB JPG in size. It was extremely slow to show hundreds of them in a browser window in their full size. Browsers are not good for showing 1GB (100 x 10MB) JPG files on one page. In addition, due to the network limitations (my server was on a home network with a few 100 kbps upload speed), it took forever to download 1 GB. Thus, to overcome the above mentioned obstacles,I added thumbnail generation that first generated small <code>jpg</code>, later <code>webm</code> files. The app supports multiple sizes of thumbnails. When a photo is rendered, the app checks the best thumbnail size and loads that. This way the app does not download any unnecessary bytes, making the experience smoother.</p> <p>I had the same issue with the previews (lightbox). My photos are usually 5-10MBs, but most of the time I only watch them on a full HD or at max on a 4K screen. Transcoding the photos to fhd or 4k saves a lot on transportation data and makes the whole experience way better.</p> <p>Downloading a lot of data was also an important aspect when I used the app on a metered mobile network. I wanted to save on every bit.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#indexing-and-caching-in-db","title":"Indexing and Caching in DB","text":"<p>Now as the photos are small, scanning a directory all the time was still slow. Especially when the app also started reading more and more metadata. So with every directory open (load), the app needed to also read all the photos in that directory. This means opening and reading a few hundred megabytes from an external HDD at every directory open. That took seconds. During that the client could only show a boring loading animation. This is not acceptable in the world of webpages (on web users only wait 2-3s top). So I added multi layer caching: 1. The app scans the directory when the user first navigates to it   * no change up-to this point 2. App stores the scanned file structure in DB for future reuse and also sends that data to the client 3. The client stores the scanned file structure in a local cache and shows that to the user.</p> <p>This way the app, in some cases, doesn't even have to communicate with the server to show a directory that you recently visited. This way a lot of network and computation data is saved in exchange for some caching storage. Of course caching introduces another problem: cache invalidation. So I had to add multiple hooks where the app checks if the client or the server side (the DB) is still valid. Cache can be invalid if the user changes anything in a given directory (like uploading a new photo).</p> <p>Having photo transcoding and caching is what make pigallery2 truly shine, making it even faster than browsing my photos on my personal laptop.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#lack-of-mainstream-features","title":"Lack of mainstream features","text":"<p>I have to admit that there are important features that pigallery2 is lacking. Let me explain why.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#reminder-for-myself","title":"Reminder for myself","text":"<p>First of all, I need to remind everyone and most of all myself, what this app is for. This is a hobby project. Mainly developed by one person in their free time. There is no studio of 2000 developers and a well thought business case behind it. Furthermore, I have a bit of a niche use-cases by having a highly organized gallery of photos. This means, I will never be able to compete with those apps that have a huge corporation behind them or just any reasonable business case. I would need to quit my job, hire people, work full time on it and charge money for it. With that, I would just kill pigallery2 as it is today: being a fun hobby project. So, I need to set boundaries on some features and prioritize those that I actually use.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#editing","title":"Editing","text":"<p>Any sort of editing is a frequently asked feature (well,not that much after I said in the Readme that there is no editing support :) ). There are two reasons for no editing support: : 1. I don't want my family to touch my photos in any way as I carefully edited them   * So I just have no incentive to implement it. 2. The app is made from bottom to top with the assumption that the DB write path is infrequent but the read path is frequent   * So adding this feature would require heavy write path optimization. That would include better cache invalidation.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#source-of-truth-is-the-disk-db-is-only-a-cache","title":"Source of truth is the disk: DB is only a cache","text":"<p>I also frequently get feature requests about only doing edits in the DB. Like manually setting directory cover, hiding photos, adding keywords.</p> <p>I'm not allowing it because of two reasons: 1. I want the app to show the best possible look with the least possible human configuration   * This means the app should be able to select the best photo show in a directory without manually picking them. 2. Developer velocity   * The DB is only a cache that should be possible to delete and rebuild anytime. This is mainly because I don't want to slow down developer velocity by writing and debugging DB upgrade scripts. I rather move fast and break the DB, it's only a cache. I estimate that backend related changes would be 50% slower if I would implement db upgrade scripts. And let's be honest, the dev velocity is already not great with 1-2 yearly releases.   * You can argue that I could just make a huge warning that any DB only changes can be dropped any time. Believe me that would cause a lot of frustration and angry issues on github. I just don't want to deal with those.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#user-control","title":"User control","text":"<p>I frequently get requests to add support for some advanced user control. I mainly mean being able to restrict users to some subset of the gallery.  Or allow search in shared directories or just being able to search at all.</p> <p>Although I find these features also useful and I would like to see them in the app, I need to remind myself what pigallery2 is. It's a hobby project and I just don't have time for all features and I should prioritize those that I also use.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#timeline-view","title":"Timeline view","text":"<p>Having a full timeline view is something that I also wanted to have. Unfortunately, the app is built up with the focus on directory first approach. The app expects all data to be available at the first load time. Mainly the local filters and the map needs it. This is a lot of data. Even with compression, sending all metadata for 200k or more photos at once is just not an option.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#development-velocity","title":"Development velocity","text":"<p>I would like to keep the developer velocity as high as possible. This means there are certain features that I just can't support. I prefer to move fast and break things. In the end that is more fun than writing docs :)</p> <ol> <li>I'm not adding DB upgrade scripts.</li> <li>So the DB is only a cache that can be deleted anytime. So no 'only in DB edits'(#183)</li> <li>I'm not adding proper api documentation.</li> <li>The best I can do is code comments.</li> <li>No user docs</li> <li>I'm actually thinking about setting up a FAQ page. For now, I want to add a lot of explanation to the settings with links to github issues of a given feature.</li> </ol>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#future-of-pigallery2","title":"Future of pigallery2","text":"<p>As we understand the past and the present of the app, let's talk about the future of it. Vision Let\u2019s discuss some of the main areas where the app can improve and where I will focus in the future (I\u2019m talking about far future, so like years, I will still work on it 3 years from now)</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#time-to-gallery","title":"Time to Gallery","text":"<p>This is one of the main areas I want to improve. If you read my previous post on how do I use the app, I spend a lot of time on organizing my photos  (collecting all raw photos, selecting good ones, retouching, keyword tagging, face tagging, geotagging, uploading to the gallery). I want to improve on it by: * Allowing raw photo to show up in the app, so before I have time to do proper edits, my family can already enjoy those photos * Allowing photo uploads a \u201cnot yet organized raw\u201d folder. I might just do it a 3rd party app, like nextcloud or allow add-ons in pigallery and create an upload addon. I don\u2019t see this to be part of the main app. * Let the app auto face keyword tag the photos and use gpx tracks to auto assign gps coordinates to the photos</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#discoverability","title":"Discoverability","text":"<p>This is the other main focus for me. I want to improve on how people can discover new photos. This includes ideas like: * Auto sending weekly photos   * This already possible with mails, but would be better to post to FB messenger chats * Easier sharing * A stretch idea: Autocreate kahoot like games to play at family gatherings.   * Like: where was this photo taken or who is on the photo (and showing an old photo)</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#scalability","title":"Scalability","text":"<p>Scalability is threefold: 1. Better user support. As explained above, I\u2019m not going to invest in this area. 2. Improving performance. I will keep investing here, but there was recently a bug update on it, so I don't expect major improvements in this area. 3. Improved developer velocity / more features. I\u2019m significantly considering adding add-on support at some sort, so people can do easy alteration of the logic without touching the main app.   * This would give me a lower bar to get a working code to the app (as I wont code review the addons) and also faster development.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#usability","title":"Usability","text":"<p>I still have some minimal ideas to improve useability, but the current 2.0 release meant to improve UX/UI, so I do not expect much movement in this area.</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#reliability","title":"Reliability","text":"<p>I consider the app rather reliable in terms of low number of annoying bugs and also rather stable. So I do not plan to do significant development in this area.Main feature in the future</p>"},{"location":"blog/The%20future%20of%20pigallery2%20v2.0.0%20and%20beyond%202023/#tldr","title":"TL,DR","text":"<p>To sum up the discussed areas, I plan to invest in the following 3 features soonish: 1. AI support for auto tagging photos 2. Add-on support 3. Raw photo support</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/","title":"From Zero To Hero (2025)","text":""},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#how-i-deploy-pigallery2","title":"How I deploy pigallery2","text":"<p>After my 2021 post  https://github.com/bpatrik/pigallery2/discussions/292 and my 2023 follow-up https://github.com/bpatrik/pigallery2/discussions/738 on how I use the app, I decided to finally write down how I actually deploy pigallery2.</p> <p>This is not meant to be the only way to run pigallery2, but rather the setup I personally trust and use in production.</p> <p>In this post I\u2019ll show how to deploy <code>pigallery2</code> using:</p> <ul> <li>Docker</li> <li>Portainer (container management)</li> <li>Nginx Proxy Manager (NPM) with SSL</li> <li>Authentik for single sign-on (optional, but recommended)</li> </ul>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#prerequisites","title":"Prerequisites","text":"<p>Before starting, make sure you have:</p> <ol> <li> <p>A domain name you control    Example: <code>https://mypigallery2.com</code></p> </li> <li> <p>A server you can SSH into    I assume a Debian-based Linux machine (Ubuntu, Debian, etc.)</p> </li> <li> <p>Docker installed    \ud83d\udc49 https://docs.docker.com/install/</p> </li> </ol> <p>That\u2019s it. Everything else will run inside containers.</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#preparation","title":"Preparation","text":"<p>I like to keep all configuration files in one place so they\u2019re easy to back up with a simple <code>cp</code> or <code>rsync</code>.</p> <p>Create a config directory in your home folder:</p> <pre><code>cd ~\nmkdir config\n</code></pre> <p>We\u2019ll place all service configs under this directory.</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#portainer","title":"Portainer","text":"<p>Official docs: https://docs.portainer.io/start/install-ce/server/docker/linux#docker-compose</p> <p>Portainer is a web-based Docker manager. It lets you:</p> <ul> <li>deploy Docker Compose stacks</li> <li>update and restart containers</li> <li>inspect logs</li> <li>manage volumes and networks</li> </ul> <p>If you don\u2019t pay for Portainer, you need to start it manually. The easiest way is still Docker Compose.</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#create-the-portainer-config","title":"Create the Portainer config","text":"<pre><code>mkdir portainer\ncd portainer\n</code></pre> <p>Create a <code>docker-compose.yml</code>:</p> <pre><code>version: \"3.9\"\nservices:\n  homer:\n    image: portainer/portainer-ce:lts\n    container_name: portainer\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - portainer_data:/data\n    ports:\n      - 9443:9443\n    restart: always\n\nvolumes:\n  portainer_data:\n    external: true\n</code></pre> <p>Start it, then open:</p> <pre><code>https://localhost:9443\n</code></pre> <p>You should see the Portainer UI.</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#nginx-proxy-manager-npm","title":"Nginx Proxy Manager (NPM)","text":"<p>Official guide: https://nginxproxymanager.com/guide/</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#why-npm","title":"Why NPM?","text":"<p>In 2025, you should not expose any app to the internet without SSL. And you should not trust any self-hosted app \u2014 including mine.</p> <p>I trust nginx to:</p> <ul> <li>terminate TLS</li> <li>handle HTTP quirks</li> <li>protect against basic abuse and misconfiguration</li> </ul> <p>Nginx Proxy Manager makes nginx usable without turning your life into a YAML nightmare.</p> <p>(An alternative would be Traefik, but NPM is easier to reason about.)</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#deploy-npm-via-portainer","title":"Deploy NPM via Portainer","text":"<p>In Portainer, create a new stack and paste this compose file:</p> <pre><code>services:\n  app:\n    container_name: nginx-proxy-manager\n    image: 'jc21/nginx-proxy-manager:latest'\n    restart: unless-stopped\n    ports:\n      - '80:80'\n      - '81:81'\n      - '443:443'\n    volumes:\n      - /home/&lt;user&gt;/configs/nginx-proxy-manager/data:/data # change me\n      - /home/&lt;user&gt;/configs/nginx-proxy-manager/letsencrypt:/etc/letsencrypt # change me\n    networks:\n      - frontend\n\nnetworks:\n  frontend:\n    name: frontend\n</code></pre> <p>Replace <code>&lt;user&gt;</code> with your Linux username.</p> <p>\u26a0\ufe0f Important note about networks</p> <p>The <code>frontend</code> Docker network is crucial. Every service you want to expose publicly must be on the same Docker network.</p> <p>In my setup, this network is called <code>frontend</code>. Use the same name everywhere.</p> <p></p> <p>Deploy the stack. Make sure ports <code>80</code>, <code>81</code>, and <code>443</code> are free on the host.</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#pigallery2","title":"Pigallery2","text":""},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#create-the-container","title":"Create the container","text":"<p>Go back to Portainer and create another stack with the following compose file:</p> <pre><code>version: '3'\nservices:\n  pigallery2:\n    image: bpatrik/pigallery2:latest\n    container_name: pigallery2\n    environment:\n      - NODE_ENV=production\n      # - NODE_ENV=debug # uncomment for debugging\n    volumes:\n      - \"/home/&lt;user&gt;/configs/pigallery2/config:/app/data/config\" # CHANGE ME\n      - \"db-data:/app/data/db\"\n      - \"&lt;path&gt;/images:/app/data/images:ro\" # CHANGE ME, ':ro' means read-only\n      - \"&lt;path&gt;/tmp:/app/data/tmp\" # CHANGE ME\n    expose:\n      - \"80\"\n    restart: always\n    networks:\n      - frontend\n\nvolumes:\n  db-data:\n\nnetworks:\n  frontend:\n    name: frontend\n    external: true\n</code></pre> <p></p> <p>Key points:</p> <ul> <li>The container only exposes port 80, it does not bind it to the host</li> <li>NPM will reach it via Docker networking</li> <li>Images are mounted read-only</li> <li>The DB volume is disposable (as discussed in previous posts)</li> </ul> <p>Deploy the stack.</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#add-pigallery2-to-nginx-proxy-manager","title":"Add pigallery2 to Nginx Proxy Manager","text":"<p>In NPM, add a new Proxy Host.</p> <p> </p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#advanced-configuration","title":"Advanced configuration","text":"<p>Paste the following into the Advanced tab:</p> <pre><code>gzip on;\ngzip_proxied any;\ngzip_comp_level 6;\ngzip_types\n  text/css\n  text/plain\n  text/javascript\n  text/markdown\n  application/javascript\n  application/json\n  application/gpx+xml\n  application/x-javascript\n  application/xml\n  application/xml+rss\n  application/xhtml+xml\n  application/x-font-ttf\n  application/x-font-opentype\n  application/vnd.ms-fontobject\n  image/svg+xml\n  image/x-icon\n  application/rss+xml\n  application/atom_xml;\ngzip_disable \"MSIE [1-6]\\.(?!.*SV1)\";\n\n# Allow all HTTP methods for the API\n# See https://github.com/bpatrik/pigallery2/issues/214\nlocation /pgapi {\n  proxy_pass http://pigallery2:80;\n  proxy_http_version 1.1;\n  proxy_set_header Upgrade $http_upgrade;\n  proxy_set_header Connection 'upgrade';\n  proxy_set_header Host $host;\n  proxy_cache_bypass $http_upgrade;\n}\n\n# UI is GET-only\nlocation / {\n  limit_except GET {\n    deny all;\n  }\n  proxy_pass http://pigallery2:80;\n  proxy_http_version 1.1;\n  proxy_set_header Upgrade $http_upgrade;\n  proxy_set_header Connection 'upgrade';\n  proxy_set_header Host $host;\n  proxy_cache_bypass $http_upgrade;\n}\n</code></pre> <p></p> <p>Save the host. NPM will automatically request SSL certificates.</p> <p>Once finished, you should be able to access:</p> <pre><code>https://mypigallery2.com\n</code></pre>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#authentik-optional-but-recommended","title":"Authentik (optional, but recommended)","text":"<p>Official docs: https://docs.goauthentik.io/install-config/install/docker-compose/</p> <p>If you run multiple self-hosted services, you\u2019ll eventually want single sign-on.</p> <p>Authentik (or Authelia) solves this. Authentik is heavier, but it supports Google login and richer flows.</p> <p>Since https://github.com/bpatrik/pigallery2/issues/1096, pigallery2 supports OpenID Connect, so Authentik integrates cleanly.</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#deploy-authentik-in-portainer","title":"Deploy Authentik in Portainer","text":"<p>I strongly recommend grabbing the latest compose file from their docs, but for reference, here\u2019s mine:</p> <pre><code>services:\n  postgresql:\n    env_file:\n      - stack.env\n    environment:\n      POSTGRES_DB: ${PG_DB:-authentik}\n      POSTGRES_PASSWORD: ${PG_PASS:?database password required}\n      POSTGRES_USER: ${PG_USER:-authentik}\n    healthcheck:\n      interval: 30s\n      retries: 5\n      start_period: 20s\n      test:\n        - CMD-SHELL\n        - pg_isready -d $${POSTGRES_DB} -U $${POSTGRES_USER}\n      timeout: 5s\n    image: docker.io/library/postgres:16-alpine\n    restart: unless-stopped\n    volumes:\n      - database:/var/lib/postgresql/data\n\n  server:\n    command: server\n    depends_on:\n      postgresql:\n        condition: service_healthy\n    env_file:\n      - stack.env\n    environment:\n      AUTHENTIK_POSTGRESQL__HOST: postgresql\n      AUTHENTIK_POSTGRESQL__NAME: ${PG_DB:-authentik}\n      AUTHENTIK_POSTGRESQL__PASSWORD: ${PG_PASS}\n      AUTHENTIK_POSTGRESQL__USER: ${PG_USER:-authentik}\n      AUTHENTIK_SECRET_KEY: ${AUTHENTIK_SECRET_KEY:?secret key required}\n    image: ${AUTHENTIK_IMAGE:-ghcr.io/goauthentik/server}:${AUTHENTIK_TAG:-2025.10.2}\n    ports:\n      - ${COMPOSE_PORT_HTTP:-9000}:9000\n      - ${COMPOSE_PORT_HTTPS:-9443}:9443\n    restart: unless-stopped\n    volumes:\n      - ./media:/media\n      - ./custom-templates:/templates\n\n  worker:\n    command: worker\n    depends_on:\n      postgresql:\n        condition: service_healthy\n    env_file:\n      - stack.env\n    environment:\n      AUTHENTIK_POSTGRESQL__HOST: postgresql\n      AUTHENTIK_POSTGRESQL__NAME: ${PG_DB:-authentik}\n      AUTHENTIK_POSTGRESQL__PASSWORD: ${PG_PASS}\n      AUTHENTIK_POSTGRESQL__USER: ${PG_USER:-authentik}\n      AUTHENTIK_SECRET_KEY: ${AUTHENTIK_SECRET_KEY:?secret key required}\n    image: ${AUTHENTIK_IMAGE:-ghcr.io/goauthentik/server}:${AUTHENTIK_TAG:-2025.10.2}\n    restart: unless-stopped\n    user: root\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - ./media:/media\n      - ./certs:/certs\n      - ./custom-templates:/templates\n\nvolumes:\n  database:\n    driver: local\n</code></pre> <p>Don\u2019t forget to define environment variables:</p> <p></p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#configure-authentik","title":"Configure Authentik","text":"<p>Create a new Application:</p> <p></p> <ul> <li>Name: pigallery2</li> <li>Slug: <code>pigallery2</code></li> </ul> <p></p> <p>Select provider:</p> <p></p> <ul> <li>Provider type: OAuth2 / OpenID Connect</li> </ul> <p>Set callback URL:</p> <pre><code>https://mypigallery2.com/pgapi/auth/oidc/callback\n</code></pre> <p></p> <p>Other settings:</p> <ul> <li>Subject mode: User\u2019s hashed ID</li> <li>Bindings: none required</li> </ul>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#add-authentik-to-pigallery2","title":"Add Authentik to pigallery2","text":"<p>Finally, configure OIDC inside pigallery2:</p> <p></p> <p>At this point, pigallery2 will delegate authentication to Authentik.</p>"},{"location":"blog/%5BTutorial%5D%20Pigallery2%20From%20Zero%20To%20Hero%202025/#closing-thoughts","title":"Closing thoughts","text":"<p>This setup might look heavy at first, but it gives me:</p> <ul> <li>TLS everywhere</li> <li>sane HTTP defaults</li> <li>isolation between services</li> <li>optional SSO</li> <li>zero trust in my own code \ud83d\ude04</li> </ul> <p>If something breaks, I can tear everything down and rebuild it \u2014 which fits perfectly with pigallery2\u2019s philosophy of DB as cache and disk as source of truth.</p> <p>Hope this helps others running pigallery2 in the wild.</p>"},{"location":"development/contributing/","title":"Contributing","text":""},{"location":"development/contributing/#pigallery2-contribution-guide-draft","title":"PiGallery2 Contribution guide (draft)","text":""},{"location":"development/contributing/#intro","title":"Intro","text":"<p>This project reached to a point when I cannot maintain it alone.  I'm happy to see that some people already submitted some pull requests (PR) so everyone can benefit their changes. In general, I'm happy to merge PRs, but I recommend filling a ticket and ask first if it is OK.</p>"},{"location":"development/contributing/#how-to-develop","title":"How to develop","text":"<ol> <li>Download the source files</li> <li>install dependencies <code>npm install</code></li> <li>Build client  <code>npm run run-dev</code></li> <li>This will build the client with english localization and will keep building if you change the source files. </li> <li>Note: This process does not exit, so you need another terminal to run the next step.</li> <li>Build the backend <code>npm run build-backend</code></li> <li>This runs <code>tsc</code> that transpiles <code>.ts</code> files to <code>.js</code> so node can run them. <ul> <li>To rebuild on change run <code>tsc -w</code></li> </ul> </li> <li>Note: you can skip this test if you use and IDE that supports typescript (e.g.: webstorm, vscode)</li> <li>Run the server <code>npm start</code></li> </ol>"},{"location":"development/contributing/#developer-docs","title":"Developer docs","text":""},{"location":"development/contributing/#project-structure","title":"Project structure","text":"<p>Overview: </p><pre><code>|-- benchmark --A benchmark tool to test the speed of the app (not needed for development)\n|-- demo -- contains some sample photo for https://pigallery2.onrender.com/  (not needed for development)\n|-- docker -- contains all docker and docker realted configurations (this is the recommended way for app deplyoment)\n|-- docs -- webpage for http://bpatrik.github.io/pigallery2/\n\n|-- src -- contains the rource files &lt;-------- This is what you need\n|-- test -- contains the unit and integration tets &lt;----- be nice and write tests to your feature\n</code></pre><p></p> <p>Source structure: </p><pre><code>|-- src -- contains the rource files &lt;-------- This is what you need\n  |-- backend -- nodejs backend code\n  |-- common -- shared files (mostly DTOs) between the frontend and the backend\n  |-- frontend -- angular based frontend\n</code></pre><p></p> <p>Backend structure: </p><pre><code>|-- src -- contains the rource files &lt;-------- This is what you need\n  |-- backend -- nodejs backend code\n    |-- middlewares -- contains the middlewares. These make minimal input validation and transforamtion\n    |-- model -- contains the business logic\n      |-- database -- these return with the gallery related data\n        |-- interfaces -- common, database independent inerfaces\n        |-- memory -- business logic for memory \"database\"\n        |-- sql  -- business logic for sql database\n      |-- diagnostics -- contains the checks for the startup diagnostics (checks if all the settings are valid, all packeges are avaiale, image folder exists, etc.)\n      |-- fileprocessing -- photo and video converting code\n      |-- jobs -- code about job scheduling (crontab like feature)    \n      |-- threading -- code that runs on a separate threading\n        |-- DiskManagerWorker.ts -- scans a direcory\n        |-- Metadataloader.ts -- parses a photo / video for metadata\n        |-- *Worker.ts -- queues and helper classes to convert video / photo, parse a directory\n    |-- routers -- contains the declarations of the HTTP Api endpoints\n    |-- index.ts -- here starts the Server up (callst server.ts)\n    |-- server.ts -- this is HTTP server startup code\n    |-- ProjectPath.ts -- singleton, contains the project related paths\n</code></pre><p></p>"},{"location":"development/contributing/#case-study-listing-a-directory","title":"Case-study: Listing a directory","text":"<p>Scenario: Web UI wants to show the <code>/demoDir</code> directory, usind SQL database with low reindexing severity.</p> <p>Client side: 1. Navigating to <code>http://&lt;domain&gt;/demoDir</code>  2. URL changed: [gallery.component.ts]: <code>onRoute</code> triggered 3. Calling: [gallery.component.ts]: <code>galleryService.loadDirectory('/demoDir')</code> 4. Loding data from local_storage: [gallery.service.ts]: <code>galleryCacheService.getDirectory('/demoDir')</code> 5. Make a call to backend if the content changed [gallery.service.ts]: <code>networkService.getJson&lt;ContentWrapperWithError&gt;('/gallery/content/' + '/testDir', params)</code>     * params contains last modification and last scanned date that is know from the local_storage cache</p> <p>Server side:</p> <ol> <li> <p>Requests hits the server in [GalleryRouter.ts]: <code>protected static addDirectoryList(app: Express)</code>: https://github.com/bpatrik/pigallery2/blob/b79d62840c7496b5068d6af73f10d95b9ac48fdd/src/backend/routes/GalleryRouter.ts#L32-L46</p> </li> <li> <p>Authenticating user: [AuthenticationMWs.ts]: <code>AuthenticationMWs.authenticate</code></p> <ul> <li>On fail return with error</li> </ul> </li> <li>Normalizing <code>directory</code> path parameter (in this case <code>/testDir</code>): [AuthenticationMWs.ts]: <code>AuthenticationMWs.normalizePathParam('directory')</code><ul> <li>Makes sure that path does not go out of the allowed paths (gallery itself)</li> </ul> </li> <li>Cheking if the path exists and the User has rights to access it: [AuthenticationMWs.ts]:<code>AuthenticationMWs.authorisePath('directory', true)</code><ul> <li>returns 403 if not accessable</li> </ul> </li> <li>Injecting gallery version to the HTTP header: [VersionMWs.ts]:<code>VersionMWs.injectGalleryVersion</code><ul> <li>gallery version is a hash that represents the current gallery status (latest modified date, number of photos/videos, etc)</li> </ul> </li> <li>Getting the content of <code>/testDir</code>   [GalleryMWs]: GalleryMWs.listDirectory<ol> <li>If the last modificatoin and scan date of <code>/testDir</code> equals with what the client have sent, returning empty result to the client (skipping the rest)</li> <li>If last modification date is different from what the client knew, reindexing <code>/testDir</code>: <code>IndexingManager.indexDirectory(relativeDirectoryName)</code><ul> <li>Scans a directory, asyncronously saves it to DB, while directly retourns with raw results from <code>DiskManagerWorker.ts</code></li> </ul> </li> <li>If Last scan heppened a while ago, reindex it asyncronously and return data from DB</li> </ol> </li> <li>Attaching Thumbnails data to the photos/videos: [ThumbnailGeneratorMWs]: <code>ThumbnailGeneratorMWs.addThumbnailInformation</code><ul> <li>Checks if a photo already has a generated thumbnail image </li> </ul> </li> <li>Removes empty properties and circular dependencies: [GalleryMWs.ts]: <code>GalleryMWs.cleanUpGalleryResults</code></li> <li>Rending http body and ending HTTP call: [RenderingMWs.ts]: <code>RenderingMWs.renderResult</code></li> </ol> <p>Client side:</p> <ol> <li>Setting <code>content</code> BehaviorSubject (rxjs) with the <code>ContentWrapperWithError</code> from the server.</li> <li>Rendering gallery: UI is data binded to the <code>galleryService.content</code> [gallery.component.html]</li> </ol>"},{"location":"development/contributing/#running-the-tests-locally","title":"Running the tests locally","text":"<p>You can run tests in various ways. If you use VS Code, the built-in test explorer is a good way to visualize and run the tests. You can also run tests from the command line.</p> <ul> <li>Run all tests:</li> </ul> <p><code>npx mocha</code> - Run all tests in parallel and report with very verbose output (to debug tests that don't run):</p> <p><code>npx mocha --reporter spec --parallel</code> - Run a specific test (here the SettingsRouter in the backend):</p> <p><code>npx mocha ./test/backend/integration/routers/admin/SettingsRouter.js</code></p>"},{"location":"development/contributing/#mysql-mariadb-tests","title":"MySQL / MariaDB tests","text":"<p>The MySQL / MariaDB tests needs a separate database to be running during the test. If you have docker, you can start one with the required test-settings, using the command below:</p> <p><code>docker run --name pigallery_test -e MYSQL_ROOT_PASSWORD=password -e MYSQL_DATABASE=pigallery_test -e MYSQL_USER=user -e MYSQL_PASSWORD=password -p3306:3306 -d mariadb:10.3 --log-bin --binlog-format=MIXED</code></p> <p>Start this betfore running the tests in text explorer or the command line, if you want to include the MySQL tests.</p> <p>Once you're finished with the testing, you can shut down the container again:</p> <p><code>docker stop pigallery_test</code></p> <p>or you can shut it down AND remove it:</p> <p><code>docker stop pigallery_test &amp;&amp; docker rm pigallery_test</code></p>"},{"location":"development/docker-contributing/","title":"Docker Development","text":""},{"location":"development/docker-contributing/#pigallery2-docker-contribution-guide","title":"PiGallery2 Docker Contribution Guide","text":"<p>Remember to update all the Dockerfiles.</p>"},{"location":"development/docker-contributing/#linting","title":"Linting","text":"<p>To quality check your Dockerfile changes, you can use hadolint:</p> <ol> <li>Start the Docker daemon if it's not already started: <code>sudo dockerd</code></li> <li>Change directory to the <code>docker/</code> folder.</li> <li>Run hadolint on the Dockerfiles: <pre><code>docker run --rm -i -v ./.config/hadolint.yml:/.config/hadolint.yaml hadolint/hadolint &lt; ./alpine/Dockerfile.build\ndocker run --rm -i -v ./.config/hadolint.yml:/.config/hadolint.yaml hadolint/hadolint &lt; ./debian-trixie/Dockerfile.build\ndocker run --rm -i -v ./.config/hadolint.yml:/.config/hadolint.yaml hadolint/hadolint &lt; ./debian-trixie/selfcontained/Dockerfile\n</code></pre></li> </ol> <p>Fix errors and warnings or add them to the ignore list of the hadolint configuration file if there is a good reason for that. Read more here.</p>"},{"location":"development/docker-contributing/#building-the-docker-image-locally-docs-are-as-it-is-no-further-support-provided-for-this","title":"Building the docker image locally (Docs are as-it-is, no further support provided for this)","text":"<p>Get the latest release from github (the source code is not enough, it needs to be built and packed, you can do that fropm source with <code>npm run create-release</code>)</p> <pre><code>wget https://github.com/bpatrik/pigallery2/releases/download/3.1.0/pigallery2-release.zip\nunzip pigallery2-release.zip -d pigallery2\ncd pigallery2\n$ sudo docker build --progress=plain   -t local-pg .\n</code></pre>"},{"location":"development/extensions/","title":"Extensions","text":""},{"location":"development/extensions/#pigallery2-extension","title":"PiGallery2 Extension","text":"<p>See the feature issue for more information: #743.</p> <p>See the sample extension at https://github.com/bpatrik/pigallery2-sample-extension.</p>"},{"location":"development/extensions/#extension-usage","title":"Extension Usage","text":"<p>Extension folder can be set through config. For the docker-ised version, they live under the <code>config/extension</code> folder in their own subdirectory.</p>"},{"location":"development/extensions/#extension-development","title":"Extension development","text":""},{"location":"development/extensions/#minimal-setup","title":"Minimal setup","text":"<p>You need at least a <code>server.js</code> in your extension folder that exports a <code>init(ext) {}</code> function.</p>"},{"location":"development/extensions/#recommended-setup","title":"Recommended setup","text":"<pre><code>&lt;path to the extension fodler&gt;/myextension/package.js &lt;- this is optional. You can add extra npm packages here\n&lt;path to the extension fodler&gt;/myextension/server.js &lt;- this is needed\n</code></pre> <p>Where <code>&lt;path to the extension fodler&gt;</code> is what you set in the config and <code>myextension</code> is the name of your extension. Note: you do not need to add your <code>node_modules</code> folder. The app will call <code>npm install</code> when initializing your extension.</p>"},{"location":"development/extensions/#extension-environment","title":"Extension environment","text":"<p>The app runs the extension the following way:</p> <ul> <li>It reads all extensions in <code>&lt;path to the extension fodler&gt;/**</code> folder</li> <li>Checks if <code>package.js</code> is present. If yes, installs the packages</li> <li>Checks if <code>server.js</code> is present. If yes, calls the <code>init</code> function.</li> </ul>"},{"location":"development/extensions/#init-and-cleanup-lifecycle","title":"Init and cleanup lifecycle","text":"<p>There is also a <code>cleanUp</code> function that you can implement in your extension. The app can call your <code>init</code> and <code>cleanUp</code> functions any time. Always calls the <code>init</code> first then <code>cleanUp</code> later. Main use-case: <code>init</code> is called on app startup. <code>cleanUp</code> and <code>init</code> called later when there is a config change.</p>"},{"location":"development/extensions/#extension-interface","title":"Extension interface","text":"<p>The app calls the <code>init</code> and <code>cleanUp</code> function with a <code>IExtensionObject</code> object. See https://github.com/bpatrik/pigallery2/blob/master/src/backend/model/extension/IExtension.ts for details.</p> <p><code>IExtensionObject</code> exposes lifecycle events, configs, RestAPis with some limitation. Changes made these public apis you do not need to clean up in the <code>cleanUp</code> function. App also exposes private <code>_app</code> object to provide access to low level API. Any changes made here need cleanup.</p>"},{"location":"development/extensions/#serverjs","title":"server.js","text":"<p>See sample server.js at https://github.com/bpatrik/pigallery2-sample-extension.</p> <p>It is recommended to do the development in <code>ts</code>, so creating a <code>server.ts</code>. Note: You need to manually transpile your <code>server.ts</code> file to <code>server.js</code> as the app does not do that for you. This doc assumes you do the development in <code>ts</code>.</p>"},{"location":"development/extensions/#serverts","title":"server.ts","text":"<p>You can import package from both the main app package.json and from your extension package.json. To import packages from the main app, you import as usual. For packages from the extension, you always need to write the relative path. i.e.: prefix with <code>./node_modules</code></p> <pre><code>// Including dev-kit interfaces. It is not necessary, only helps development with types.\n// You need to prefix them with ./node_modules\nimport { IExtensionObject } from \"./node_modules/pigallery2-extension-kit\";\n\n// Including prod extension packages. You need to prefix them with ./node_modules\n// lodash does not have types\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport * as _ from \"./node_modules/lodash\";\n\n// Importing packages that are available in the main app (listed in the packages.json in pigallery2)\nimport { Column, Entity, Index, PrimaryGeneratedColumn } from \"typeorm\";\n</code></pre>"},{"location":"development/extensions/#pigallery2-extension-dev-kit","title":"pigallery2 extension dev-kit","text":"<p>It is recommended to use the <code>pigallery2-extension-kit</code> node package. <code>npm install pigallery2-extension-kit --save</code> to your extension.</p> <p><code>pigallery2-extension-kit</code> contains the type definitions and enums for the app. This node package basically includes the all definitions of the app and exports the <code>IExtensionObject</code> that the <code>init</code> function receives.</p> <p>You can then <code>import {IExtensionObject} from './node_modules/pigallery2-extension-kit';</code></p> <p>See https://github.com/bpatrik/pigallery2/blob/master/src/backend/model/extension/IExtension.ts to understand what contains <code>IExtensionObject</code>.</p> <p>NOTE: this is not needed to create an extension it only helps your IDE and your development. These type definitions are removed when you compile <code>ts</code> to <code>js</code>.</p>"},{"location":"development/extensions/#init-function","title":"<code>init</code> function","text":"<p>You need to implement the <code>init</code> function for a working extension:</p> <pre><code>export const init = async (extension: IExtensionObject&lt;void&gt;): Promise&lt;void&gt; =&gt; {};\n</code></pre>"},{"location":"development/extensions/#pigallery2-lifecycle-events","title":"pigallery2 lifecycle <code>events</code>","text":"<p>The app exposes multiple interfaces for the extensions to interact with the main app. <code>events</code> are one of the main interfaces. Here is their flow:</p> <p></p>"},{"location":"development/extensions/#publishing-your-extension","title":"Publishing your extension","text":"<p>Add a new row to the https://github.com/bpatrik/pigallery2/blob/master/extension/REPOSITORY.md to publish your extension. Pigellery2 reads the online version of the file to chek for available extensions (no need to rebuidl the app).</p>"},{"location":"setup/direct-install/","title":"Direct Install (Unsupported)","text":""},{"location":"setup/direct-install/#direct-installation-unsupported","title":"Direct Installation (Unsupported)","text":"<p>Unsupported Installation Method</p> <p>Running PiGallery2 natively (non-Docker) is possible but not officially supported. The maintainer will not answer questions or fix bugs specifically related to native installations. For the best experience and support, use the Docker Installation.</p>"},{"location":"setup/direct-install/#prerequisites","title":"Prerequisites","text":"<ul> <li>Node.js: The app requires Node.js (check <code>package.json</code> for supported versions).</li> <li>Build Tools: Required for building some native modules.   <pre><code>sudo apt-get install build-essential libkrb5-dev gcc g++\n</code></pre></li> </ul>"},{"location":"setup/direct-install/#installation","title":"Installation","text":""},{"location":"setup/direct-install/#1-install-nodejs","title":"1. Install Node.js","text":"<pre><code>curl -sL https://deb.nodesource.com/setup_22.x | sudo -E bash -\nsudo apt-get install -y nodejs\n</code></pre>"},{"location":"setup/direct-install/#2-install-pigallery2","title":"2. Install PiGallery2","text":""},{"location":"setup/direct-install/#from-release","title":"From Release","text":"<pre><code>wget https://github.com/bpatrik/pigallery2/releases/download/3.0.0/pigallery2-release.zip\nunzip pigallery2-release.zip -d pigallery2\ncd pigallery2\nnpm install\n</code></pre>"},{"location":"setup/direct-install/#from-source","title":"From Source","text":"<p>Note: Requires ~2GB of memory for building. </p><pre><code>wget https://github.com/bpatrik/pigallery2/archive/master.zip\nunzip master.zip\ncd pigallery2-master\nnpm install\nnpm run build\n</code></pre><p></p>"},{"location":"setup/direct-install/#running-the-app","title":"Running the App","text":"<pre><code>npm start\n</code></pre> Default credentials: <code>admin</code> / <code>admin</code>."},{"location":"setup/direct-install/#configuration","title":"Configuration","text":"<ul> <li>Run the app once to generate <code>config.json</code>.</li> <li>Edit <code>config.json</code> manually or use the Settings UI.</li> <li>Use command-line switches for quick overrides:   <pre><code>npm start -- --Server-port=8080\n</code></pre></li> </ul>"},{"location":"setup/docker/","title":"Docker (Recommended)","text":""},{"location":"setup/docker/#pigallery2-docker-installation","title":"PiGallery2 Docker Installation","text":"<p>Docker with docker-compose is the official and recommended way of installing and running PiGallery2. </p> <p>You can use docker to run PiGallery2. See all available docker tags here. available tags:  - <code>v*</code> (stable): built from the release with the same version name.  - <code>latest</code> (stable): same as the latest <code>v*</code>, built with debian buster.  - <code>edge</code> : built from the current state of <code>master</code>. This might break from time to time.</p> <p>Note: Some changes may require database reset or config changes, see #317 (If you want to reduce the frequency of those, use stable builds (<code>latest</code>)</p> <p>We support multiple architectures, including <code>amd64</code>, <code>arm64v8</code>, <code>arm32v7</code> (deprecated see).</p> <p>It contains all necessary dependencies, auto-restarts on reboot, supports HTTPS, and is easy to upgrade.</p>"},{"location":"setup/docker/#0-install-docker-recommended","title":"0. Install Docker (recommended)","text":"<p>Official installation guide here, but this will most likely do the trick on a Raspberry Pi (source):  </p><pre><code>curl -sSL https://get.docker.com | sh\n</code></pre><p></p>"},{"location":"setup/docker/#i-docker-compose","title":"I. Docker Compose","text":"<p>It is recommended to use docker-compose to run PiGallery2.</p>"},{"location":"setup/docker/#i0-install-docker-compose","title":"I.0 Install Docker Compose","text":"<p>Official installation guide here, or try this (source): Install dependencies: </p><pre><code>sudo apt-get install libffi-dev libssl-dev\nsudo apt-get install -y python3 python3-pip\nsudo apt-get remove python-configparser\n</code></pre> Install docker-compose: <pre><code>sudo pip3 install docker-compose\n</code></pre> Check success with <code>docker-compose --version</code>.<p></p>"},{"location":"setup/docker/#i1-get-docker-composeyml-file","title":"I.1 Get docker-compose.yml file","text":"<p>Download docker-compose/default/docker-compose.yml and  docker-compose/default/nginx.conf.</p> <p>Edit <code>docker-compose.yml</code> at the <code># CHANGE ME</code> lines to point the volumes to the right <code>image</code> and <code>tmp</code> directories. Edit <code>nginx.conf</code> at the <code># CHANGE ME</code> lines by replacing <code>yourdomain.com</code> with your domain address.</p> <p>Note: Do not change the <code>image</code> and <code>tmp</code> paths in the <code>config.json</code> or UI; only use Docker <code>volume</code> settings. See here and here.</p> <p>Note: We are using nginx as reverse proxy to handle https and do proper HTTP queuing, gzipping, etc. Full nginx-based docker-compose tutorial here.</p> <p>Note 2: You can skip nginx, by using docker-compose/pigallery2-only/docker-compose.yml.</p>"},{"location":"setup/docker/#i1a-get-ssl-certificate-with-certbot","title":"I.1.a Get SSL Certificate with Certbot","text":"<p>Install Certbot: https://certbot.eff.org/. (Certbot uses letsencrypt to get free certificate). Then get your certificate:  </p><pre><code>certbot certonly --standalone -d yourdomain.com\n</code></pre> Note: if you get an error like <code>Problem binding to port 80: Could not bind to IPv4 or IPv6.</code> then a service is running on port 80. If it's a fresh raspberry install, it's potentially nginx, you can disable it with <code>sudo systemctl disable nginx</code> details here.<p></p>"},{"location":"setup/docker/#i1b-start-docker-compose","title":"I.1.b Start Docker Compose","text":"<p>In the folder that has <code>docker-compose.yml</code>: </p><pre><code>docker-compose up -d\n</code></pre> <code>-d</code> runs it as a daemon. Remove it, so you will see the logs. <p></p> <p>After the containers are up and running, go to <code>yourdomain.com</code> and log in with user: <code>admin</code> pass: <code>admin</code> and set up the page in the settings.  Full list of configuration options are available at the MANPAGE.md.</p> <p>Note: <code>docker-compose.yml</code> contains <code>restart:always</code>, so the containers will be automatically started after reboot (read more here).</p>"},{"location":"setup/docker/#i2-upgrade-to-newer-version","title":"I.2 Upgrade to newer version","text":"<pre><code>docker-compose pull # get new version\ndocker-compose down # stop running container\ndocker system prune # from time to time its nice to clean up docker\ndocker-compose up -d # start containers\n</code></pre>"},{"location":"setup/docker/#ii-without-docker-compose","title":"II. Without Docker Compose","text":"<p>If you want to run the container by yourself, here you go:</p> <pre><code>docker run \\\n   -p 80:80 \\\n   -e NODE_ENV=production \\\n   -v &lt;path to your config file folder&gt;:/app/data/config \\\n   -v &lt;path to your db file folder&gt;:/app/data/db \\\n   -v &lt;path to your images folder&gt;:/app/data/images \\\n   -v &lt;path to your temp folder&gt;:/app/data/tmp \\\n   bpatrik/pigallery2:latest\n</code></pre> <p>After the container is up and running, go to <code>http://localhost</code> and log in with user: <code>admin</code> pass: <code>admin</code> and set up the page in the settings. </p> <p>Note: even with <code>memory</code> db, pigallery2 creates a db file for storing user credentials (if enabled), so mounting (with <code>-v</code>) the <code>/app/data/db</code> folder is recommended.</p> <p>Note 2: Do not change the <code>image</code> and <code>tmp</code> paths in the <code>config.json</code> or UI; only use Docker <code>volume</code> settings. See here and here.</p>"},{"location":"setup/docker/#iia-before-v170","title":"II.a before v1.7.0","text":"<p>There was a breaking change in Docker files after v1.7.0. Use this to run earlier versions:</p> <p></p><pre><code>docker run \\\n   -p 80:80 \\\n   -e NODE_ENV=production \\\n   -v &lt;path to your config file folder&gt;/config.json:/pigallery2-release/config.json \\\n   -v &lt;path to your db file folder&gt;/sqlite.db:/pigallery2-release/sqlite.db \\\n   -v &lt;path to your images folder&gt;:/pigallery2-release/demo/images \\\n   -v &lt;path to your temp folder&gt;:/pigallery2-release/demo/TEMP \\\n   bpatrik/pigallery2:1.7.0-stretch\n</code></pre> Make sure that a file at <code>&lt;path to your config file folder&gt;/config.json</code> and <code>sqlite.db</code> files exists before running it. <p></p> <p>You do not need the <code>&lt;path to your db file folder&gt;/sqlite.db</code> line if you don't use the sqlite database.</p>"},{"location":"setup/docker/#build-the-docker-image-on-your-own","title":"Build the Docker image on your own","text":"<p>You can clone the repository and build the image, or you can just use the 'self-contained' Dockerfile: debian-trixie/selfcontained/Dockerfile Note: 'self-contained' is not well tested, bug fix PRs are welcome.</p>"},{"location":"setup/docker/#contributing-to-docker","title":"Contributing to Docker","text":"<p>See the Docker Contribution Guide.</p>"},{"location":"setup/advanced/advanced-docker-npm-portainer/","title":"Portainer & NPM","text":""},{"location":"setup/advanced/advanced-docker-npm-portainer/#advanced-setup-portainer-and-npm","title":"Advanced Setup: Portainer and NPM","text":"<p>This tutorial covers an advanced deployment scenario using Portainer for container management and Nginx Proxy Manager (NPM) as a reverse proxy.</p> <p>This setup is ideal for users who want: - A GUI to manage Docker containers (Portainer). - Automatic SSL/TLS certificates (NPM + Let's Encrypt). - Optimized Nginx configuration for PiGallery2. - A shared configuration structure.</p>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#prerequisites","title":"Prerequisites","text":"<ol> <li>Docker and Docker Compose installed on your server.</li> <li>A Domain Name with DNS records pointing to your server's IP address.</li> <li>Ports 80 and 443 open on your firewall.</li> </ol>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#preparation","title":"Preparation","text":"<p>It is recommended to keep all configuration files in a centralized location for easy backups.</p> <pre><code>mkdir -p ~/configs/nginx-proxy-manager/data\nmkdir -p ~/configs/nginx-proxy-manager/letsencrypt\nmkdir -p ~/configs/pigallery2/config\n</code></pre>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#1-portainer-setup","title":"1. Portainer Setup","text":"<p>Portainer provides a web UI for managing Docker stacks, containers, and networks.</p>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#deploy-portainer","title":"Deploy Portainer","text":"<p>Run the following command to start Portainer:</p> <pre><code>docker run -d -p 8000:8000 -p 9443:9443 --name portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest\n</code></pre> <p>Access it at <code>https://&lt;your-server-ip&gt;:9443</code>.</p>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#2-shared-network","title":"2. Shared Network","text":"<p>To allow NPM to communicate with other containers, we use a shared Docker network named <code>frontend</code>.</p> <p>In Portainer, go to Networks -&gt; Add network: - Name: <code>frontend</code> - Driver: <code>bridge</code></p>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#3-nginx-proxy-manager-npm-stack","title":"3. Nginx Proxy Manager (NPM) Stack","text":"<p>NPM will handle SSL termination and routing.</p> <p>In Portainer, create a new Stack (Docker Compose) named <code>nginx-proxy-manager</code>:</p> <p></p> <p></p><pre><code>version: '3.8'\nservices:\n  app:\n    container_name: nginx-proxy-manager\n    image: 'jc21/nginx-proxy-manager:latest'\n    restart: unless-stopped\n    ports:\n      - '80:80'\n      - '81:81'\n      - '443:443'\n    volumes:\n      - /home/&lt;user&gt;/configs/nginx-proxy-manager/data:/data\n      - /home/&lt;user&gt;/configs/nginx-proxy-manager/letsencrypt:/etc/letsencrypt\n    networks:\n      - frontend\n\nnetworks:\n  frontend:\n    external: true\n</code></pre> Replace <code>&lt;user&gt;</code> with your actual username.<p></p>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#4-pigallery2-stack","title":"4. PiGallery2 Stack","text":"<p>Deploy PiGallery2 and connect it to the <code>frontend</code> network.</p> <p>Create a new Stack named <code>pigallery2</code> and copy the content of this compose file (original):</p> <p></p> <pre><code>version: '3'\nservices:\n  pigallery2:\n    image: bpatrik/pigallery2:latest\n    container_name: pigallery2\n    deploy:\n      resources:\n        limits:\n          memory: 3G # &lt;1GB RAM might also work. It will trigger GC more often. GC is slow. See https://github.com/bpatrik/pigallery2/issues/1080\n    environment:\n      - NODE_ENV=production\n      - # - NODE_OPTIONS=--enable-source-maps # enable source map support on the backend  for development\n    volumes:\n      - \"/home/&lt;user&gt;/configs/pigallery2/config:/app/data/config\"\n      - \"db-data:/app/data/db\"\n      - \"/mnt/images:/app/data/images:ro\" # Path to your photos\n      - \"/mnt/pigallery2-tmp:/app/data/tmp\" # Path to a tmp folder\n    expose:\n      - \"80\"\n    restart: always\n    networks:\n      - frontend\n\nvolumes:\n  db-data:\n\nnetworks:\n  frontend:\n    external: true\n</code></pre>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#5-configuring-npm","title":"5. Configuring NPM","text":"<p>Access the NPM admin interface at <code>http://&lt;your-server-ip&gt;:81</code>.</p>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#add-pigallery2-proxy-host","title":"Add PiGallery2 Proxy Host","text":"<ol> <li>Domain Names: <code>photos.yourdomain.com</code></li> <li>Scheme: <code>http</code></li> <li>Forward Hostname / IP: <code>pigallery2</code></li> <li>Forward Port: <code>80</code></li> <li>SSL Tab: Select \"Request a new SSL Certificate\", enable \"Force SSL\" and \"HTTP/2 Support\".</li> </ol> <p>] </p>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#advanced-tab","title":"Advanced Tab","text":"<p>Paste the following to enable Gzip compression and handle API/UI routing correctly:</p> <p></p> <pre><code>gzip on;\ngzip_proxied any;\ngzip_comp_level 6;\ngzip_types\n    text/css\n    text/plain\n    text/javascript\n    text/markdown\n    application/javascript\n    application/json\n    application/gpx+xml\n    application/x-javascript\n    application/xml\n    application/xml+rss\n    application/xhtml+xml\n    application/x-font-ttf\n    application/x-font-opentype\n    application/vnd.ms-fontobject\n    image/svg+xml\n    image/x-icon\n    application/rss+xml\n    application/atom_xml;\ngzip_disable \"MSIE [1-6]\\.(?!.*SV1)\";\n\n# API handles all methods (GET, POST, PUT, DELETE, etc.)\nlocation /pgapi {\n    proxy_pass http://pigallery2:80;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection 'upgrade';\n    proxy_set_header Host $host;\n    proxy_cache_bypass $http_upgrade;\n}\n\n# UI is restricted to GET for security\nlocation / {\n    limit_except GET {\n        deny all;\n    }\n    proxy_pass http://pigallery2:80;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection 'upgrade';\n    proxy_set_header Host $host;\n    proxy_cache_bypass $http_upgrade;\n}\n</code></pre>"},{"location":"setup/advanced/advanced-docker-npm-portainer/#summary","title":"Summary","text":"<p>With this setup, you have: - Portainer to easily manage and update your containers. - Nginx Proxy Manager providing SSL and routing. - PiGallery2 securely accessible via your own subdomain. - A shared Docker network allowing internal communication between the proxy and the app.</p>"},{"location":"setup/advanced/authentik/","title":"ORCID with Authentik SSO (Optional)","text":""},{"location":"setup/advanced/authentik/#authentik-setup-optional","title":"Authentik Setup (Optional)","text":"<p>If you run multiple self-hosted services, you may want Single Sign-On (SSO). Authentik is a great choice and integrates cleanly with PiGallery2 via OpenID Connect (OIDC).</p>"},{"location":"setup/advanced/authentik/#deploy-authentik","title":"Deploy Authentik","text":"<p>In Portainer, create a new Stack for Authentik. It is recommended to use the latest <code>docker-compose.yml</code> from the official Authentik documentation. </p> <p>Key configuration points for PiGallery2 integration:</p> <ul> <li>Ensure Authentik is on the <code>frontend</code> network if you want NPM to route to it internally.</li> <li>In Authentik, create a new OAuth2/OpenID Provider.</li> <li>Set the Redirect URI to: <code>https://photos.yourdomain.com/pgapi/auth/oidc/callback</code></li> </ul> <p> </p>"},{"location":"setup/advanced/authentik/#configure-pigallery2-for-oidc","title":"Configure PiGallery2 for OIDC","text":"<p>In the PiGallery2 web interface, go to Settings -&gt; Users and enable OpenID Connect. Use the Client ID, Client Secret, and Issuer URL provided by Authentik.</p> <p></p>"},{"location":"user-guide/configuration/","title":"Configuration","text":""},{"location":"user-guide/configuration/#pigallery-2-man-page","title":"Pigallery 2 man page","text":"<p>pigallery2 uses typeconfig for configuration</p> <p><code>npm start -- --help</code> prints the following:</p> <pre><code>Usage: &lt;appname&gt; [options] \n\nMeta cli options: \n--help                           prints this manual \n--config-path                    sets the config file location \n--config-attachState             prints the value state (default, readonly, volatile, etc..) to the config file \n--config-attachDesc              prints description to the config file \n--config-rewrite-cli             updates the config file with the options from cli switches \n--config-rewrite-env             updates the config file with the options from environmental variables \n--config-string-enum             enums are stored as string in the config file (instead of numbers) \n--config-save-if-not-exist       creates config file if not exist \n--config-save-and-exist          creates config file and terminates \n\n&lt;appname&gt; can be configured through the configuration file, cli switches and environmental variables. \nAll settings are case-sensitive. \nExample for setting config MyConf through cli: '&lt;appname&gt; --MyConf=5' \nand through env variable: 'SET MyConf=5' . \n\nDefault values can be also overwritten by prefixing the options with 'default-', \n like '&lt;appname&gt; --default-MyConf=5' and  'SET default-MyConf=5'\n\nApp CLI options: \n  --Server-applicationTitle                                                  (default: 'PiGallery 2')\n  --Server-publicUrl                                                        If you access the page from local network it's good to know the public url for creating sharing link. (default: '')\n  --Server-urlBase                                                          If you access the gallery under a sub url (like: https://mydomain.com/myGallery), set it here. If it is not working you might miss the '/' from the beginning of the url. (default: '')\n  --Server-apiPath                                                          PiGallery api path. (default: '/pgapi')\n  --Server-customHTMLHead                                                   Injects the content of this between the &lt;head&gt;&lt;/head&gt; HTML tags of the app. (You can use it to add analytics or custom code to the app). (default: '')\n  --Server-svgIcon-viewBox                                                  SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox (default: '0 0 512 512')\n  --Server-svgIcon-items                                                    Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons. (default: '&lt;path d=\"m185.92 0.042372c-3.1045 0.19567-6.2676 1.0899-9.1546 3.163-16.085-8.0588-25.565 1.6894-23.504 14.76-5.3047 4.0078-10.768 7.8463-6.3153 20.688-4.8283 4.5113-5.2702 11.17-1.2227 20.894-4.5731 7.1343-3.0927 13.944 1.4676 20.445-5.0506 10.26 3.7514 20.507 6.2389 23.943-0.99909 6.6761-0.49742 13.458 11.016 21.392-1.2207 10.005 5.7492 14.415 12.419 19.045 12.567 8.1824 17.213 7.2406 27.088 10.328l-0.13366-1.1862c-15.833 3e-3 -31.017 6.2997-42.211 17.506l-24.715 24.736c-11.194 11.206-26.378 17.503-42.211 17.506h-34.984c-32.972 3.6e-4 -59.702 26.751-59.701 59.749v179.24c3.6312e-4 32.997 26.729 59.746 59.701 59.747h358.21c32.972-3.6e-4 59.7-26.75 59.701-59.747v-179.24c-0.0162-23.02-13.245-43.983-34.008-53.889 3.0728-1.7781 5.0617-4.3071 6.7327-7.0379 4.1124-1.032 17.438-3.2179 20.159-14.327 7.7661-2.0112 13.273-6.2767 14.255-14.719 9.3465-4.8456 13.285-10.23 12.484-16.792 11.694-7.0704 9.9759-13.526 8.4511-19.912 9.9742-8.687 8.874-22.288-8.6236-26.461-3.1292-12.25-18.501-15.32-20.733-16.133-1.3931-4.0275-3.7026-7.9496-14.353-10.399-4.4451-8.3291-12.211-9.9464-20.904-9.9225-6.4476-10.379-14.548-6.8393-22.216-7.2124-9.6958-7.4917-13.951-3.6525-20.032-3.5572-11.02-6.8739-16.687-2.7782-24.497 0.86675l-6.6602-2.5355c-21.868 3.9146-38.57 22.031-45.765 31.84 0.78895-12.143-0.36806-36.764-14.606-53.831l-6.7327-2.3414c-3.6422-7.8167-5.3526-14.6-18.209-16.423-4.7287-3.9225-5.388-9.6636-17.627-10.162-3.9701-2.9861-7.0841-7.4205-11.972-9.091-2.5588-0.82206-5.6927-0.97346-9.6817 0.32356-6.6078-5.7069-13.63-9.3648-22.385-5.8437-9.7319-4.9749-14.082-3.5883-17.674-1.2668-1.3952-0.50821-7.2885-3.6439-14.018-4.1239-1.0094-0.071996-2.0376-0.084841-3.0724-0.019609zm1.017 13.578c10.104 0.93027 18.591 7.2129 24.705 11.86 3.989-1.297 1.8817-5.4748-0.67601-9.9264 7.4731 3.9321 13.922 8.2611 19.542 13.058 4.4921-1.7738-6e-3 -6.9333-1.6283-10.934 11.32 6.6532 15.299 11.732 19.277 16.811 4.96-2.1534 2.5609-6.4373 1.1326-10.368 7.9224 6.6257 11.087 12.731 14.482 18.808 2.4625-1.6331 5.6853-2.3301 4.5577-8.9008 5.1605 6.0597 8.5191 12.233 10.344 18.398 4.8979-1.076 4.6167-5.1376 5.7471-8.2459 4.8158 7.9142 7.0028 15.201 10.195 22.743 1.3502-0.38818 3.143-2.596 5.5002-6.3575 10.495 21.313 19.172 68.475-19.542 71.864-19.845-33.079-47.35-62.019-80.099-88.028 39.018 41.712 59.701 71.578 68.828 93.932-5.6123 8.2892-13.186 12.888-21.423 15.182h-31.496c-9.0855-1.8937-17.047-4.8048-21.968-6.9301 3.5034-0.26396 6.761-1.0578 8.553-3.265-2.8932-4.1339-16.942-6.6095-24.423-15.054 3.8384 0.62815 5.771 0.45179 8.3395-1.4727-7.7461-5.9015-16.277-11.759-20.149-18.339 3.0088 1.096 5.5764 2.7998 10.448 1.4943-6.3427-7.0404-13.489-13.382-17.696-22.065 4.1118 1.3877 8.4445 3.0751 10.271 1.9806-5.5926-6.9871-9.844-14.035-12.948-21.216 5.3821 2.7304 8.0206 3.0315 9.7326 2.5551-3.457-7.4192-8.6517-14.592-9.4172-22.461 3.6436 2.9772 7.3478 4.8776 10.904 3.8631-0.36036-4.7513-7.3377-10.044-8.4022-21.322 4.3234 2.0148 8.7693 4.2946 10.093 3.6768 0.9645-8.9987-0.93024-14.97-2.5963-20.967 9.547 3.3675 23.877 8.6978 23.48 7.6733zm202.89 68.954c-1.1657 3.2054-4.0535 6.0044-0.89552 10.015 5.3574-3.5486 11.898-6.1175 19.744-7.4399-5.0841 4.3081-3.1624 6.8795-2.228 9.7499 6.5043-2.4708 12.815-5.0123 23.175-5.0887-3.6187 2.0919-8.2066 3.8292-5.7902 8.6694 6.3098-1.3316 12.62-2.6636 25.565-0.47848-3.8128 2.0212-10.67 3.0443-8.2709 7.3281 7.289-0.095 15.142 0.67658 23.357 2.5689-4.9157 1.7295-9.1161 3.6077-6.8934 7.1673 7.6683 0.37321 18.204 1.0216 26.541 6.8085l-7.9768 3.8043c-0.96209 0.52956 13.473 5.5674 22.914 9.2263-5.2605 3.5839-10.415 6.8757-15.456 14.39 0.61731 1.3249 5.4871 2.4391 10.093 3.6768-8.059 7.9545-16.768 7.4235-20.131 10.928 2.0376 3.1622 6.0354 3.9567 10.836 4.0553-5.7375 5.5002-14.227 7.6885-21.64 11.148 1.0057 1.4663 3.2192 2.9338 9.0958 4.3043-6.9901 3.5039-14.773 6.1675-23.545 7.9223 0.73194 1.9166 5.0978 3.5087 9.1389 5.0907-8.7991 3.945-18.346 4.207-27.726 5.5201 2.9287 4.0367 5.9538 4.4791 8.9626 5.575-7.1926 2.5501-17.455 1.4514-27.215 1.0864 0.46776 2.1663 1.3155 3.4454 2.7961 4.6612h-13.75c-5.1274-1.4192-9.4503-2.9189-11.788-2.2747-0.0214 0.78201 0.12538 1.5366 0.37044 2.2747h-6.1841c-2.2143-0.16717-4.4175-0.45785-6.5995-0.87068-17.23-8.2945-37.615-23.515-35.198-47.897 21.35-11.254 56.342-20.728 113.06-27.679-41.792-1.1427-81.452 3.3317-117.9 15.905-27.674-27.57 9.2662-58.115 30.995-67.691-0.70716 4.3624-0.65582 7.2407 0.12836 8.4067 7.2901-3.7246 13.646-7.8991 22.418-10.864zm-186.04 100.82h69.97c7.9167 2e-3 15.508 3.1505 21.105 8.7538l24.717 24.736c16.798 16.816 39.584 26.262 63.343 26.259h34.984c16.486 1.9e-4 29.85 13.375 29.85 29.873v179.24c-1.9e-4 16.499-13.365 29.873-29.85 29.873h-358.21c-16.486-1.8e-4 -29.85-13.375-29.85-29.873v-179.24c1.88e-4 -16.499 13.365-29.873 29.85-29.873h34.984c23.739-0.0128 46.501-9.4579 63.285-26.259l24.775-24.736c5.582-5.5884 13.149-8.736 21.045-8.7538zm35.016 59.749c-57.625 0.10848-104.28 46.889-104.28 104.56 0 57.669 46.656 104.45 104.28 104.56 57.625-0.10848 104.28-46.889 104.28-104.56 0-57.669-46.656-104.45-104.28-104.56zm-164.18 29.873c-8.2429 9e-5 -14.925 6.6874-14.925 14.937 0.03875 8.2218 6.7096 14.866 14.925 14.866s14.886-6.6446 14.925-14.866c-9.1e-5 -8.2493-6.6823-14.937-14.925-14.937zm164.18 0c41.206 0.0135 74.603 33.447 74.603 74.684 0 41.238-33.397 74.671-74.603 74.684-41.206-0.0135-74.603-33.447-74.603-74.684 0-41.238 33.397-74.671 74.603-74.684z\"/&gt;')\n  --Server-reloadClientOnServerUpdate                                       If set the UI will auto reload when client related config changed or the app was restarted (except when the UI shows the settings page). (default: true)\n  --Server-sessionSecret                                                     (default: [])\n  --Server-sessionTimeout                                                   Users kept logged in for this long time. (default: 604800000)\n  --Server-trustProxy                                                       Should the backend trust proxies to extract remote Client IP. See express docs, for valid values: https://expressjs.com/en/guide/behind-proxies.html (default: 'false')\n  --Server-port                                                             Port number. Port 80 is usually what you need. (default: 80)\n  --Server-host                                                             Server will accept connections from this IPv6 or IPv4 address. (default: '0.0.0.0')\n  --Server-Log-level                                                        Logging level. (default: 'info')\n  --Server-Log-sqlLevel                                                     Logging level for SQL queries. (default: 'error')\n  --Server-Log-logServerTiming                                              If enabled, the app adds \"Server-Timing\" http header to the response. (default: false)\n  --Users-authenticationRequired                                            Enables user management with login to password protect the gallery. (default: true)\n  --Users-unAuthenticatedUserRole                                           Default user right when password protection is disabled. (default: 'Admin')\n  --Users-oidc-enabled                                                       (default: false)\n  --Users-oidc-displayName                                                  Shown on the login button (client-visible). (default: '')\n  --Users-oidc-issuerUrl                                                    OIDC provider Issuer URL (default: '')\n  --Users-oidc-clientId                                                      (default: '')\n  --Users-oidc-clientSecret                                                  (default: '')\n  --Users-oidc-redirectUri                                                  Full callback URL registered at the provider (e.g.: https://example.com/pgapi/auth/oidc/callback) (default: '')\n  --Users-oidc-scopes                                                        (default: [\"openid\",\"profile\",\"email\"])\n  --Users-oidc-usernameClaim                                                JWT claim to use for matching user name. Defaults to preferred_username; fallbacks to email if empty. (default: 'preferred_username')\n  --Users-oidc-emailClaim                                                    (default: 'email')\n  --Users-oidc-allowedDomains                                               If set, only identities with emails in these domains will be accepted. (default: [])\n  --Users-oidc-autoCreateUser                                               If enabled, unknown users will be created with Guest role on first login. If disabled, only existing app users can log in. (default: false)\n  --Users-enforcedUsers                                                     Creates these users in the DB during startup if they do not exist. If a user with this name exist, it won't be overwritten, even if the role is different. (default: [])\n  --Users-allowQuery                                                        Setting a non empty search query here will make the app to only SHOW photos and videos that match the query. You can override this at every user separately. (default: {\"type\":100,\"value\":\"\"})\n  --Users-blockQuery                                                        Setting a non empty search query here will make the app to HIDE photos and videos that match the query. You can override this at every user separately. (default: {\"type\":100,\"value\":\"\"})\n  --Users-suppressDefUserWarn                                               if true, the app won't show a warning for using the default user. (default: false)\n  --Gallery-enableCache                                                     Caches directory contents and search results for better performance. (default: true)\n  --Gallery-enableOnScrollRendering                                         Those thumbnails get higher priority that are visible on the screen. (default: true)\n  --Gallery-enableDirectorySortingByDate                                    If enabled, directories will be sorted by date, like photos, otherwise by name. Directory date is the last modification time of that directory not the creation date of the oldest photo. (default: false)\n  --Gallery-ignoreTimestampOffset                                           If enabled, timestamp offsets are ignored, meaning that the local times of pictures are used for searching, sorting and grouping. If disabled, global time is used and pictures with no timestamp are assumed to be in UTC (offset +00:00). (default: true)\n  --Gallery-enableOnScrollThumbnailPrioritising                             Those thumbnails will be rendered first that are in view. (default: true)\n  --Gallery-NavBar-enableDownloadZip                                        Enable zipped download of the listed directory or search results. (default: true)\n  --Gallery-NavBar-enableDirectoryFlattening                                Adds a button to flatten the file structure, by listing the content of all subdirectories. (Won't work if the gallery has multiple folders with the same path.) (default: false)\n  --Gallery-NavBar-defaultGidSize                                           Default grid size that is used to render photos and videos. (default: 'medium')\n  --Gallery-NavBar-showItemCount                                            Shows the number photos and videos on the navigation bar. (default: true)\n  --Gallery-NavBar-links                                                    Visible links in the top menu. (default: [{\"type\":1},{\"type\":3},{\"type\":2}])\n  --Gallery-NavBar-NavbarShowDelay                                          Ratio of the page height, you need to scroll to show the navigation bar. (default: 0.3)\n  --Gallery-NavBar-NavbarHideDelay                                          Ratio of the page height, you need to scroll to hide the navigation bar. (default: 0.15)\n  --Gallery-NavBar-showScrollUpButton                                       Set when the floating scroll-up button should be visible. (default: 'mobileOnly')\n  --Gallery-NavBar-SortingGrouping-defaultPhotoSortingMethod-method          (default: 'Date')\n  --Gallery-NavBar-SortingGrouping-defaultPhotoSortingMethod-ascending       (default: true)\n  --Gallery-NavBar-SortingGrouping-defaultSearchSortingMethod-method         (default: 'Date')\n  --Gallery-NavBar-SortingGrouping-defaultSearchSortingMethod-ascending      (default: false)\n  --Gallery-NavBar-SortingGrouping-defaultPhotoGroupingMethod-method         (default: 'Date')\n  --Gallery-NavBar-SortingGrouping-defaultPhotoGroupingMethod-ascending      (default: true)\n  --Gallery-NavBar-SortingGrouping-defaultSearchGroupingMethod-method        (default: 'Date')\n  --Gallery-NavBar-SortingGrouping-defaultSearchGroupingMethod-ascending     (default: false)\n  --Gallery-captionFirstNaming                                              Show the caption (IPTC 120) tags from the EXIF data instead of the filenames. (default: false)\n  --Gallery-Lightbox-slideshowSpeed                                         Default time interval for displaying a photo in the slide show. (default: 5)\n  --Gallery-Lightbox-captionAlwaysOn                                        If enabled, lightbox will always show caption by default, not only on hover. (default: false)\n  --Gallery-Lightbox-facesAlwaysOn                                          If enabled, lightbox will always show faces by default, not only on hover. (default: false)\n  --Gallery-Lightbox-loopVideos                                             If enabled, lightbox will loop videos by default. (default: false)\n  --Gallery-Lightbox-loopSlideshow                                          If enabled, lightbox will start from the first photo when it reached the last one. (default: false)\n  --Gallery-Lightbox-loadFullImageOnZoom                                    Enables loading the full resolution image on zoom in the lightbox (preview). (default: true)\n  --Gallery-Lightbox-loadFullImageIfPreviewTooSmall                         When enabled, the lightbox will load the full resolution image if all available preview thumbnails are too small for the current view. (default: true)\n  --Gallery-Lightbox-Titles-topLeftTitle                                     (default: [6])\n  --Gallery-Lightbox-Titles-topLeftSubtitle                                  (default: [5])\n  --Gallery-Lightbox-Titles-bottomLeftTitle                                  (default: [10,9])\n  --Gallery-Lightbox-Titles-bottomLeftSubtitle                               (default: [8])\n  --Gallery-Themes-enabled                                                  Enable themes and color modes. (default: true)\n  --Gallery-Themes-defaultMode                                              Sets the default theme mode that is used for the application. (default: 'auto')\n  --Gallery-Themes-selectedTheme                                            Selected theme to use on the site. (default: 'classic')\n  --Gallery-Themes-availableThemes                                          Adds these CSS settings as it is to the end of the body tag of the page. (default: [{\"name\":\"classic\",\"theme\":\":root nav.navbar {\\n--bs-navbar-color: rgba(255, 255, 255, 0.55);\\n--bs-navbar-hover-color: rgba(255, 255, 255, 0.75);\\n--bs-navbar-disabled-color: rgba(255, 255, 255, 0.25);\\n--bs-navbar-active-color: #fff;\\n--bs-navbar-brand-color: #fff;\\n--bs-navbar-brand-hover-color: #fff;\\n--bs-bg-opacity: 1;\\nbackground-color: rgba(var(--bs-dark-rgb), var(--bs-bg-opacity)) !important;\\n}\"}])\n  --Gallery-InlineBlogStartsOpen                                            Makes inline blog (*.md files content) auto-open. (default: false)\n  --Gallery-TopBlogStartsOpen                                               Makes top blog (*.md files content) auto-open. (default: false)\n  --Gallery-AutoUpdate-enable                                               Enable auto polling for new photos and videos in the gallery. (default: false)\n  --Gallery-AutoUpdate-interval                                             Frequency of the auto polling in seconds. (default: 60)\n  --Media-Video-enabled                                                      (default: true)\n  --Media-Video-supportedFormatsWithTranscoding                             Video formats that are supported after transcoding (with the built-in ffmpeg support). (default: [\"avi\",\"mkv\",\"mov\",\"wmv\",\"flv\",\"mts\",\"m2ts\",\"mpg\",\"3gp\",\"m4v\",\"mpeg\",\"vob\",\"divx\",\"xvid\",\"ts\"])\n  --Media-Video-supportedFormats                                            Video formats that are supported also without transcoding. Browser supported formats: https://www.w3schools.com/html/html5_video.asp (default: [\"mp4\",\"webm\",\"ogv\",\"ogg\"])\n  --Media-Video-transcoding-bitRate                                         Target bit rate of the output video will be scaled down to this. This should be less than the upload rate of your home server. (default: 5242880)\n  --Media-Video-transcoding-resolution                                      The height of the output video will be scaled down to this, while keeping the aspect ratio. (default: 720)\n  --Media-Video-transcoding-fps                                             Target frame per second (fps) of the output video will be scaled down to this. (default: 25)\n  --Media-Video-transcoding-format                                           (default: 'mp4')\n  --Media-Video-transcoding-mp4Codec                                         (default: 'libx264')\n  --Media-Video-transcoding-webmCodec                                        (default: 'libvpx')\n  --Media-Video-transcoding-crf                                             The range of the Constant Rate Factor (CRF) scale is 0\u201351, where 0 is lossless, 23 is the default, and 51 is worst quality possible. (default: 23)\n  --Media-Video-transcoding-preset                                          A preset is a collection of options that will provide a certain encoding speed to compression ratio. A slower preset will provide better compression (compression is quality per filesize). (default: 'medium')\n  --Media-Video-transcoding-customOutputOptions                             It will be sent to ffmpeg as it is, as custom output options. (default: [])\n  --Media-Video-transcoding-customInputOptions                              It will be sent to ffmpeg as it is, as custom input options. (default: [])\n  --Media-Photo-iconSize                                                    Icon size (used on maps). (default: 45)\n  --Media-Photo-personThumbnailSize                                         Person (face) thumbnail size. (default: 200)\n  --Media-Photo-thumbnailSizes                                              Size of the thumbnails and photo previews. The best matching size will be used (smaller for photo and video thumbnail, bigger for photo preview). More sizes give better quality, but use more storage and CPU to render. If size is 240, that shorter side of the thumbnail will be 240 pixels. (default: [320,540,1080,2160])\n  --Media-Photo-concurrentThumbnailGenerationsLimit                         By default the app uses the number of cpus -1 concurrent threads to generate thumbnails. Set this number higher than 0 to limit the number of concurrent threads. (default: 0)\n  --Media-Photo-supportedFormats                                            Photo formats that are supported. Browser needs to support these formats natively. Also sharp (libvips) package should be able to convert these formats. (default: [\"gif\",\"jpeg\",\"jpg\",\"jpe\",\"png\",\"webp\",\"svg\",\"avif\",\"heic\",\"dng\",\"arw\",\"tiff\"])\n  --Media-Photo-useLanczos3                                                 if true, 'lanczos3' will used to scale photos, otherwise faster but lower quality 'nearest'. (default: true)\n  --Media-Photo-quality                                                     Between 0-100. (default: 80)\n  --Media-Photo-smartSubsample                                              Use high quality chroma subsampling in webp. See: https://sharp.pixelplumbing.com/api-output#webp. (default: true)\n  --Media-Photo-sharpOptions                                                Add any sharp options here. They will be added to sharp constructor as raw params. See: https://sharp.pixelplumbing.com/api-constructor/. (default: {\"test\":444})\n  --Media-Photo-personFaceMargin                                            This ratio of the face bounding box will be added to the face as a margin. Higher number add more margin. (default: 0.7)\n  --Media-Photo-animateGif                                                  Converts Gif to animated webp. (default: true)\n  --Media-folder                                                            Images are loaded from this folder (read permission required) (default: 'demo/images')\n  --Media-tempFolder                                                        Thumbnails, converted photos, videos will be stored here (write permission required) (default: 'demo/tmp')\n  --MetaFile-gpx                                                            Reads *.gpx files and renders them on the map. (default: true)\n  --MetaFile-GPXCompressing-enabled                                         Enables lossy (based on delta time and distance. Too frequent points are removed) GPX compression. (default: true)\n  --MetaFile-GPXCompressing-onTheFly                                        Enables on the fly *.gpx compression. (default: true)\n  --MetaFile-GPXCompressing-minDistance                                     Filters out entry that are closer than this to each other in meters. (default: 5)\n  --MetaFile-GPXCompressing-maxMiddleDeviance                               Filters out entry that would fall on the line if we would just connect the previous and the next points. This setting sets the sensitivity for that (higher number, more points are filtered). (default: 5)\n  --MetaFile-GPXCompressing-minTimeDistance                                 Filters out entry that are closer than this in time in milliseconds. (default: 5000)\n  --MetaFile-markdown                                                       Reads *.md files in a directory and shows the next to the map. (default: true)\n  --MetaFile-pg2conf                                                        Reads *.pg2conf files (You can use it for custom sorting and saved search (albums)). (default: true)\n  --MetaFile-supportedFormats                                               The app will read and process these files. (default: [\"gpx\",\"pg2conf\",\"md\"])\n  --Album-enabled                                                            (default: true)\n  --Album-readAccessMinRole                                                 Required minimum right to show the albums tab. (default: 'User')\n  --Search-enabled                                                          Enables searching. (default: true)\n  --Search-searchCacheTimeout                                               Search cache timeout. (default: 3600000)\n  --Search-AutoComplete-enabled                                             Show hints while typing search query. (default: true)\n  --Search-AutoComplete-ItemsPerCategory-maxItems                           Maximum number autocomplete items shown at once. If there is not enough items to reach this value, it takes up to double of the individual items. (default: 20)\n  --Search-AutoComplete-ItemsPerCategory-fileName                           Maximum number autocomplete items shown per photo category. (default: 2)\n  --Search-AutoComplete-ItemsPerCategory-directory                          Maximum number autocomplete items shown per directory category. (default: 2)\n  --Search-AutoComplete-ItemsPerCategory-caption                            Maximum number autocomplete items shown per caption category. (default: 3)\n  --Search-AutoComplete-ItemsPerCategory-position                           Maximum number autocomplete items shown per position category. (default: 3)\n  --Search-AutoComplete-ItemsPerCategory-person                             Maximum number autocomplete items shown per faces category. (default: 5)\n  --Search-AutoComplete-ItemsPerCategory-keyword                            Maximum number autocomplete items shown per keyword category. (default: 5)\n  --Search-AutoComplete-cacheTimeout                                        Autocomplete cache timeout.  (default: 3600000)\n  --Search-maxMediaResult                                                   Maximum number of photos and videos that are listed in one search result. (default: 10000)\n  --Search-maxDirectoryResult                                               Maximum number of directories that are listed in one search result. (default: 200)\n  --Search-listDirectories                                                  Search returns also with directories, not just media. (default: false)\n  --Search-listMetafiles                                                    Search also returns with metafiles from directories that contain a media file of the matched search result. (default: true)\n  --Sharing-enabled                                                         Enables sharing. (default: true)\n  --Sharing-passwordRequired                                                Requires password protected sharing links. (default: false)\n  --Sharing-sharingKeyLength                                                The longer the keys are, the harder they are to guess. Changing this number won't invalidate existing sharing. (default: 8)\n  --Sharing-updateTimeout                                                   After creating a sharing link, it can be updated for this long. (default: 300000)\n  --Map-enabled                                                              (default: true)\n  --Map-useImageMarkers                                                     Map will use thumbnail images as markers instead of the default pin. (default: true)\n  --Map-mapProvider                                                          (default: 'OpenStreetMap')\n  --Map-mapboxAccessToken                                                   MapBox needs an access token to work, create one at https://www.mapbox.com. (default: '')\n  --Map-customLayers                                                        The map module will use these urls to fetch the map tiles. (default: [{\"name\":\"street\",\"url\":\"\",\"darkLayer\":false}])\n  --Map-maxPreviewMarkers                                                   Maximum number of markers to be shown on the map preview on the gallery page. (default: 50)\n  --Map-MapPathGroupConfig                                                  Markers are grouped and themed by these settings (default: [{\"name\":\"Transportation\",\"matchers\":[{\"matchers\":[\"flight\",\"flying\"],\"theme\":{\"color\":\"var(--bs-orange)\",\"dashArray\":\"4 8\",\"svgIcon\":{\"viewBox\":\"0 0 567 512\",\"items\":\"&lt;path d=\\\"M482.3 192c34.2 0 93.7 29 93.7 64c0 36-59.5 64-93.7 64l-116.6 0L265.2 495.9c-5.7 10-16.3 16.1-27.8 16.1l-56.2 0c-10.6 0-18.3-10.2-15.4-20.4l49-171.6L112 320 68.8 377.6c-3 4-7.8 6.4-12.8 6.4l-42 0c-7.8 0-14-6.3-14-14c0-1.3 .2-2.6 .5-3.9L32 256 .5 145.9c-.4-1.3-.5-2.6-.5-3.9c0-7.8 6.3-14 14-14l42 0c5 0 9.8 2.4 12.8 6.4L112 192l102.9 0-49-171.6C162.9 10.2 170.6 0 181.2 0l56.2 0c11.5 0 22.1 6.2 27.8 16.1L365.7 192l116.6 0z\\\"/&gt;\"}}},{\"matchers\":[\"drive\",\"driving\"],\"theme\":{\"color\":\"var(--bs-orange)\",\"dashArray\":\"4 8\",\"svgIcon\":{\"viewBox\":\"0 0 640 512\",\"items\":\"&lt;path d=\\\"M171.3 96H224v96H111.3l30.4-75.9C146.5 104 158.2 96 171.3 96zM272 192V96h81.2c9.7 0 18.9 4.4 25 12l67.2 84H272zm256.2 1L428.2 68c-18.2-22.8-45.8-36-75-36H171.3c-39.3 0-74.6 23.9-89.1 60.3L40.6 196.4C16.8 205.8 0 228.9 0 256V368c0 17.7 14.3 32 32 32H65.3c7.6 45.4 47.1 80 94.7 80s87.1-34.6 94.7-80H385.3c7.6 45.4 47.1 80 94.7 80s87.1-34.6 94.7-80H608c17.7 0 32-14.3 32-32V320c0-65.2-48.8-119-111.8-127zM434.7 368a48 48 0 1 1 90.5 32 48 48 0 1 1 -90.5-32zM160 336a48 48 0 1 1 0 96 48 48 0 1 1 0-96z\\\"/&gt;\"}}},{\"matchers\":[\"ship\",\"sailing\",\"cruise\"],\"theme\":{\"color\":\"var(--bs-orange)\",\"dashArray\":\"4 8\",\"svgIcon\":{\"viewBox\":\"0 0 576 512\",\"items\":\"&lt;path d=\\\"M256 16c0-7 4.5-13.2 11.2-15.3s13.9 .4 17.9 6.1l224 320c3.4 4.9 3.8 11.3 1.1 16.6s-8.2 8.6-14.2 8.6H272c-8.8 0-16-7.2-16-16V16zM212.1 96.5c7 1.9 11.9 8.2 11.9 15.5V336c0 8.8-7.2 16-16 16H80c-5.7 0-11-3-13.8-8s-2.9-11-.1-16l128-224c3.6-6.3 11-9.4 18-7.5zM5.7 404.3C2.8 394.1 10.5 384 21.1 384H554.9c10.6 0 18.3 10.1 15.4 20.3l-4 14.3C550.7 473.9 500.4 512 443 512H133C75.6 512 25.3 473.9 9.7 418.7l-4-14.3z\\\"/&gt;\"}}}]},{\"name\":\"Sport\",\"matchers\":[{\"matchers\":[\"(\\b|_|-)run\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 417 512\",\"items\":\"&lt;path d=\\\"M320 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM125.7 175.5c9.9-9.9 23.4-15.5 37.5-15.5c1.9 0 3.8 .1 5.6 .3L137.6 254c-9.3 28 1.7 58.8 26.8 74.5l86.2 53.9-25.4 88.8c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l28.7-100.4c5.9-20.6-2.6-42.6-20.7-53.9L238 299l30.9-82.4 5.1 12.3C289 264.7 323.9 288 362.7 288H384c17.7 0 32-14.3 32-32s-14.3-32-32-32H362.7c-12.9 0-24.6-7.8-29.5-19.7l-6.3-15c-14.6-35.1-44.1-61.9-80.5-73.1l-48.7-15c-11.1-3.4-22.7-5.2-34.4-5.2c-31 0-60.8 12.3-82.7 34.3L57.4 153.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l23.1-23.1zM91.2 352H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h69.6c19 0 36.2-11.2 43.9-28.5L157 361.6l-9.5-6c-17.5-10.9-30.5-26.8-37.9-44.9L91.2 352z\\\"/&gt;\"}}},{\"matchers\":[\"(\\b|_|-)walk\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 320 512\",\"items\":\"&lt;path d=\\\"M160 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM126.5 199.3c-1 .4-1.9 .8-2.9 1.2l-8 3.5c-16.4 7.3-29 21.2-34.7 38.2l-2.6 7.8c-5.6 16.8-23.7 25.8-40.5 20.2s-25.8-23.7-20.2-40.5l2.6-7.8c11.4-34.1 36.6-61.9 69.4-76.5l8-3.5c20.8-9.2 43.3-14 66.1-14c44.6 0 84.8 26.8 101.9 67.9L281 232.7l21.4 10.7c15.8 7.9 22.2 27.1 14.3 42.9s-27.1 22.2-42.9 14.3L247 287.3c-10.3-5.2-18.4-13.8-22.8-24.5l-9.6-23-19.3 65.5 49.5 54c5.4 5.9 9.2 13 11.2 20.8l23 92.1c4.3 17.1-6.1 34.5-23.3 38.8s-34.5-6.1-38.8-23.3l-22-88.1-70.7-77.1c-14.8-16.1-20.3-38.6-14.7-59.7l16.9-63.5zM68.7 398l25-62.4c2.1 3 4.5 5.8 7 8.6l40.7 44.4-14.5 36.2c-2.4 6-6 11.5-10.6 16.1L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L68.7 398z\\\"/&gt;\"}}},{\"matchers\":[\"(\\b|_|-)hike\",\"(\\b|_|-)hiking\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 384 512\",\"items\":\"&lt;path d=\\\"M192 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm51.3 182.7L224.2 307l49.7 49.7c9 9 14.1 21.2 14.1 33.9V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V397.3l-73.9-73.9c-15.8-15.8-22.2-38.6-16.9-60.3l20.4-84c8.3-34.1 42.7-54.9 76.7-46.4c19 4.8 35.6 16.4 46.4 32.7L305.1 208H336V184c0-13.3 10.7-24 24-24s24 10.7 24 24v55.8c0 .1 0 .2 0 .2s0 .2 0 .2V488c0 13.3-10.7 24-24 24s-24-10.7-24-24V272H296.6c-16 0-31-8-39.9-21.4l-13.3-20zM81.1 471.9L117.3 334c3 4.2 6.4 8.2 10.1 11.9l41.9 41.9L142.9 488.1c-4.5 17.1-22 27.3-39.1 22.8s-27.3-22-22.8-39.1zm55.5-346L101.4 266.5c-3 12.1-14.9 19.9-27.2 17.9l-47.9-8c-14-2.3-22.9-16.3-19.2-30L31.9 155c9.5-34.8 41.1-59 77.2-59h4.2c15.6 0 27.1 14.7 23.3 29.8z\\\"/&gt;\"}}},{\"matchers\":[\"(\\b|_|-)bike\",\"(\\b|_|-)biking\",\"(\\b|_|-)cycling\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 640 512\",\"items\":\"&lt;path d=\\\"M400 96a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm27.2 64l-61.8-48.8c-17.3-13.6-41.7-13.8-59.1-.3l-83.1 64.2c-30.7 23.8-28.5 70.8 4.3 91.6L288 305.1V416c0 17.7 14.3 32 32 32s32-14.3 32-32V288c0-10.7-5.3-20.7-14.2-26.6L295 232.9l60.3-48.5L396 217c5.7 4.5 12.7 7 20 7h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H427.2zM56 384a72 72 0 1 1 144 0A72 72 0 1 1 56 384zm200 0A128 128 0 1 0 0 384a128 128 0 1 0 256 0zm184 0a72 72 0 1 1 144 0 72 72 0 1 1 -144 0zm200 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z\\\"/&gt;\"}}},{\"matchers\":[\"(\\b|_|-)skiing\",\"(\\b|_|-)ski\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 512 512\",\"items\":\"&lt;path d=\\\"M380.7 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM2.7 268.9c6.1-11.8 20.6-16.3 32.4-10.2L232.7 361.3l46.2-69.2-75.1-75.1c-14.6-14.6-20.4-33.9-18.4-52.1l108.8 52 39.3 39.3c16.2 16.2 18.7 41.5 6 60.6L289.8 391l128.7 66.8c13.6 7.1 29.8 7.2 43.6 .3l15.2-7.6c11.9-5.9 26.3-1.1 32.2 10.7s1.1 26.3-10.7 32.2l-15.2 7.6c-27.5 13.7-59.9 13.5-87.2-.7L12.9 301.3C1.2 295.2-3.4 280.7 2.7 268.9zM118.9 65.6L137 74.2l8.7-17.4c4-7.9 13.6-11.1 21.5-7.2s11.1 13.6 7.2 21.5l-8.5 16.9 54.7 26.2c1.5-.7 3.1-1.4 4.7-2.1l83.4-33.4c34.2-13.7 72.8 4.2 84.5 39.2l17.1 51.2 52.1 26.1c15.8 7.9 22.2 27.1 14.3 42.9s-27.1 22.2-42.9 14.3l-58.1-29c-11.4-5.7-20-15.7-24.1-27.8l-5.8-17.3-27.3 12.1-6.8 3-6.7-3.2L151.5 116.7l-9.2 18.4c-4 7.9-13.6 11.1-21.5 7.2s-11.1-13.6-7.2-21.5l9-18-17.6-8.4c-8-3.8-11.3-13.4-7.5-21.3s13.4-11.3 21.3-7.5z\\\"/&gt;\"}}}]},{\"name\":\"Other paths\",\"matchers\":[{\"matchers\":[],\"theme\":{\"color\":\"var(--bs-secondary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"\",\"items\":\"\"}}}]}])\n  --Map-bendLongPathsTrigger                                                Map will bend the path if two points are this far apart on latitude axes. This intended to bend flight if only the end and the start points are given. (default: 0.5)\n  --Faces-enabled                                                            (default: true)\n  --Faces-sorting-method                                                     (default: 'PersonCount')\n  --Faces-sorting-ascending                                                  (default: true)\n  --Faces-keywordsToPersons                                                 If a photo has the same face (person) name and keyword, the app removes the duplicate, keeping the face only. (default: true)\n  --Faces-writeAccessMinRole                                                Required minimum right to star (favourite) a face. (default: 'Admin')\n  --Faces-readAccessMinRole                                                 Required minimum right to show the faces tab. (default: 'User')\n  --RandomPhoto-enabled                                                     Enables random link generation. (default: true)\n  --Extensions-enabled                                                       (default: true)\n  --Extensions-repositoryUrl                                                Repository url that points to a list of extensions in .md format. (default: 'https://raw.githubusercontent.com/bpatrik/pigallery2/master/extension/REPOSITORY.md')\n  --Extensions-folder                                                       Folder where the app stores all extensions. Individual extensions live in their own sub-folders. (default: 'extensions')\n  --Extensions-cleanUpUnusedTables                                          Automatically removes all tables from the DB that are not used anymore. (default: true)\n  --Upload-enabled                                                           (default: false)\n  --Upload-minimumRole                                                      Minimum user role to enable file upload. (default: 'Admin')\n  --Upload-enforcedDirectoryConfig                                          Only enable upload in folder where an \".uploader.pg2conf\" is present in the folder. (default: false)\n  --Database-type                                                           SQLite is recommended. (default: 'sqlite')\n  --Database-dbFolder                                                       All file-based data will be stored here (sqlite database, job history data). (default: 'db')\n  --Database-sqlite-DBFileName                                              Sqlite will save the db with this filename. (default: 'sqlite.db')\n  --Database-mysql-host                                                      (default: 'localhost')\n  --Database-mysql-port                                                      (default: 3306)\n  --Database-mysql-database                                                  (default: 'pigallery2')\n  --Database-mysql-username                                                  (default: '')\n  --Database-mysql-password                                                  (default: '')\n  --Indexing-cachedFolderTimeout                                            If there was no indexing in this time, it reindexes. (skipped if indexes are in DB and sensitivity is low). (default: 3600000)\n  --Indexing-reIndexingSensitivity                                          Set the reindexing sensitivity. High value check the folders for change more often.  Setting to never only indexes if never indexed or explicit running the Indexing Job. (default: 'low')\n  --Indexing-excludeFolderList                                              Folders to exclude from indexing. If an entry starts with '/' it is treated as an absolute path. If it doesn't start with '/' but contains a '/', the path is relative to the image directory. If it doesn't contain a '/', any folder with this name will be excluded. (default: [\".Trash-1000\",\".dtrash\",\"$RECYCLE.BIN\"])\n  --Indexing-excludeFileList                                                Files that mark a folder to be excluded from indexing. Any folder that contains a file with this name will be excluded from indexing. (default: [])\n  --AlbumCover-SearchQuery                                                  Filters the sub-folders with this search query. If filter results no photo, the app will search again without the filter. (default: {\"type\":100,\"value\":\"\"})\n  --AlbumCover-Sorting                                                      If multiple cover is available sorts them by these methods and selects the first one. Using random sorting does not allow to use any other sorting method. (default: [{\"method\":30,\"ascending\":false},{\"method\":20,\"ascending\":false},{\"method\":40,\"ascending\":false}])\n  --Duplicates-listingLimit                                                 Maximum number of duplicates to list. (default: 1000)\n  --Messaging-Email-emailFrom                                               Some services do not allow sending from random e-mail addresses. Set this accordingly. (default: 'noreply@pigallery2.com')\n  --Messaging-Email-smtp-host                                               SMTP host server (default: '')\n  --Messaging-Email-smtp-port                                               SMTP server's port (default: 587)\n  --Messaging-Email-smtp-secure                                             Is the connection secure. See https://nodemailer.com/smtp/#tls-options for more details (default: false)\n  --Messaging-Email-smtp-requireTLS                                         if this is true and secure is false then Nodemailer (used library in the background) tries to use STARTTLS. See https://nodemailer.com/smtp/#tls-options for more details (default: true)\n  --Messaging-Email-smtp-user                                               User to connect to the SMTP server. (default: '')\n  --Messaging-Email-smtp-password                                           Password to connect to the SMTP server. (default: '')\n  --Jobs-maxSavedProgress                                                   Job history size. (default: 20)\n  --Jobs-mediaProcessingBatchSize                                           Jobs load this many photos or videos from the DB for processing at once. (default: 1000)\n  --Jobs-scheduled                                                           (default: [{\"name\":\"Indexing\",\"jobName\":\"Indexing\",\"config\":{\"indexChangesOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":1,\"periodicity\":7,\"atTime\":0}},{\"name\":\"Album Cover Filling\",\"jobName\":\"Album Cover Filling\",\"config\":{},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"Indexing\"}},{\"name\":\"Photo Converting\",\"jobName\":\"Photo Converting\",\"config\":{\"sizes\":[320],\"maxVideoSize\":800,\"indexedOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"Album Cover Filling\"}},{\"name\":\"Video Converting\",\"jobName\":\"Video Converting\",\"config\":{\"indexedOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"Photo Converting\"}},{\"name\":\"GPX Compression\",\"jobName\":\"GPX Compression\",\"config\":{\"indexedOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"Video Converting\"}},{\"name\":\"Temp Folder Cleaning\",\"jobName\":\"Temp Folder Cleaning\",\"config\":{\"indexedOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"GPX Compression\"}}])\n\nEnvironmental variables: \n  Server-applicationTitle                                                (default: 'PiGallery 2')\n  Server-publicUrl                                                      If you access the page from local network it's good to know the public url for creating sharing link. (default: '')\n  Server-urlBase                                                        If you access the gallery under a sub url (like: https://mydomain.com/myGallery), set it here. If it is not working you might miss the '/' from the beginning of the url. (default: '')\n  Server-apiPath                                                        PiGallery api path. (default: '/pgapi')\n  Server-customHTMLHead                                                 Injects the content of this between the &lt;head&gt;&lt;/head&gt; HTML tags of the app. (You can use it to add analytics or custom code to the app). (default: '')\n  Server-svgIcon-viewBox                                                SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox (default: '0 0 512 512')\n  Server-svgIcon-items                                                  Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons. (default: '&lt;path d=\"m185.92 0.042372c-3.1045 0.19567-6.2676 1.0899-9.1546 3.163-16.085-8.0588-25.565 1.6894-23.504 14.76-5.3047 4.0078-10.768 7.8463-6.3153 20.688-4.8283 4.5113-5.2702 11.17-1.2227 20.894-4.5731 7.1343-3.0927 13.944 1.4676 20.445-5.0506 10.26 3.7514 20.507 6.2389 23.943-0.99909 6.6761-0.49742 13.458 11.016 21.392-1.2207 10.005 5.7492 14.415 12.419 19.045 12.567 8.1824 17.213 7.2406 27.088 10.328l-0.13366-1.1862c-15.833 3e-3 -31.017 6.2997-42.211 17.506l-24.715 24.736c-11.194 11.206-26.378 17.503-42.211 17.506h-34.984c-32.972 3.6e-4 -59.702 26.751-59.701 59.749v179.24c3.6312e-4 32.997 26.729 59.746 59.701 59.747h358.21c32.972-3.6e-4 59.7-26.75 59.701-59.747v-179.24c-0.0162-23.02-13.245-43.983-34.008-53.889 3.0728-1.7781 5.0617-4.3071 6.7327-7.0379 4.1124-1.032 17.438-3.2179 20.159-14.327 7.7661-2.0112 13.273-6.2767 14.255-14.719 9.3465-4.8456 13.285-10.23 12.484-16.792 11.694-7.0704 9.9759-13.526 8.4511-19.912 9.9742-8.687 8.874-22.288-8.6236-26.461-3.1292-12.25-18.501-15.32-20.733-16.133-1.3931-4.0275-3.7026-7.9496-14.353-10.399-4.4451-8.3291-12.211-9.9464-20.904-9.9225-6.4476-10.379-14.548-6.8393-22.216-7.2124-9.6958-7.4917-13.951-3.6525-20.032-3.5572-11.02-6.8739-16.687-2.7782-24.497 0.86675l-6.6602-2.5355c-21.868 3.9146-38.57 22.031-45.765 31.84 0.78895-12.143-0.36806-36.764-14.606-53.831l-6.7327-2.3414c-3.6422-7.8167-5.3526-14.6-18.209-16.423-4.7287-3.9225-5.388-9.6636-17.627-10.162-3.9701-2.9861-7.0841-7.4205-11.972-9.091-2.5588-0.82206-5.6927-0.97346-9.6817 0.32356-6.6078-5.7069-13.63-9.3648-22.385-5.8437-9.7319-4.9749-14.082-3.5883-17.674-1.2668-1.3952-0.50821-7.2885-3.6439-14.018-4.1239-1.0094-0.071996-2.0376-0.084841-3.0724-0.019609zm1.017 13.578c10.104 0.93027 18.591 7.2129 24.705 11.86 3.989-1.297 1.8817-5.4748-0.67601-9.9264 7.4731 3.9321 13.922 8.2611 19.542 13.058 4.4921-1.7738-6e-3 -6.9333-1.6283-10.934 11.32 6.6532 15.299 11.732 19.277 16.811 4.96-2.1534 2.5609-6.4373 1.1326-10.368 7.9224 6.6257 11.087 12.731 14.482 18.808 2.4625-1.6331 5.6853-2.3301 4.5577-8.9008 5.1605 6.0597 8.5191 12.233 10.344 18.398 4.8979-1.076 4.6167-5.1376 5.7471-8.2459 4.8158 7.9142 7.0028 15.201 10.195 22.743 1.3502-0.38818 3.143-2.596 5.5002-6.3575 10.495 21.313 19.172 68.475-19.542 71.864-19.845-33.079-47.35-62.019-80.099-88.028 39.018 41.712 59.701 71.578 68.828 93.932-5.6123 8.2892-13.186 12.888-21.423 15.182h-31.496c-9.0855-1.8937-17.047-4.8048-21.968-6.9301 3.5034-0.26396 6.761-1.0578 8.553-3.265-2.8932-4.1339-16.942-6.6095-24.423-15.054 3.8384 0.62815 5.771 0.45179 8.3395-1.4727-7.7461-5.9015-16.277-11.759-20.149-18.339 3.0088 1.096 5.5764 2.7998 10.448 1.4943-6.3427-7.0404-13.489-13.382-17.696-22.065 4.1118 1.3877 8.4445 3.0751 10.271 1.9806-5.5926-6.9871-9.844-14.035-12.948-21.216 5.3821 2.7304 8.0206 3.0315 9.7326 2.5551-3.457-7.4192-8.6517-14.592-9.4172-22.461 3.6436 2.9772 7.3478 4.8776 10.904 3.8631-0.36036-4.7513-7.3377-10.044-8.4022-21.322 4.3234 2.0148 8.7693 4.2946 10.093 3.6768 0.9645-8.9987-0.93024-14.97-2.5963-20.967 9.547 3.3675 23.877 8.6978 23.48 7.6733zm202.89 68.954c-1.1657 3.2054-4.0535 6.0044-0.89552 10.015 5.3574-3.5486 11.898-6.1175 19.744-7.4399-5.0841 4.3081-3.1624 6.8795-2.228 9.7499 6.5043-2.4708 12.815-5.0123 23.175-5.0887-3.6187 2.0919-8.2066 3.8292-5.7902 8.6694 6.3098-1.3316 12.62-2.6636 25.565-0.47848-3.8128 2.0212-10.67 3.0443-8.2709 7.3281 7.289-0.095 15.142 0.67658 23.357 2.5689-4.9157 1.7295-9.1161 3.6077-6.8934 7.1673 7.6683 0.37321 18.204 1.0216 26.541 6.8085l-7.9768 3.8043c-0.96209 0.52956 13.473 5.5674 22.914 9.2263-5.2605 3.5839-10.415 6.8757-15.456 14.39 0.61731 1.3249 5.4871 2.4391 10.093 3.6768-8.059 7.9545-16.768 7.4235-20.131 10.928 2.0376 3.1622 6.0354 3.9567 10.836 4.0553-5.7375 5.5002-14.227 7.6885-21.64 11.148 1.0057 1.4663 3.2192 2.9338 9.0958 4.3043-6.9901 3.5039-14.773 6.1675-23.545 7.9223 0.73194 1.9166 5.0978 3.5087 9.1389 5.0907-8.7991 3.945-18.346 4.207-27.726 5.5201 2.9287 4.0367 5.9538 4.4791 8.9626 5.575-7.1926 2.5501-17.455 1.4514-27.215 1.0864 0.46776 2.1663 1.3155 3.4454 2.7961 4.6612h-13.75c-5.1274-1.4192-9.4503-2.9189-11.788-2.2747-0.0214 0.78201 0.12538 1.5366 0.37044 2.2747h-6.1841c-2.2143-0.16717-4.4175-0.45785-6.5995-0.87068-17.23-8.2945-37.615-23.515-35.198-47.897 21.35-11.254 56.342-20.728 113.06-27.679-41.792-1.1427-81.452 3.3317-117.9 15.905-27.674-27.57 9.2662-58.115 30.995-67.691-0.70716 4.3624-0.65582 7.2407 0.12836 8.4067 7.2901-3.7246 13.646-7.8991 22.418-10.864zm-186.04 100.82h69.97c7.9167 2e-3 15.508 3.1505 21.105 8.7538l24.717 24.736c16.798 16.816 39.584 26.262 63.343 26.259h34.984c16.486 1.9e-4 29.85 13.375 29.85 29.873v179.24c-1.9e-4 16.499-13.365 29.873-29.85 29.873h-358.21c-16.486-1.8e-4 -29.85-13.375-29.85-29.873v-179.24c1.88e-4 -16.499 13.365-29.873 29.85-29.873h34.984c23.739-0.0128 46.501-9.4579 63.285-26.259l24.775-24.736c5.582-5.5884 13.149-8.736 21.045-8.7538zm35.016 59.749c-57.625 0.10848-104.28 46.889-104.28 104.56 0 57.669 46.656 104.45 104.28 104.56 57.625-0.10848 104.28-46.889 104.28-104.56 0-57.669-46.656-104.45-104.28-104.56zm-164.18 29.873c-8.2429 9e-5 -14.925 6.6874-14.925 14.937 0.03875 8.2218 6.7096 14.866 14.925 14.866s14.886-6.6446 14.925-14.866c-9.1e-5 -8.2493-6.6823-14.937-14.925-14.937zm164.18 0c41.206 0.0135 74.603 33.447 74.603 74.684 0 41.238-33.397 74.671-74.603 74.684-41.206-0.0135-74.603-33.447-74.603-74.684 0-41.238 33.397-74.671 74.603-74.684z\"/&gt;')\n  Server-reloadClientOnServerUpdate                                     If set the UI will auto reload when client related config changed or the app was restarted (except when the UI shows the settings page). (default: true)\n  Server-sessionSecret                                                   (default: [])\n  Server-sessionTimeout                                                 Users kept logged in for this long time. (default: 604800000)\n  Server-trustProxy                                                     Should the backend trust proxies to extract remote Client IP. See express docs, for valid values: https://expressjs.com/en/guide/behind-proxies.html (default: 'false')\n  Server-port                                                           Port number. Port 80 is usually what you need. (default: 80)\n  PORT                                                                   same as Server-port\n  Server-host                                                           Server will accept connections from this IPv6 or IPv4 address. (default: '0.0.0.0')\n  Server-Log-level                                                      Logging level. (default: 'info')\n  Server-Log-sqlLevel                                                   Logging level for SQL queries. (default: 'error')\n  Server-Log-logServerTiming                                            If enabled, the app adds \"Server-Timing\" http header to the response. (default: false)\n  Users-authenticationRequired                                          Enables user management with login to password protect the gallery. (default: true)\n  Users-unAuthenticatedUserRole                                         Default user right when password protection is disabled. (default: 'Admin')\n  Users-oidc-enabled                                                     (default: false)\n  Users-oidc-displayName                                                Shown on the login button (client-visible). (default: '')\n  Users-oidc-issuerUrl                                                  OIDC provider Issuer URL (default: '')\n  Users-oidc-clientId                                                    (default: '')\n  Users-oidc-clientSecret                                                (default: '')\n  Users-oidc-redirectUri                                                Full callback URL registered at the provider (e.g.: https://example.com/pgapi/auth/oidc/callback) (default: '')\n  Users-oidc-scopes                                                      (default: [\"openid\",\"profile\",\"email\"])\n  Users-oidc-usernameClaim                                              JWT claim to use for matching user name. Defaults to preferred_username; fallbacks to email if empty. (default: 'preferred_username')\n  Users-oidc-emailClaim                                                  (default: 'email')\n  Users-oidc-allowedDomains                                             If set, only identities with emails in these domains will be accepted. (default: [])\n  Users-oidc-autoCreateUser                                             If enabled, unknown users will be created with Guest role on first login. If disabled, only existing app users can log in. (default: false)\n  Users-enforcedUsers                                                   Creates these users in the DB during startup if they do not exist. If a user with this name exist, it won't be overwritten, even if the role is different. (default: [])\n  Users-allowQuery                                                      Setting a non empty search query here will make the app to only SHOW photos and videos that match the query. You can override this at every user separately. (default: {\"type\":100,\"value\":\"\"})\n  Users-blockQuery                                                      Setting a non empty search query here will make the app to HIDE photos and videos that match the query. You can override this at every user separately. (default: {\"type\":100,\"value\":\"\"})\n  Users-suppressDefUserWarn                                             if true, the app won't show a warning for using the default user. (default: false)\n  Gallery-enableCache                                                   Caches directory contents and search results for better performance. (default: true)\n  Gallery-enableOnScrollRendering                                       Those thumbnails get higher priority that are visible on the screen. (default: true)\n  Gallery-enableDirectorySortingByDate                                  If enabled, directories will be sorted by date, like photos, otherwise by name. Directory date is the last modification time of that directory not the creation date of the oldest photo. (default: false)\n  Gallery-ignoreTimestampOffset                                         If enabled, timestamp offsets are ignored, meaning that the local times of pictures are used for searching, sorting and grouping. If disabled, global time is used and pictures with no timestamp are assumed to be in UTC (offset +00:00). (default: true)\n  Gallery-enableOnScrollThumbnailPrioritising                           Those thumbnails will be rendered first that are in view. (default: true)\n  Gallery-NavBar-enableDownloadZip                                      Enable zipped download of the listed directory or search results. (default: true)\n  Gallery-NavBar-enableDirectoryFlattening                              Adds a button to flatten the file structure, by listing the content of all subdirectories. (Won't work if the gallery has multiple folders with the same path.) (default: false)\n  Gallery-NavBar-defaultGidSize                                         Default grid size that is used to render photos and videos. (default: 'medium')\n  Gallery-NavBar-showItemCount                                          Shows the number photos and videos on the navigation bar. (default: true)\n  Gallery-NavBar-links                                                  Visible links in the top menu. (default: [{\"type\":1},{\"type\":3},{\"type\":2}])\n  Gallery-NavBar-NavbarShowDelay                                        Ratio of the page height, you need to scroll to show the navigation bar. (default: 0.3)\n  Gallery-NavBar-NavbarHideDelay                                        Ratio of the page height, you need to scroll to hide the navigation bar. (default: 0.15)\n  Gallery-NavBar-showScrollUpButton                                     Set when the floating scroll-up button should be visible. (default: 'mobileOnly')\n  Gallery-NavBar-SortingGrouping-defaultPhotoSortingMethod-method        (default: 'Date')\n  Gallery-NavBar-SortingGrouping-defaultPhotoSortingMethod-ascending     (default: true)\n  Gallery-NavBar-SortingGrouping-defaultSearchSortingMethod-method       (default: 'Date')\n  Gallery-NavBar-SortingGrouping-defaultSearchSortingMethod-ascending    (default: false)\n  Gallery-NavBar-SortingGrouping-defaultPhotoGroupingMethod-method       (default: 'Date')\n  Gallery-NavBar-SortingGrouping-defaultPhotoGroupingMethod-ascending    (default: true)\n  Gallery-NavBar-SortingGrouping-defaultSearchGroupingMethod-method      (default: 'Date')\n  Gallery-NavBar-SortingGrouping-defaultSearchGroupingMethod-ascending   (default: false)\n  Gallery-captionFirstNaming                                            Show the caption (IPTC 120) tags from the EXIF data instead of the filenames. (default: false)\n  Gallery-Lightbox-slideshowSpeed                                       Default time interval for displaying a photo in the slide show. (default: 5)\n  Gallery-Lightbox-captionAlwaysOn                                      If enabled, lightbox will always show caption by default, not only on hover. (default: false)\n  Gallery-Lightbox-facesAlwaysOn                                        If enabled, lightbox will always show faces by default, not only on hover. (default: false)\n  Gallery-Lightbox-loopVideos                                           If enabled, lightbox will loop videos by default. (default: false)\n  Gallery-Lightbox-loopSlideshow                                        If enabled, lightbox will start from the first photo when it reached the last one. (default: false)\n  Gallery-Lightbox-loadFullImageOnZoom                                  Enables loading the full resolution image on zoom in the lightbox (preview). (default: true)\n  Gallery-Lightbox-loadFullImageIfPreviewTooSmall                       When enabled, the lightbox will load the full resolution image if all available preview thumbnails are too small for the current view. (default: true)\n  Gallery-Lightbox-Titles-topLeftTitle                                   (default: [6])\n  Gallery-Lightbox-Titles-topLeftSubtitle                                (default: [5])\n  Gallery-Lightbox-Titles-bottomLeftTitle                                (default: [10,9])\n  Gallery-Lightbox-Titles-bottomLeftSubtitle                             (default: [8])\n  Gallery-Themes-enabled                                                Enable themes and color modes. (default: true)\n  Gallery-Themes-defaultMode                                            Sets the default theme mode that is used for the application. (default: 'auto')\n  Gallery-Themes-selectedTheme                                          Selected theme to use on the site. (default: 'classic')\n  Gallery-Themes-availableThemes                                        Adds these CSS settings as it is to the end of the body tag of the page. (default: [{\"name\":\"classic\",\"theme\":\":root nav.navbar {\\n--bs-navbar-color: rgba(255, 255, 255, 0.55);\\n--bs-navbar-hover-color: rgba(255, 255, 255, 0.75);\\n--bs-navbar-disabled-color: rgba(255, 255, 255, 0.25);\\n--bs-navbar-active-color: #fff;\\n--bs-navbar-brand-color: #fff;\\n--bs-navbar-brand-hover-color: #fff;\\n--bs-bg-opacity: 1;\\nbackground-color: rgba(var(--bs-dark-rgb), var(--bs-bg-opacity)) !important;\\n}\"}])\n  Gallery-InlineBlogStartsOpen                                          Makes inline blog (*.md files content) auto-open. (default: false)\n  Gallery-TopBlogStartsOpen                                             Makes top blog (*.md files content) auto-open. (default: false)\n  Gallery-AutoUpdate-enable                                             Enable auto polling for new photos and videos in the gallery. (default: false)\n  Gallery-AutoUpdate-interval                                           Frequency of the auto polling in seconds. (default: 60)\n  Media-Video-enabled                                                    (default: true)\n  Media-Video-supportedFormatsWithTranscoding                           Video formats that are supported after transcoding (with the built-in ffmpeg support). (default: [\"avi\",\"mkv\",\"mov\",\"wmv\",\"flv\",\"mts\",\"m2ts\",\"mpg\",\"3gp\",\"m4v\",\"mpeg\",\"vob\",\"divx\",\"xvid\",\"ts\"])\n  Media-Video-supportedFormats                                          Video formats that are supported also without transcoding. Browser supported formats: https://www.w3schools.com/html/html5_video.asp (default: [\"mp4\",\"webm\",\"ogv\",\"ogg\"])\n  Media-Video-transcoding-bitRate                                       Target bit rate of the output video will be scaled down to this. This should be less than the upload rate of your home server. (default: 5242880)\n  Media-Video-transcoding-resolution                                    The height of the output video will be scaled down to this, while keeping the aspect ratio. (default: 720)\n  Media-Video-transcoding-fps                                           Target frame per second (fps) of the output video will be scaled down to this. (default: 25)\n  Media-Video-transcoding-format                                         (default: 'mp4')\n  Media-Video-transcoding-mp4Codec                                       (default: 'libx264')\n  Media-Video-transcoding-webmCodec                                      (default: 'libvpx')\n  Media-Video-transcoding-crf                                           The range of the Constant Rate Factor (CRF) scale is 0\u201351, where 0 is lossless, 23 is the default, and 51 is worst quality possible. (default: 23)\n  Media-Video-transcoding-preset                                        A preset is a collection of options that will provide a certain encoding speed to compression ratio. A slower preset will provide better compression (compression is quality per filesize). (default: 'medium')\n  Media-Video-transcoding-customOutputOptions                           It will be sent to ffmpeg as it is, as custom output options. (default: [])\n  Media-Video-transcoding-customInputOptions                            It will be sent to ffmpeg as it is, as custom input options. (default: [])\n  Media-Photo-iconSize                                                  Icon size (used on maps). (default: 45)\n  Media-Photo-personThumbnailSize                                       Person (face) thumbnail size. (default: 200)\n  Media-Photo-thumbnailSizes                                            Size of the thumbnails and photo previews. The best matching size will be used (smaller for photo and video thumbnail, bigger for photo preview). More sizes give better quality, but use more storage and CPU to render. If size is 240, that shorter side of the thumbnail will be 240 pixels. (default: [320,540,1080,2160])\n  Media-Photo-concurrentThumbnailGenerationsLimit                       By default the app uses the number of cpus -1 concurrent threads to generate thumbnails. Set this number higher than 0 to limit the number of concurrent threads. (default: 0)\n  Media-Photo-supportedFormats                                          Photo formats that are supported. Browser needs to support these formats natively. Also sharp (libvips) package should be able to convert these formats. (default: [\"gif\",\"jpeg\",\"jpg\",\"jpe\",\"png\",\"webp\",\"svg\",\"avif\",\"heic\",\"dng\",\"arw\",\"tiff\"])\n  Media-Photo-useLanczos3                                               if true, 'lanczos3' will used to scale photos, otherwise faster but lower quality 'nearest'. (default: true)\n  Media-Photo-quality                                                   Between 0-100. (default: 80)\n  Media-Photo-smartSubsample                                            Use high quality chroma subsampling in webp. See: https://sharp.pixelplumbing.com/api-output#webp. (default: true)\n  Media-Photo-sharpOptions                                              Add any sharp options here. They will be added to sharp constructor as raw params. See: https://sharp.pixelplumbing.com/api-constructor/. (default: {\"test\":444})\n  Media-Photo-personFaceMargin                                          This ratio of the face bounding box will be added to the face as a margin. Higher number add more margin. (default: 0.7)\n  Media-Photo-animateGif                                                Converts Gif to animated webp. (default: true)\n  Media-folder                                                          Images are loaded from this folder (read permission required) (default: 'demo/images')\n  Media-tempFolder                                                      Thumbnails, converted photos, videos will be stored here (write permission required) (default: 'demo/tmp')\n  MetaFile-gpx                                                          Reads *.gpx files and renders them on the map. (default: true)\n  MetaFile-GPXCompressing-enabled                                       Enables lossy (based on delta time and distance. Too frequent points are removed) GPX compression. (default: true)\n  MetaFile-GPXCompressing-onTheFly                                      Enables on the fly *.gpx compression. (default: true)\n  MetaFile-GPXCompressing-minDistance                                   Filters out entry that are closer than this to each other in meters. (default: 5)\n  MetaFile-GPXCompressing-maxMiddleDeviance                             Filters out entry that would fall on the line if we would just connect the previous and the next points. This setting sets the sensitivity for that (higher number, more points are filtered). (default: 5)\n  MetaFile-GPXCompressing-minTimeDistance                               Filters out entry that are closer than this in time in milliseconds. (default: 5000)\n  MetaFile-markdown                                                     Reads *.md files in a directory and shows the next to the map. (default: true)\n  MetaFile-pg2conf                                                      Reads *.pg2conf files (You can use it for custom sorting and saved search (albums)). (default: true)\n  MetaFile-supportedFormats                                             The app will read and process these files. (default: [\"gpx\",\"pg2conf\",\"md\"])\n  Album-enabled                                                          (default: true)\n  Album-readAccessMinRole                                               Required minimum right to show the albums tab. (default: 'User')\n  Search-enabled                                                        Enables searching. (default: true)\n  Search-searchCacheTimeout                                             Search cache timeout. (default: 3600000)\n  Search-AutoComplete-enabled                                           Show hints while typing search query. (default: true)\n  Search-AutoComplete-ItemsPerCategory-maxItems                         Maximum number autocomplete items shown at once. If there is not enough items to reach this value, it takes up to double of the individual items. (default: 20)\n  Search-AutoComplete-ItemsPerCategory-fileName                         Maximum number autocomplete items shown per photo category. (default: 2)\n  Search-AutoComplete-ItemsPerCategory-directory                        Maximum number autocomplete items shown per directory category. (default: 2)\n  Search-AutoComplete-ItemsPerCategory-caption                          Maximum number autocomplete items shown per caption category. (default: 3)\n  Search-AutoComplete-ItemsPerCategory-position                         Maximum number autocomplete items shown per position category. (default: 3)\n  Search-AutoComplete-ItemsPerCategory-person                           Maximum number autocomplete items shown per faces category. (default: 5)\n  Search-AutoComplete-ItemsPerCategory-keyword                          Maximum number autocomplete items shown per keyword category. (default: 5)\n  Search-AutoComplete-cacheTimeout                                      Autocomplete cache timeout.  (default: 3600000)\n  Search-maxMediaResult                                                 Maximum number of photos and videos that are listed in one search result. (default: 10000)\n  Search-maxDirectoryResult                                             Maximum number of directories that are listed in one search result. (default: 200)\n  Search-listDirectories                                                Search returns also with directories, not just media. (default: false)\n  Search-listMetafiles                                                  Search also returns with metafiles from directories that contain a media file of the matched search result. (default: true)\n  Sharing-enabled                                                       Enables sharing. (default: true)\n  Sharing-passwordRequired                                              Requires password protected sharing links. (default: false)\n  Sharing-sharingKeyLength                                              The longer the keys are, the harder they are to guess. Changing this number won't invalidate existing sharing. (default: 8)\n  Sharing-updateTimeout                                                 After creating a sharing link, it can be updated for this long. (default: 300000)\n  Map-enabled                                                            (default: true)\n  Map-useImageMarkers                                                   Map will use thumbnail images as markers instead of the default pin. (default: true)\n  Map-mapProvider                                                        (default: 'OpenStreetMap')\n  Map-mapboxAccessToken                                                 MapBox needs an access token to work, create one at https://www.mapbox.com. (default: '')\n  Map-customLayers                                                      The map module will use these urls to fetch the map tiles. (default: [{\"name\":\"street\",\"url\":\"\",\"darkLayer\":false}])\n  Map-maxPreviewMarkers                                                 Maximum number of markers to be shown on the map preview on the gallery page. (default: 50)\n  Map-MapPathGroupConfig                                                Markers are grouped and themed by these settings (default: [{\"name\":\"Transportation\",\"matchers\":[{\"matchers\":[\"flight\",\"flying\"],\"theme\":{\"color\":\"var(--bs-orange)\",\"dashArray\":\"4 8\",\"svgIcon\":{\"viewBox\":\"0 0 567 512\",\"items\":\"&lt;path d=\\\"M482.3 192c34.2 0 93.7 29 93.7 64c0 36-59.5 64-93.7 64l-116.6 0L265.2 495.9c-5.7 10-16.3 16.1-27.8 16.1l-56.2 0c-10.6 0-18.3-10.2-15.4-20.4l49-171.6L112 320 68.8 377.6c-3 4-7.8 6.4-12.8 6.4l-42 0c-7.8 0-14-6.3-14-14c0-1.3 .2-2.6 .5-3.9L32 256 .5 145.9c-.4-1.3-.5-2.6-.5-3.9c0-7.8 6.3-14 14-14l42 0c5 0 9.8 2.4 12.8 6.4L112 192l102.9 0-49-171.6C162.9 10.2 170.6 0 181.2 0l56.2 0c11.5 0 22.1 6.2 27.8 16.1L365.7 192l116.6 0z\\\"/&gt;\"}}},{\"matchers\":[\"drive\",\"driving\"],\"theme\":{\"color\":\"var(--bs-orange)\",\"dashArray\":\"4 8\",\"svgIcon\":{\"viewBox\":\"0 0 640 512\",\"items\":\"&lt;path d=\\\"M171.3 96H224v96H111.3l30.4-75.9C146.5 104 158.2 96 171.3 96zM272 192V96h81.2c9.7 0 18.9 4.4 25 12l67.2 84H272zm256.2 1L428.2 68c-18.2-22.8-45.8-36-75-36H171.3c-39.3 0-74.6 23.9-89.1 60.3L40.6 196.4C16.8 205.8 0 228.9 0 256V368c0 17.7 14.3 32 32 32H65.3c7.6 45.4 47.1 80 94.7 80s87.1-34.6 94.7-80H385.3c7.6 45.4 47.1 80 94.7 80s87.1-34.6 94.7-80H608c17.7 0 32-14.3 32-32V320c0-65.2-48.8-119-111.8-127zM434.7 368a48 48 0 1 1 90.5 32 48 48 0 1 1 -90.5-32zM160 336a48 48 0 1 1 0 96 48 48 0 1 1 0-96z\\\"/&gt;\"}}},{\"matchers\":[\"ship\",\"sailing\",\"cruise\"],\"theme\":{\"color\":\"var(--bs-orange)\",\"dashArray\":\"4 8\",\"svgIcon\":{\"viewBox\":\"0 0 576 512\",\"items\":\"&lt;path d=\\\"M256 16c0-7 4.5-13.2 11.2-15.3s13.9 .4 17.9 6.1l224 320c3.4 4.9 3.8 11.3 1.1 16.6s-8.2 8.6-14.2 8.6H272c-8.8 0-16-7.2-16-16V16zM212.1 96.5c7 1.9 11.9 8.2 11.9 15.5V336c0 8.8-7.2 16-16 16H80c-5.7 0-11-3-13.8-8s-2.9-11-.1-16l128-224c3.6-6.3 11-9.4 18-7.5zM5.7 404.3C2.8 394.1 10.5 384 21.1 384H554.9c10.6 0 18.3 10.1 15.4 20.3l-4 14.3C550.7 473.9 500.4 512 443 512H133C75.6 512 25.3 473.9 9.7 418.7l-4-14.3z\\\"/&gt;\"}}}]},{\"name\":\"Sport\",\"matchers\":[{\"matchers\":[\"(\\b|_|-)run\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 417 512\",\"items\":\"&lt;path d=\\\"M320 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM125.7 175.5c9.9-9.9 23.4-15.5 37.5-15.5c1.9 0 3.8 .1 5.6 .3L137.6 254c-9.3 28 1.7 58.8 26.8 74.5l86.2 53.9-25.4 88.8c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l28.7-100.4c5.9-20.6-2.6-42.6-20.7-53.9L238 299l30.9-82.4 5.1 12.3C289 264.7 323.9 288 362.7 288H384c17.7 0 32-14.3 32-32s-14.3-32-32-32H362.7c-12.9 0-24.6-7.8-29.5-19.7l-6.3-15c-14.6-35.1-44.1-61.9-80.5-73.1l-48.7-15c-11.1-3.4-22.7-5.2-34.4-5.2c-31 0-60.8 12.3-82.7 34.3L57.4 153.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l23.1-23.1zM91.2 352H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h69.6c19 0 36.2-11.2 43.9-28.5L157 361.6l-9.5-6c-17.5-10.9-30.5-26.8-37.9-44.9L91.2 352z\\\"/&gt;\"}}},{\"matchers\":[\"(\\b|_|-)walk\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 320 512\",\"items\":\"&lt;path d=\\\"M160 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM126.5 199.3c-1 .4-1.9 .8-2.9 1.2l-8 3.5c-16.4 7.3-29 21.2-34.7 38.2l-2.6 7.8c-5.6 16.8-23.7 25.8-40.5 20.2s-25.8-23.7-20.2-40.5l2.6-7.8c11.4-34.1 36.6-61.9 69.4-76.5l8-3.5c20.8-9.2 43.3-14 66.1-14c44.6 0 84.8 26.8 101.9 67.9L281 232.7l21.4 10.7c15.8 7.9 22.2 27.1 14.3 42.9s-27.1 22.2-42.9 14.3L247 287.3c-10.3-5.2-18.4-13.8-22.8-24.5l-9.6-23-19.3 65.5 49.5 54c5.4 5.9 9.2 13 11.2 20.8l23 92.1c4.3 17.1-6.1 34.5-23.3 38.8s-34.5-6.1-38.8-23.3l-22-88.1-70.7-77.1c-14.8-16.1-20.3-38.6-14.7-59.7l16.9-63.5zM68.7 398l25-62.4c2.1 3 4.5 5.8 7 8.6l40.7 44.4-14.5 36.2c-2.4 6-6 11.5-10.6 16.1L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L68.7 398z\\\"/&gt;\"}}},{\"matchers\":[\"(\\b|_|-)hike\",\"(\\b|_|-)hiking\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 384 512\",\"items\":\"&lt;path d=\\\"M192 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm51.3 182.7L224.2 307l49.7 49.7c9 9 14.1 21.2 14.1 33.9V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V397.3l-73.9-73.9c-15.8-15.8-22.2-38.6-16.9-60.3l20.4-84c8.3-34.1 42.7-54.9 76.7-46.4c19 4.8 35.6 16.4 46.4 32.7L305.1 208H336V184c0-13.3 10.7-24 24-24s24 10.7 24 24v55.8c0 .1 0 .2 0 .2s0 .2 0 .2V488c0 13.3-10.7 24-24 24s-24-10.7-24-24V272H296.6c-16 0-31-8-39.9-21.4l-13.3-20zM81.1 471.9L117.3 334c3 4.2 6.4 8.2 10.1 11.9l41.9 41.9L142.9 488.1c-4.5 17.1-22 27.3-39.1 22.8s-27.3-22-22.8-39.1zm55.5-346L101.4 266.5c-3 12.1-14.9 19.9-27.2 17.9l-47.9-8c-14-2.3-22.9-16.3-19.2-30L31.9 155c9.5-34.8 41.1-59 77.2-59h4.2c15.6 0 27.1 14.7 23.3 29.8z\\\"/&gt;\"}}},{\"matchers\":[\"(\\b|_|-)bike\",\"(\\b|_|-)biking\",\"(\\b|_|-)cycling\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 640 512\",\"items\":\"&lt;path d=\\\"M400 96a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm27.2 64l-61.8-48.8c-17.3-13.6-41.7-13.8-59.1-.3l-83.1 64.2c-30.7 23.8-28.5 70.8 4.3 91.6L288 305.1V416c0 17.7 14.3 32 32 32s32-14.3 32-32V288c0-10.7-5.3-20.7-14.2-26.6L295 232.9l60.3-48.5L396 217c5.7 4.5 12.7 7 20 7h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H427.2zM56 384a72 72 0 1 1 144 0A72 72 0 1 1 56 384zm200 0A128 128 0 1 0 0 384a128 128 0 1 0 256 0zm184 0a72 72 0 1 1 144 0 72 72 0 1 1 -144 0zm200 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z\\\"/&gt;\"}}},{\"matchers\":[\"(\\b|_|-)skiing\",\"(\\b|_|-)ski\"],\"theme\":{\"color\":\"var(--bs-primary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"0 0 512 512\",\"items\":\"&lt;path d=\\\"M380.7 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM2.7 268.9c6.1-11.8 20.6-16.3 32.4-10.2L232.7 361.3l46.2-69.2-75.1-75.1c-14.6-14.6-20.4-33.9-18.4-52.1l108.8 52 39.3 39.3c16.2 16.2 18.7 41.5 6 60.6L289.8 391l128.7 66.8c13.6 7.1 29.8 7.2 43.6 .3l15.2-7.6c11.9-5.9 26.3-1.1 32.2 10.7s1.1 26.3-10.7 32.2l-15.2 7.6c-27.5 13.7-59.9 13.5-87.2-.7L12.9 301.3C1.2 295.2-3.4 280.7 2.7 268.9zM118.9 65.6L137 74.2l8.7-17.4c4-7.9 13.6-11.1 21.5-7.2s11.1 13.6 7.2 21.5l-8.5 16.9 54.7 26.2c1.5-.7 3.1-1.4 4.7-2.1l83.4-33.4c34.2-13.7 72.8 4.2 84.5 39.2l17.1 51.2 52.1 26.1c15.8 7.9 22.2 27.1 14.3 42.9s-27.1 22.2-42.9 14.3l-58.1-29c-11.4-5.7-20-15.7-24.1-27.8l-5.8-17.3-27.3 12.1-6.8 3-6.7-3.2L151.5 116.7l-9.2 18.4c-4 7.9-13.6 11.1-21.5 7.2s-11.1-13.6-7.2-21.5l9-18-17.6-8.4c-8-3.8-11.3-13.4-7.5-21.3s13.4-11.3 21.3-7.5z\\\"/&gt;\"}}}]},{\"name\":\"Other paths\",\"matchers\":[{\"matchers\":[],\"theme\":{\"color\":\"var(--bs-secondary)\",\"dashArray\":\"\",\"svgIcon\":{\"viewBox\":\"\",\"items\":\"\"}}}]}])\n  Map-bendLongPathsTrigger                                              Map will bend the path if two points are this far apart on latitude axes. This intended to bend flight if only the end and the start points are given. (default: 0.5)\n  Faces-enabled                                                          (default: true)\n  Faces-sorting-method                                                   (default: 'PersonCount')\n  Faces-sorting-ascending                                                (default: true)\n  Faces-keywordsToPersons                                               If a photo has the same face (person) name and keyword, the app removes the duplicate, keeping the face only. (default: true)\n  Faces-writeAccessMinRole                                              Required minimum right to star (favourite) a face. (default: 'Admin')\n  Faces-readAccessMinRole                                               Required minimum right to show the faces tab. (default: 'User')\n  RandomPhoto-enabled                                                   Enables random link generation. (default: true)\n  Extensions-enabled                                                     (default: true)\n  Extensions-repositoryUrl                                              Repository url that points to a list of extensions in .md format. (default: 'https://raw.githubusercontent.com/bpatrik/pigallery2/master/extension/REPOSITORY.md')\n  Extensions-folder                                                     Folder where the app stores all extensions. Individual extensions live in their own sub-folders. (default: 'extensions')\n  Extensions-cleanUpUnusedTables                                        Automatically removes all tables from the DB that are not used anymore. (default: true)\n  Upload-enabled                                                         (default: false)\n  Upload-minimumRole                                                    Minimum user role to enable file upload. (default: 'Admin')\n  Upload-enforcedDirectoryConfig                                        Only enable upload in folder where an \".uploader.pg2conf\" is present in the folder. (default: false)\n  Database-type                                                         SQLite is recommended. (default: 'sqlite')\n  Database-dbFolder                                                     All file-based data will be stored here (sqlite database, job history data). (default: 'db')\n  Database-sqlite-DBFileName                                            Sqlite will save the db with this filename. (default: 'sqlite.db')\n  Database-mysql-host                                                    (default: 'localhost')\n  MYSQL_HOST                                                             same as Database-mysql-host\n  Database-mysql-port                                                    (default: 3306)\n  MYSQL_PORT                                                             same as Database-mysql-port\n  Database-mysql-database                                                (default: 'pigallery2')\n  MYSQL_DATABASE                                                         same as Database-mysql-database\n  Database-mysql-username                                                (default: '')\n  MYSQL_USERNAME                                                         same as Database-mysql-username\n  Database-mysql-password                                                (default: '')\n  MYSQL_PASSWORD                                                         same as Database-mysql-password\n  Indexing-cachedFolderTimeout                                          If there was no indexing in this time, it reindexes. (skipped if indexes are in DB and sensitivity is low). (default: 3600000)\n  Indexing-reIndexingSensitivity                                        Set the reindexing sensitivity. High value check the folders for change more often.  Setting to never only indexes if never indexed or explicit running the Indexing Job. (default: 'low')\n  Indexing-excludeFolderList                                            Folders to exclude from indexing. If an entry starts with '/' it is treated as an absolute path. If it doesn't start with '/' but contains a '/', the path is relative to the image directory. If it doesn't contain a '/', any folder with this name will be excluded. (default: [\".Trash-1000\",\".dtrash\",\"$RECYCLE.BIN\"])\n  Indexing-excludeFileList                                              Files that mark a folder to be excluded from indexing. Any folder that contains a file with this name will be excluded from indexing. (default: [])\n  AlbumCover-SearchQuery                                                Filters the sub-folders with this search query. If filter results no photo, the app will search again without the filter. (default: {\"type\":100,\"value\":\"\"})\n  AlbumCover-Sorting                                                    If multiple cover is available sorts them by these methods and selects the first one. Using random sorting does not allow to use any other sorting method. (default: [{\"method\":30,\"ascending\":false},{\"method\":20,\"ascending\":false},{\"method\":40,\"ascending\":false}])\n  Duplicates-listingLimit                                               Maximum number of duplicates to list. (default: 1000)\n  Messaging-Email-emailFrom                                             Some services do not allow sending from random e-mail addresses. Set this accordingly. (default: 'noreply@pigallery2.com')\n  Messaging-Email-smtp-host                                             SMTP host server (default: '')\n  Messaging-Email-smtp-port                                             SMTP server's port (default: 587)\n  Messaging-Email-smtp-secure                                           Is the connection secure. See https://nodemailer.com/smtp/#tls-options for more details (default: false)\n  Messaging-Email-smtp-requireTLS                                       if this is true and secure is false then Nodemailer (used library in the background) tries to use STARTTLS. See https://nodemailer.com/smtp/#tls-options for more details (default: true)\n  Messaging-Email-smtp-user                                             User to connect to the SMTP server. (default: '')\n  Messaging-Email-smtp-password                                         Password to connect to the SMTP server. (default: '')\n  Jobs-maxSavedProgress                                                 Job history size. (default: 20)\n  Jobs-mediaProcessingBatchSize                                         Jobs load this many photos or videos from the DB for processing at once. (default: 1000)\n  Jobs-scheduled                                                         (default: [{\"name\":\"Indexing\",\"jobName\":\"Indexing\",\"config\":{\"indexChangesOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":1,\"periodicity\":7,\"atTime\":0}},{\"name\":\"Album Cover Filling\",\"jobName\":\"Album Cover Filling\",\"config\":{},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"Indexing\"}},{\"name\":\"Photo Converting\",\"jobName\":\"Photo Converting\",\"config\":{\"sizes\":[320],\"maxVideoSize\":800,\"indexedOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"Album Cover Filling\"}},{\"name\":\"Video Converting\",\"jobName\":\"Video Converting\",\"config\":{\"indexedOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"Photo Converting\"}},{\"name\":\"GPX Compression\",\"jobName\":\"GPX Compression\",\"config\":{\"indexedOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"Video Converting\"}},{\"name\":\"Temp Folder Cleaning\",\"jobName\":\"Temp Folder Cleaning\",\"config\":{\"indexedOnly\":true},\"allowParallelRun\":false,\"trigger\":{\"type\":4,\"periodicity\":7,\"atTime\":0,\"afterScheduleName\":\"GPX Compression\"}}])\n</code></pre> <p>### <code>config.json</code> sample:</p> <pre><code>{\n    \"Server\": {\n        \"applicationTitle\": \"PiGallery 2\",\n        \"//[publicUrl]\": \"If you access the page from local network it's good to know the public url for creating sharing link.\",\n        \"publicUrl\": \"\",\n        \"//[urlBase]\": \"If you access the gallery under a sub url (like: https://mydomain.com/myGallery), set it here. If it is not working you might miss the '/' from the beginning of the url.\",\n        \"urlBase\": \"\",\n        \"//[apiPath]\": \"PiGallery api path.\",\n        \"apiPath\": \"/pgapi\",\n        \"//[customHTMLHead]\": \"Injects the content of this between the &lt;head&gt;&lt;/head&gt; HTML tags of the app. (You can use it to add analytics or custom code to the app).\",\n        \"customHTMLHead\": \"\",\n        \"//[svgIcon]\": \"Sets the icon of the app. Rendered icons are cached in the tmp folder.\",\n        \"svgIcon\": {\n            \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n            \"viewBox\": \"0 0 512 512\",\n            \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n            \"items\": \"&lt;path d=\\\"m185.92 0.042372c-3.1045 0.19567-6.2676 1.0899-9.1546 3.163-16.085-8.0588-25.565 1.6894-23.504 14.76-5.3047 4.0078-10.768 7.8463-6.3153 20.688-4.8283 4.5113-5.2702 11.17-1.2227 20.894-4.5731 7.1343-3.0927 13.944 1.4676 20.445-5.0506 10.26 3.7514 20.507 6.2389 23.943-0.99909 6.6761-0.49742 13.458 11.016 21.392-1.2207 10.005 5.7492 14.415 12.419 19.045 12.567 8.1824 17.213 7.2406 27.088 10.328l-0.13366-1.1862c-15.833 3e-3 -31.017 6.2997-42.211 17.506l-24.715 24.736c-11.194 11.206-26.378 17.503-42.211 17.506h-34.984c-32.972 3.6e-4 -59.702 26.751-59.701 59.749v179.24c3.6312e-4 32.997 26.729 59.746 59.701 59.747h358.21c32.972-3.6e-4 59.7-26.75 59.701-59.747v-179.24c-0.0162-23.02-13.245-43.983-34.008-53.889 3.0728-1.7781 5.0617-4.3071 6.7327-7.0379 4.1124-1.032 17.438-3.2179 20.159-14.327 7.7661-2.0112 13.273-6.2767 14.255-14.719 9.3465-4.8456 13.285-10.23 12.484-16.792 11.694-7.0704 9.9759-13.526 8.4511-19.912 9.9742-8.687 8.874-22.288-8.6236-26.461-3.1292-12.25-18.501-15.32-20.733-16.133-1.3931-4.0275-3.7026-7.9496-14.353-10.399-4.4451-8.3291-12.211-9.9464-20.904-9.9225-6.4476-10.379-14.548-6.8393-22.216-7.2124-9.6958-7.4917-13.951-3.6525-20.032-3.5572-11.02-6.8739-16.687-2.7782-24.497 0.86675l-6.6602-2.5355c-21.868 3.9146-38.57 22.031-45.765 31.84 0.78895-12.143-0.36806-36.764-14.606-53.831l-6.7327-2.3414c-3.6422-7.8167-5.3526-14.6-18.209-16.423-4.7287-3.9225-5.388-9.6636-17.627-10.162-3.9701-2.9861-7.0841-7.4205-11.972-9.091-2.5588-0.82206-5.6927-0.97346-9.6817 0.32356-6.6078-5.7069-13.63-9.3648-22.385-5.8437-9.7319-4.9749-14.082-3.5883-17.674-1.2668-1.3952-0.50821-7.2885-3.6439-14.018-4.1239-1.0094-0.071996-2.0376-0.084841-3.0724-0.019609zm1.017 13.578c10.104 0.93027 18.591 7.2129 24.705 11.86 3.989-1.297 1.8817-5.4748-0.67601-9.9264 7.4731 3.9321 13.922 8.2611 19.542 13.058 4.4921-1.7738-6e-3 -6.9333-1.6283-10.934 11.32 6.6532 15.299 11.732 19.277 16.811 4.96-2.1534 2.5609-6.4373 1.1326-10.368 7.9224 6.6257 11.087 12.731 14.482 18.808 2.4625-1.6331 5.6853-2.3301 4.5577-8.9008 5.1605 6.0597 8.5191 12.233 10.344 18.398 4.8979-1.076 4.6167-5.1376 5.7471-8.2459 4.8158 7.9142 7.0028 15.201 10.195 22.743 1.3502-0.38818 3.143-2.596 5.5002-6.3575 10.495 21.313 19.172 68.475-19.542 71.864-19.845-33.079-47.35-62.019-80.099-88.028 39.018 41.712 59.701 71.578 68.828 93.932-5.6123 8.2892-13.186 12.888-21.423 15.182h-31.496c-9.0855-1.8937-17.047-4.8048-21.968-6.9301 3.5034-0.26396 6.761-1.0578 8.553-3.265-2.8932-4.1339-16.942-6.6095-24.423-15.054 3.8384 0.62815 5.771 0.45179 8.3395-1.4727-7.7461-5.9015-16.277-11.759-20.149-18.339 3.0088 1.096 5.5764 2.7998 10.448 1.4943-6.3427-7.0404-13.489-13.382-17.696-22.065 4.1118 1.3877 8.4445 3.0751 10.271 1.9806-5.5926-6.9871-9.844-14.035-12.948-21.216 5.3821 2.7304 8.0206 3.0315 9.7326 2.5551-3.457-7.4192-8.6517-14.592-9.4172-22.461 3.6436 2.9772 7.3478 4.8776 10.904 3.8631-0.36036-4.7513-7.3377-10.044-8.4022-21.322 4.3234 2.0148 8.7693 4.2946 10.093 3.6768 0.9645-8.9987-0.93024-14.97-2.5963-20.967 9.547 3.3675 23.877 8.6978 23.48 7.6733zm202.89 68.954c-1.1657 3.2054-4.0535 6.0044-0.89552 10.015 5.3574-3.5486 11.898-6.1175 19.744-7.4399-5.0841 4.3081-3.1624 6.8795-2.228 9.7499 6.5043-2.4708 12.815-5.0123 23.175-5.0887-3.6187 2.0919-8.2066 3.8292-5.7902 8.6694 6.3098-1.3316 12.62-2.6636 25.565-0.47848-3.8128 2.0212-10.67 3.0443-8.2709 7.3281 7.289-0.095 15.142 0.67658 23.357 2.5689-4.9157 1.7295-9.1161 3.6077-6.8934 7.1673 7.6683 0.37321 18.204 1.0216 26.541 6.8085l-7.9768 3.8043c-0.96209 0.52956 13.473 5.5674 22.914 9.2263-5.2605 3.5839-10.415 6.8757-15.456 14.39 0.61731 1.3249 5.4871 2.4391 10.093 3.6768-8.059 7.9545-16.768 7.4235-20.131 10.928 2.0376 3.1622 6.0354 3.9567 10.836 4.0553-5.7375 5.5002-14.227 7.6885-21.64 11.148 1.0057 1.4663 3.2192 2.9338 9.0958 4.3043-6.9901 3.5039-14.773 6.1675-23.545 7.9223 0.73194 1.9166 5.0978 3.5087 9.1389 5.0907-8.7991 3.945-18.346 4.207-27.726 5.5201 2.9287 4.0367 5.9538 4.4791 8.9626 5.575-7.1926 2.5501-17.455 1.4514-27.215 1.0864 0.46776 2.1663 1.3155 3.4454 2.7961 4.6612h-13.75c-5.1274-1.4192-9.4503-2.9189-11.788-2.2747-0.0214 0.78201 0.12538 1.5366 0.37044 2.2747h-6.1841c-2.2143-0.16717-4.4175-0.45785-6.5995-0.87068-17.23-8.2945-37.615-23.515-35.198-47.897 21.35-11.254 56.342-20.728 113.06-27.679-41.792-1.1427-81.452 3.3317-117.9 15.905-27.674-27.57 9.2662-58.115 30.995-67.691-0.70716 4.3624-0.65582 7.2407 0.12836 8.4067 7.2901-3.7246 13.646-7.8991 22.418-10.864zm-186.04 100.82h69.97c7.9167 2e-3 15.508 3.1505 21.105 8.7538l24.717 24.736c16.798 16.816 39.584 26.262 63.343 26.259h34.984c16.486 1.9e-4 29.85 13.375 29.85 29.873v179.24c-1.9e-4 16.499-13.365 29.873-29.85 29.873h-358.21c-16.486-1.8e-4 -29.85-13.375-29.85-29.873v-179.24c1.88e-4 -16.499 13.365-29.873 29.85-29.873h34.984c23.739-0.0128 46.501-9.4579 63.285-26.259l24.775-24.736c5.582-5.5884 13.149-8.736 21.045-8.7538zm35.016 59.749c-57.625 0.10848-104.28 46.889-104.28 104.56 0 57.669 46.656 104.45 104.28 104.56 57.625-0.10848 104.28-46.889 104.28-104.56 0-57.669-46.656-104.45-104.28-104.56zm-164.18 29.873c-8.2429 9e-5 -14.925 6.6874-14.925 14.937 0.03875 8.2218 6.7096 14.866 14.925 14.866s14.886-6.6446 14.925-14.866c-9.1e-5 -8.2493-6.6823-14.937-14.925-14.937zm164.18 0c41.206 0.0135 74.603 33.447 74.603 74.684 0 41.238-33.397 74.671-74.603 74.684-41.206-0.0135-74.603-33.447-74.603-74.684 0-41.238 33.397-74.671 74.603-74.684z\\\"/&gt;\"\n        },\n        \"//[reloadClientOnServerUpdate]\": \"If set the UI will auto reload when client related config changed or the app was restarted (except when the UI shows the settings page).\",\n        \"reloadClientOnServerUpdate\": true,\n        \"sessionSecret\": [],\n        \"//[sessionTimeout]\": \"Users kept logged in for this long time.\",\n        \"sessionTimeout\": 604800000,\n        \"//[trustProxy]\": \"Should the backend trust proxies to extract remote Client IP. See express docs, for valid values: https://expressjs.com/en/guide/behind-proxies.html\",\n        \"trustProxy\": \"false\",\n        \"//[port]\": \"Port number. Port 80 is usually what you need.\",\n        \"port\": 80,\n        \"//[host]\": \"Server will accept connections from this IPv6 or IPv4 address.\",\n        \"host\": \"0.0.0.0\",\n        \"Log\": {\n            \"//[level]\": \"Logging level.\",\n            \"level\": \"info\",\n            \"//[sqlLevel]\": \"Logging level for SQL queries.\",\n            \"sqlLevel\": \"error\",\n            \"//[logServerTiming]\": \"If enabled, the app adds \\\"Server-Timing\\\" http header to the response.\",\n            \"logServerTiming\": false\n        }\n    },\n    \"Users\": {\n        \"//[authenticationRequired]\": \"Enables user management with login to password protect the gallery.\",\n        \"authenticationRequired\": true,\n        \"//[unAuthenticatedUserRole]\": \"Default user right when password protection is disabled.\",\n        \"unAuthenticatedUserRole\": \"Admin\",\n        \"//[oidc]\": \"Setup SSO with external authentication apps like Authentik or Authelia\",\n        \"oidc\": {\n            \"enabled\": false,\n            \"//[displayName]\": \"Shown on the login button (client-visible).\",\n            \"displayName\": \"\",\n            \"//[issuerUrl]\": \"OIDC provider Issuer URL\",\n            \"issuerUrl\": \"\",\n            \"clientId\": \"\",\n            \"clientSecret\": \"\",\n            \"//[redirectUri]\": \"Full callback URL registered at the provider (e.g.: https://example.com/pgapi/auth/oidc/callback)\",\n            \"redirectUri\": \"\",\n            \"scopes\": [\n                \"openid\",\n                \"profile\",\n                \"email\"\n            ],\n            \"//[usernameClaim]\": \"JWT claim to use for matching user name. Defaults to preferred_username; fallbacks to email if empty.\",\n            \"usernameClaim\": \"preferred_username\",\n            \"emailClaim\": \"email\",\n            \"//[allowedDomains]\": \"If set, only identities with emails in these domains will be accepted.\",\n            \"allowedDomains\": [],\n            \"//[autoCreateUser]\": \"If enabled, unknown users will be created with Guest role on first login. If disabled, only existing app users can log in.\",\n            \"autoCreateUser\": false\n        },\n        \"//[enforcedUsers]\": \"Creates these users in the DB during startup if they do not exist. If a user with this name exist, it won't be overwritten, even if the role is different.\",\n        \"enforcedUsers\": [],\n        \"//[allowQuery]\": \"Setting a non empty search query here will make the app to only SHOW photos and videos that match the query. You can override this at every user separately.\",\n        \"allowQuery\": {\n            \"type\": 100,\n            \"value\": \"\"\n        },\n        \"//[blockQuery]\": \"Setting a non empty search query here will make the app to HIDE photos and videos that match the query. You can override this at every user separately.\",\n        \"blockQuery\": {\n            \"type\": 100,\n            \"value\": \"\"\n        },\n        \"//[suppressDefUserWarn]\": \"if true, the app won't show a warning for using the default user.\",\n        \"suppressDefUserWarn\": false\n    },\n    \"Gallery\": {\n        \"//[enableCache]\": \"Caches directory contents and search results for better performance.\",\n        \"enableCache\": true,\n        \"//[enableOnScrollRendering]\": \"Those thumbnails get higher priority that are visible on the screen.\",\n        \"enableOnScrollRendering\": true,\n        \"//[enableDirectorySortingByDate]\": \"If enabled, directories will be sorted by date, like photos, otherwise by name. Directory date is the last modification time of that directory not the creation date of the oldest photo.\",\n        \"enableDirectorySortingByDate\": false,\n        \"//[ignoreTimestampOffset]\": \"If enabled, timestamp offsets are ignored, meaning that the local times of pictures are used for searching, sorting and grouping. If disabled, global time is used and pictures with no timestamp are assumed to be in UTC (offset +00:00).\",\n        \"ignoreTimestampOffset\": true,\n        \"//[enableOnScrollThumbnailPrioritising]\": \"Those thumbnails will be rendered first that are in view.\",\n        \"enableOnScrollThumbnailPrioritising\": true,\n        \"NavBar\": {\n            \"//[enableDownloadZip]\": \"Enable zipped download of the listed directory or search results.\",\n            \"enableDownloadZip\": true,\n            \"//[enableDirectoryFlattening]\": \"Adds a button to flatten the file structure, by listing the content of all subdirectories. (Won't work if the gallery has multiple folders with the same path.)\",\n            \"enableDirectoryFlattening\": false,\n            \"//[defaultGidSize]\": \"Default grid size that is used to render photos and videos.\",\n            \"defaultGidSize\": \"medium\",\n            \"//[showItemCount]\": \"Shows the number photos and videos on the navigation bar.\",\n            \"showItemCount\": true,\n            \"//[links]\": \"Visible links in the top menu.\",\n            \"links\": [\n                {\n                    \"type\": \"gallery\"\n                },\n                {\n                    \"type\": \"albums\"\n                },\n                {\n                    \"type\": \"faces\"\n                }\n            ],\n            \"//[NavbarShowDelay]\": \"Ratio of the page height, you need to scroll to show the navigation bar.\",\n            \"NavbarShowDelay\": 0.3,\n            \"//[NavbarHideDelay]\": \"Ratio of the page height, you need to scroll to hide the navigation bar.\",\n            \"NavbarHideDelay\": 0.15,\n            \"//[showScrollUpButton]\": \"Set when the floating scroll-up button should be visible.\",\n            \"showScrollUpButton\": \"mobileOnly\",\n            \"SortingGrouping\": {\n                \"//[defaultPhotoSortingMethod]\": \"Default sorting method for photo and video in a directory results.\",\n                \"defaultPhotoSortingMethod\": {\n                    \"method\": \"Date\",\n                    \"ascending\": true\n                },\n                \"//[defaultSearchSortingMethod]\": \"Default sorting method for photo and video in a search results.\",\n                \"defaultSearchSortingMethod\": {\n                    \"method\": \"Date\",\n                    \"ascending\": false\n                },\n                \"//[defaultPhotoGroupingMethod]\": \"Default grouping method for photo and video in a directory results.\",\n                \"defaultPhotoGroupingMethod\": {\n                    \"method\": \"Date\",\n                    \"ascending\": true\n                },\n                \"//[defaultSearchGroupingMethod]\": \"Default grouping method for photo and video in a search results.\",\n                \"defaultSearchGroupingMethod\": {\n                    \"method\": \"Date\",\n                    \"ascending\": false\n                }\n            }\n        },\n        \"//[captionFirstNaming]\": \"Show the caption (IPTC 120) tags from the EXIF data instead of the filenames.\",\n        \"captionFirstNaming\": false,\n        \"//[Lightbox]\": \"Photo and video preview window.\",\n        \"Lightbox\": {\n            \"//[slideshowSpeed]\": \"Default time interval for displaying a photo in the slide show.\",\n            \"slideshowSpeed\": 5,\n            \"//[captionAlwaysOn]\": \"If enabled, lightbox will always show caption by default, not only on hover.\",\n            \"captionAlwaysOn\": false,\n            \"//[facesAlwaysOn]\": \"If enabled, lightbox will always show faces by default, not only on hover.\",\n            \"facesAlwaysOn\": false,\n            \"//[loopVideos]\": \"If enabled, lightbox will loop videos by default.\",\n            \"loopVideos\": false,\n            \"//[loopSlideshow]\": \"If enabled, lightbox will start from the first photo when it reached the last one.\",\n            \"loopSlideshow\": false,\n            \"//[loadFullImageOnZoom]\": \"Enables loading the full resolution image on zoom in the lightbox (preview).\",\n            \"loadFullImageOnZoom\": true,\n            \"//[loadFullImageIfPreviewTooSmall]\": \"When enabled, the lightbox will load the full resolution image if all available preview thumbnails are too small for the current view.\",\n            \"loadFullImageIfPreviewTooSmall\": true,\n            \"//[Titles]\": \"Set these to customize the text (caption, location, etc.) in the lightbox that are always visible over the photo (not in the info panel).\",\n            \"Titles\": {\n                \"topLeftTitle\": [\n                    6\n                ],\n                \"topLeftSubtitle\": [\n                    5\n                ],\n                \"bottomLeftTitle\": [\n                    10,\n                    9\n                ],\n                \"bottomLeftSubtitle\": [\n                    8\n                ]\n            }\n        },\n        \"//[Themes]\": \"Pigallery2 uses Bootstrap 5.3 (https://getbootstrap.com/docs/5.3) for design (css, layout). In dark mode it sets 'data-bs-theme=\\\"dark\\\"' to the &lt;html&gt; to take advantage bootstrap's color modes. For theming, read more at: https://getbootstrap.com/docs/5.3/customize/color-modes/\",\n        \"Themes\": {\n            \"//[enabled]\": \"Enable themes and color modes.\",\n            \"enabled\": true,\n            \"//[defaultMode]\": \"Sets the default theme mode that is used for the application.\",\n            \"defaultMode\": \"auto\",\n            \"//[selectedTheme]\": \"Selected theme to use on the site.\",\n            \"selectedTheme\": \"classic\",\n            \"//[availableThemes]\": \"Adds these CSS settings as it is to the end of the body tag of the page.\",\n            \"availableThemes\": [\n                {\n                    \"//[name]\": \"Name of the theme\",\n                    \"name\": \"classic\",\n                    \"//[theme]\": \"Adds these css settings as it is to the end of the body tag of the page.\",\n                    \"theme\": \":root nav.navbar {\\n--bs-navbar-color: rgba(255, 255, 255, 0.55);\\n--bs-navbar-hover-color: rgba(255, 255, 255, 0.75);\\n--bs-navbar-disabled-color: rgba(255, 255, 255, 0.25);\\n--bs-navbar-active-color: #fff;\\n--bs-navbar-brand-color: #fff;\\n--bs-navbar-brand-hover-color: #fff;\\n--bs-bg-opacity: 1;\\nbackground-color: rgba(var(--bs-dark-rgb), var(--bs-bg-opacity)) !important;\\n}\"\n                }\n            ]\n        },\n        \"//[InlineBlogStartsOpen]\": \"Makes inline blog (*.md files content) auto-open.\",\n        \"InlineBlogStartsOpen\": false,\n        \"//[TopBlogStartsOpen]\": \"Makes top blog (*.md files content) auto-open.\",\n        \"TopBlogStartsOpen\": false,\n        \"//[AutoUpdate]\": \"makes the gallery poll the backend for new photos in the given directory or search\",\n        \"AutoUpdate\": {\n            \"//[enable]\": \"Enable auto polling for new photos and videos in the gallery.\",\n            \"enable\": false,\n            \"//[interval]\": \"Frequency of the auto polling in seconds.\",\n            \"interval\": 60\n        }\n    },\n    \"Media\": {\n        \"//[Video]\": \"Video support uses ffmpeg. ffmpeg and ffprobe binaries need to be available in the PATH or the @ffmpeg-installer/ffmpeg and @ffprobe-installer/ffprobe optional node packages need to be installed.\",\n        \"Video\": {\n            \"enabled\": true,\n            \"//[supportedFormatsWithTranscoding]\": \"Video formats that are supported after transcoding (with the built-in ffmpeg support).\",\n            \"supportedFormatsWithTranscoding\": [\n                \"avi\",\n                \"mkv\",\n                \"mov\",\n                \"wmv\",\n                \"flv\",\n                \"mts\",\n                \"m2ts\",\n                \"mpg\",\n                \"3gp\",\n                \"m4v\",\n                \"mpeg\",\n                \"vob\",\n                \"divx\",\n                \"xvid\",\n                \"ts\"\n            ],\n            \"//[supportedFormats]\": \"Video formats that are supported also without transcoding. Browser supported formats: https://www.w3schools.com/html/html5_video.asp\",\n            \"supportedFormats\": [\n                \"mp4\",\n                \"webm\",\n                \"ogv\",\n                \"ogg\"\n            ],\n            \"//[transcoding]\": \"To ensure smooth video playback, video transcoding is recommended to a lower bit rate than the server's upload rate.   The transcoded videos will be saved to the thumbnail folder.  You can trigger the transcoding manually, but you can also create an automatic encoding job in advanced settings mode.\",\n            \"transcoding\": {\n                \"//[bitRate]\": \"Target bit rate of the output video will be scaled down to this. This should be less than the upload rate of your home server.\",\n                \"bitRate\": 5242880,\n                \"//[resolution]\": \"The height of the output video will be scaled down to this, while keeping the aspect ratio.\",\n                \"resolution\": 720,\n                \"//[fps]\": \"Target frame per second (fps) of the output video will be scaled down to this.\",\n                \"fps\": 25,\n                \"format\": \"mp4\",\n                \"mp4Codec\": \"libx264\",\n                \"webmCodec\": \"libvpx\",\n                \"//[crf]\": \"The range of the Constant Rate Factor (CRF) scale is 0\u201351, where 0 is lossless, 23 is the default, and 51 is worst quality possible.\",\n                \"crf\": 23,\n                \"//[preset]\": \"A preset is a collection of options that will provide a certain encoding speed to compression ratio. A slower preset will provide better compression (compression is quality per filesize).\",\n                \"preset\": \"medium\",\n                \"//[customOutputOptions]\": \"It will be sent to ffmpeg as it is, as custom output options.\",\n                \"customOutputOptions\": [],\n                \"//[customInputOptions]\": \"It will be sent to ffmpeg as it is, as custom input options.\",\n                \"customInputOptions\": []\n            }\n        },\n        \"Photo\": {\n            \"//[iconSize]\": \"Icon size (used on maps).\",\n            \"iconSize\": 45,\n            \"//[personThumbnailSize]\": \"Person (face) thumbnail size.\",\n            \"personThumbnailSize\": 200,\n            \"//[thumbnailSizes]\": \"Size of the thumbnails and photo previews. The best matching size will be used (smaller for photo and video thumbnail, bigger for photo preview). More sizes give better quality, but use more storage and CPU to render. If size is 240, that shorter side of the thumbnail will be 240 pixels.\",\n            \"thumbnailSizes\": [\n                320,\n                540,\n                1080,\n                2160\n            ],\n            \"//[concurrentThumbnailGenerationsLimit]\": \"By default the app uses the number of cpus -1 concurrent threads to generate thumbnails. Set this number higher than 0 to limit the number of concurrent threads.\",\n            \"concurrentThumbnailGenerationsLimit\": 0,\n            \"//[supportedFormats]\": \"Photo formats that are supported. Browser needs to support these formats natively. Also sharp (libvips) package should be able to convert these formats.\",\n            \"supportedFormats\": [\n                \"gif\",\n                \"jpeg\",\n                \"jpg\",\n                \"jpe\",\n                \"png\",\n                \"webp\",\n                \"svg\",\n                \"avif\",\n                \"heic\",\n                \"dng\",\n                \"arw\",\n                \"tiff\"\n            ],\n            \"//[useLanczos3]\": \"if true, 'lanczos3' will used to scale photos, otherwise faster but lower quality 'nearest'.\",\n            \"useLanczos3\": true,\n            \"//[quality]\": \"Between 0-100.\",\n            \"quality\": 80,\n            \"//[smartSubsample]\": \"Use high quality chroma subsampling in webp. See: https://sharp.pixelplumbing.com/api-output#webp.\",\n            \"smartSubsample\": true,\n            \"//[sharpOptions]\": \"Add any sharp options here. They will be added to sharp constructor as raw params. See: https://sharp.pixelplumbing.com/api-constructor/.\",\n            \"sharpOptions\": {\n                \"test\": 444\n            },\n            \"//[personFaceMargin]\": \"This ratio of the face bounding box will be added to the face as a margin. Higher number add more margin.\",\n            \"personFaceMargin\": 0.7,\n            \"//[animateGif]\": \"Converts Gif to animated webp.\",\n            \"animateGif\": true\n        },\n        \"//[folder]\": \"Images are loaded from this folder (read permission required)\",\n        \"folder\": \"demo/images\",\n        \"//[tempFolder]\": \"Thumbnails, converted photos, videos will be stored here (write permission required)\",\n        \"tempFolder\": \"demo/tmp\"\n    },\n    \"MetaFile\": {\n        \"//[gpx]\": \"Reads *.gpx files and renders them on the map.\",\n        \"gpx\": true,\n        \"GPXCompressing\": {\n            \"//[enabled]\": \"Enables lossy (based on delta time and distance. Too frequent points are removed) GPX compression.\",\n            \"enabled\": true,\n            \"//[onTheFly]\": \"Enables on the fly *.gpx compression.\",\n            \"onTheFly\": true,\n            \"//[minDistance]\": \"Filters out entry that are closer than this to each other in meters.\",\n            \"minDistance\": 5,\n            \"//[maxMiddleDeviance]\": \"Filters out entry that would fall on the line if we would just connect the previous and the next points. This setting sets the sensitivity for that (higher number, more points are filtered).\",\n            \"maxMiddleDeviance\": 5,\n            \"//[minTimeDistance]\": \"Filters out entry that are closer than this in time in milliseconds.\",\n            \"minTimeDistance\": 5000\n        },\n        \"//[markdown]\": \"Reads *.md files in a directory and shows the next to the map.\",\n        \"markdown\": true,\n        \"//[pg2conf]\": \"Reads *.pg2conf files (You can use it for custom sorting and saved search (albums)).\",\n        \"pg2conf\": true,\n        \"//[supportedFormats]\": \"The app will read and process these files.\",\n        \"supportedFormats\": [\n            \"gpx\",\n            \"pg2conf\",\n            \"md\"\n        ]\n    },\n    \"Album\": {\n        \"enabled\": true,\n        \"//[readAccessMinRole]\": \"Required minimum right to show the albums tab.\",\n        \"readAccessMinRole\": \"User\"\n    },\n    \"Search\": {\n        \"//[enabled]\": \"Enables searching.\",\n        \"enabled\": true,\n        \"//[searchCacheTimeout]\": \"Search cache timeout.\",\n        \"searchCacheTimeout\": 3600000,\n        \"AutoComplete\": {\n            \"//[enabled]\": \"Show hints while typing search query.\",\n            \"enabled\": true,\n            \"//[ItemsPerCategory]\": \"Maximum number autocomplete items shown per category.\",\n            \"ItemsPerCategory\": {\n                \"//[maxItems]\": \"Maximum number autocomplete items shown at once. If there is not enough items to reach this value, it takes up to double of the individual items.\",\n                \"maxItems\": 20,\n                \"//[fileName]\": \"Maximum number autocomplete items shown per photo category.\",\n                \"fileName\": 2,\n                \"//[directory]\": \"Maximum number autocomplete items shown per directory category.\",\n                \"directory\": 2,\n                \"//[caption]\": \"Maximum number autocomplete items shown per caption category.\",\n                \"caption\": 3,\n                \"//[position]\": \"Maximum number autocomplete items shown per position category.\",\n                \"position\": 3,\n                \"//[person]\": \"Maximum number autocomplete items shown per faces category.\",\n                \"person\": 5,\n                \"//[keyword]\": \"Maximum number autocomplete items shown per keyword category.\",\n                \"keyword\": 5\n            },\n            \"//[cacheTimeout]\": \"Autocomplete cache timeout. \",\n            \"cacheTimeout\": 3600000\n        },\n        \"//[maxMediaResult]\": \"Maximum number of photos and videos that are listed in one search result.\",\n        \"maxMediaResult\": 10000,\n        \"//[maxDirectoryResult]\": \"Maximum number of directories that are listed in one search result.\",\n        \"maxDirectoryResult\": 200,\n        \"//[listDirectories]\": \"Search returns also with directories, not just media.\",\n        \"listDirectories\": false,\n        \"//[listMetafiles]\": \"Search also returns with metafiles from directories that contain a media file of the matched search result.\",\n        \"listMetafiles\": true\n    },\n    \"Sharing\": {\n        \"//[enabled]\": \"Enables sharing.\",\n        \"enabled\": true,\n        \"//[passwordRequired]\": \"Requires password protected sharing links.\",\n        \"passwordRequired\": false,\n        \"//[sharingKeyLength]\": \"The longer the keys are, the harder they are to guess. Changing this number won't invalidate existing sharing.\",\n        \"sharingKeyLength\": 8,\n        \"//[updateTimeout]\": \"After creating a sharing link, it can be updated for this long.\",\n        \"updateTimeout\": 300000\n    },\n    \"Map\": {\n        \"enabled\": true,\n        \"//[useImageMarkers]\": \"Map will use thumbnail images as markers instead of the default pin.\",\n        \"useImageMarkers\": true,\n        \"mapProvider\": \"OpenStreetMap\",\n        \"//[mapboxAccessToken]\": \"MapBox needs an access token to work, create one at https://www.mapbox.com.\",\n        \"mapboxAccessToken\": \"\",\n        \"//[customLayers]\": \"The map module will use these urls to fetch the map tiles.\",\n        \"customLayers\": [\n            {\n                \"//[name]\": \"Name of a map layer.\",\n                \"name\": \"street\",\n                \"//[url]\": \"Url of a map layer.\",\n                \"url\": \"\",\n                \"//[darkLayer]\": \"Sets if the layer is dark (used as default in the dark mode).\",\n                \"darkLayer\": false\n            }\n        ],\n        \"//[maxPreviewMarkers]\": \"Maximum number of markers to be shown on the map preview on the gallery page.\",\n        \"maxPreviewMarkers\": 50,\n        \"//[MapPathGroupConfig]\": \"Markers are grouped and themed by these settings\",\n        \"MapPathGroupConfig\": [\n            {\n                \"//[name]\": \"Name of the marker and path group on the map.\",\n                \"name\": \"Transportation\",\n                \"//[matchers]\": \"Matchers for a given map and path theme.\",\n                \"matchers\": [\n                    {\n                        \"//[matchers]\": \"List of regex string to match the name of the path. Case insensitive. Empty list matches everything.\",\n                        \"matchers\": [\n                            \"flight\",\n                            \"flying\"\n                        ],\n                        \"//[theme]\": \"List of regex string to match the name of the path.\",\n                        \"theme\": {\n                            \"//[color]\": \"Color of the path. Use any valid css colors.\",\n                            \"color\": \"var(--bs-orange)\",\n                            \"//[dashArray]\": \"Dash pattern of the path. Represents the spacing and length of the dash. Read more about dash array at: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray.\",\n                            \"dashArray\": \"4 8\",\n                            \"//[svgIcon]\": \"Set the icon of the map marker pin.\",\n                            \"svgIcon\": {\n                                \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n                                \"viewBox\": \"0 0 567 512\",\n                                \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n                                \"items\": \"&lt;path d=\\\"M482.3 192c34.2 0 93.7 29 93.7 64c0 36-59.5 64-93.7 64l-116.6 0L265.2 495.9c-5.7 10-16.3 16.1-27.8 16.1l-56.2 0c-10.6 0-18.3-10.2-15.4-20.4l49-171.6L112 320 68.8 377.6c-3 4-7.8 6.4-12.8 6.4l-42 0c-7.8 0-14-6.3-14-14c0-1.3 .2-2.6 .5-3.9L32 256 .5 145.9c-.4-1.3-.5-2.6-.5-3.9c0-7.8 6.3-14 14-14l42 0c5 0 9.8 2.4 12.8 6.4L112 192l102.9 0-49-171.6C162.9 10.2 170.6 0 181.2 0l56.2 0c11.5 0 22.1 6.2 27.8 16.1L365.7 192l116.6 0z\\\"/&gt;\"\n                            }\n                        }\n                    },\n                    {\n                        \"//[matchers]\": \"List of regex string to match the name of the path. Case insensitive. Empty list matches everything.\",\n                        \"matchers\": [\n                            \"drive\",\n                            \"driving\"\n                        ],\n                        \"//[theme]\": \"List of regex string to match the name of the path.\",\n                        \"theme\": {\n                            \"//[color]\": \"Color of the path. Use any valid css colors.\",\n                            \"color\": \"var(--bs-orange)\",\n                            \"//[dashArray]\": \"Dash pattern of the path. Represents the spacing and length of the dash. Read more about dash array at: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray.\",\n                            \"dashArray\": \"4 8\",\n                            \"//[svgIcon]\": \"Set the icon of the map marker pin.\",\n                            \"svgIcon\": {\n                                \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n                                \"viewBox\": \"0 0 640 512\",\n                                \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n                                \"items\": \"&lt;path d=\\\"M171.3 96H224v96H111.3l30.4-75.9C146.5 104 158.2 96 171.3 96zM272 192V96h81.2c9.7 0 18.9 4.4 25 12l67.2 84H272zm256.2 1L428.2 68c-18.2-22.8-45.8-36-75-36H171.3c-39.3 0-74.6 23.9-89.1 60.3L40.6 196.4C16.8 205.8 0 228.9 0 256V368c0 17.7 14.3 32 32 32H65.3c7.6 45.4 47.1 80 94.7 80s87.1-34.6 94.7-80H385.3c7.6 45.4 47.1 80 94.7 80s87.1-34.6 94.7-80H608c17.7 0 32-14.3 32-32V320c0-65.2-48.8-119-111.8-127zM434.7 368a48 48 0 1 1 90.5 32 48 48 0 1 1 -90.5-32zM160 336a48 48 0 1 1 0 96 48 48 0 1 1 0-96z\\\"/&gt;\"\n                            }\n                        }\n                    },\n                    {\n                        \"//[matchers]\": \"List of regex string to match the name of the path. Case insensitive. Empty list matches everything.\",\n                        \"matchers\": [\n                            \"ship\",\n                            \"sailing\",\n                            \"cruise\"\n                        ],\n                        \"//[theme]\": \"List of regex string to match the name of the path.\",\n                        \"theme\": {\n                            \"//[color]\": \"Color of the path. Use any valid css colors.\",\n                            \"color\": \"var(--bs-orange)\",\n                            \"//[dashArray]\": \"Dash pattern of the path. Represents the spacing and length of the dash. Read more about dash array at: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray.\",\n                            \"dashArray\": \"4 8\",\n                            \"//[svgIcon]\": \"Set the icon of the map marker pin.\",\n                            \"svgIcon\": {\n                                \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n                                \"viewBox\": \"0 0 576 512\",\n                                \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n                                \"items\": \"&lt;path d=\\\"M256 16c0-7 4.5-13.2 11.2-15.3s13.9 .4 17.9 6.1l224 320c3.4 4.9 3.8 11.3 1.1 16.6s-8.2 8.6-14.2 8.6H272c-8.8 0-16-7.2-16-16V16zM212.1 96.5c7 1.9 11.9 8.2 11.9 15.5V336c0 8.8-7.2 16-16 16H80c-5.7 0-11-3-13.8-8s-2.9-11-.1-16l128-224c3.6-6.3 11-9.4 18-7.5zM5.7 404.3C2.8 394.1 10.5 384 21.1 384H554.9c10.6 0 18.3 10.1 15.4 20.3l-4 14.3C550.7 473.9 500.4 512 443 512H133C75.6 512 25.3 473.9 9.7 418.7l-4-14.3z\\\"/&gt;\"\n                            }\n                        }\n                    }\n                ]\n            },\n            {\n                \"//[name]\": \"Name of the marker and path group on the map.\",\n                \"name\": \"Sport\",\n                \"//[matchers]\": \"Matchers for a given map and path theme.\",\n                \"matchers\": [\n                    {\n                        \"//[matchers]\": \"List of regex string to match the name of the path. Case insensitive. Empty list matches everything.\",\n                        \"matchers\": [\n                            \"(\\b|_|-)run\"\n                        ],\n                        \"//[theme]\": \"List of regex string to match the name of the path.\",\n                        \"theme\": {\n                            \"//[color]\": \"Color of the path. Use any valid css colors.\",\n                            \"color\": \"var(--bs-primary)\",\n                            \"//[dashArray]\": \"Dash pattern of the path. Represents the spacing and length of the dash. Read more about dash array at: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray.\",\n                            \"dashArray\": \"\",\n                            \"//[svgIcon]\": \"Set the icon of the map marker pin.\",\n                            \"svgIcon\": {\n                                \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n                                \"viewBox\": \"0 0 417 512\",\n                                \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n                                \"items\": \"&lt;path d=\\\"M320 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM125.7 175.5c9.9-9.9 23.4-15.5 37.5-15.5c1.9 0 3.8 .1 5.6 .3L137.6 254c-9.3 28 1.7 58.8 26.8 74.5l86.2 53.9-25.4 88.8c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l28.7-100.4c5.9-20.6-2.6-42.6-20.7-53.9L238 299l30.9-82.4 5.1 12.3C289 264.7 323.9 288 362.7 288H384c17.7 0 32-14.3 32-32s-14.3-32-32-32H362.7c-12.9 0-24.6-7.8-29.5-19.7l-6.3-15c-14.6-35.1-44.1-61.9-80.5-73.1l-48.7-15c-11.1-3.4-22.7-5.2-34.4-5.2c-31 0-60.8 12.3-82.7 34.3L57.4 153.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l23.1-23.1zM91.2 352H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h69.6c19 0 36.2-11.2 43.9-28.5L157 361.6l-9.5-6c-17.5-10.9-30.5-26.8-37.9-44.9L91.2 352z\\\"/&gt;\"\n                            }\n                        }\n                    },\n                    {\n                        \"//[matchers]\": \"List of regex string to match the name of the path. Case insensitive. Empty list matches everything.\",\n                        \"matchers\": [\n                            \"(\\b|_|-)walk\"\n                        ],\n                        \"//[theme]\": \"List of regex string to match the name of the path.\",\n                        \"theme\": {\n                            \"//[color]\": \"Color of the path. Use any valid css colors.\",\n                            \"color\": \"var(--bs-primary)\",\n                            \"//[dashArray]\": \"Dash pattern of the path. Represents the spacing and length of the dash. Read more about dash array at: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray.\",\n                            \"dashArray\": \"\",\n                            \"//[svgIcon]\": \"Set the icon of the map marker pin.\",\n                            \"svgIcon\": {\n                                \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n                                \"viewBox\": \"0 0 320 512\",\n                                \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n                                \"items\": \"&lt;path d=\\\"M160 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM126.5 199.3c-1 .4-1.9 .8-2.9 1.2l-8 3.5c-16.4 7.3-29 21.2-34.7 38.2l-2.6 7.8c-5.6 16.8-23.7 25.8-40.5 20.2s-25.8-23.7-20.2-40.5l2.6-7.8c11.4-34.1 36.6-61.9 69.4-76.5l8-3.5c20.8-9.2 43.3-14 66.1-14c44.6 0 84.8 26.8 101.9 67.9L281 232.7l21.4 10.7c15.8 7.9 22.2 27.1 14.3 42.9s-27.1 22.2-42.9 14.3L247 287.3c-10.3-5.2-18.4-13.8-22.8-24.5l-9.6-23-19.3 65.5 49.5 54c5.4 5.9 9.2 13 11.2 20.8l23 92.1c4.3 17.1-6.1 34.5-23.3 38.8s-34.5-6.1-38.8-23.3l-22-88.1-70.7-77.1c-14.8-16.1-20.3-38.6-14.7-59.7l16.9-63.5zM68.7 398l25-62.4c2.1 3 4.5 5.8 7 8.6l40.7 44.4-14.5 36.2c-2.4 6-6 11.5-10.6 16.1L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L68.7 398z\\\"/&gt;\"\n                            }\n                        }\n                    },\n                    {\n                        \"//[matchers]\": \"List of regex string to match the name of the path. Case insensitive. Empty list matches everything.\",\n                        \"matchers\": [\n                            \"(\\b|_|-)hike\",\n                            \"(\\b|_|-)hiking\"\n                        ],\n                        \"//[theme]\": \"List of regex string to match the name of the path.\",\n                        \"theme\": {\n                            \"//[color]\": \"Color of the path. Use any valid css colors.\",\n                            \"color\": \"var(--bs-primary)\",\n                            \"//[dashArray]\": \"Dash pattern of the path. Represents the spacing and length of the dash. Read more about dash array at: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray.\",\n                            \"dashArray\": \"\",\n                            \"//[svgIcon]\": \"Set the icon of the map marker pin.\",\n                            \"svgIcon\": {\n                                \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n                                \"viewBox\": \"0 0 384 512\",\n                                \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n                                \"items\": \"&lt;path d=\\\"M192 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm51.3 182.7L224.2 307l49.7 49.7c9 9 14.1 21.2 14.1 33.9V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V397.3l-73.9-73.9c-15.8-15.8-22.2-38.6-16.9-60.3l20.4-84c8.3-34.1 42.7-54.9 76.7-46.4c19 4.8 35.6 16.4 46.4 32.7L305.1 208H336V184c0-13.3 10.7-24 24-24s24 10.7 24 24v55.8c0 .1 0 .2 0 .2s0 .2 0 .2V488c0 13.3-10.7 24-24 24s-24-10.7-24-24V272H296.6c-16 0-31-8-39.9-21.4l-13.3-20zM81.1 471.9L117.3 334c3 4.2 6.4 8.2 10.1 11.9l41.9 41.9L142.9 488.1c-4.5 17.1-22 27.3-39.1 22.8s-27.3-22-22.8-39.1zm55.5-346L101.4 266.5c-3 12.1-14.9 19.9-27.2 17.9l-47.9-8c-14-2.3-22.9-16.3-19.2-30L31.9 155c9.5-34.8 41.1-59 77.2-59h4.2c15.6 0 27.1 14.7 23.3 29.8z\\\"/&gt;\"\n                            }\n                        }\n                    },\n                    {\n                        \"//[matchers]\": \"List of regex string to match the name of the path. Case insensitive. Empty list matches everything.\",\n                        \"matchers\": [\n                            \"(\\b|_|-)bike\",\n                            \"(\\b|_|-)biking\",\n                            \"(\\b|_|-)cycling\"\n                        ],\n                        \"//[theme]\": \"List of regex string to match the name of the path.\",\n                        \"theme\": {\n                            \"//[color]\": \"Color of the path. Use any valid css colors.\",\n                            \"color\": \"var(--bs-primary)\",\n                            \"//[dashArray]\": \"Dash pattern of the path. Represents the spacing and length of the dash. Read more about dash array at: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray.\",\n                            \"dashArray\": \"\",\n                            \"//[svgIcon]\": \"Set the icon of the map marker pin.\",\n                            \"svgIcon\": {\n                                \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n                                \"viewBox\": \"0 0 640 512\",\n                                \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n                                \"items\": \"&lt;path d=\\\"M400 96a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm27.2 64l-61.8-48.8c-17.3-13.6-41.7-13.8-59.1-.3l-83.1 64.2c-30.7 23.8-28.5 70.8 4.3 91.6L288 305.1V416c0 17.7 14.3 32 32 32s32-14.3 32-32V288c0-10.7-5.3-20.7-14.2-26.6L295 232.9l60.3-48.5L396 217c5.7 4.5 12.7 7 20 7h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H427.2zM56 384a72 72 0 1 1 144 0A72 72 0 1 1 56 384zm200 0A128 128 0 1 0 0 384a128 128 0 1 0 256 0zm184 0a72 72 0 1 1 144 0 72 72 0 1 1 -144 0zm200 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z\\\"/&gt;\"\n                            }\n                        }\n                    },\n                    {\n                        \"//[matchers]\": \"List of regex string to match the name of the path. Case insensitive. Empty list matches everything.\",\n                        \"matchers\": [\n                            \"(\\b|_|-)skiing\",\n                            \"(\\b|_|-)ski\"\n                        ],\n                        \"//[theme]\": \"List of regex string to match the name of the path.\",\n                        \"theme\": {\n                            \"//[color]\": \"Color of the path. Use any valid css colors.\",\n                            \"color\": \"var(--bs-primary)\",\n                            \"//[dashArray]\": \"Dash pattern of the path. Represents the spacing and length of the dash. Read more about dash array at: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray.\",\n                            \"dashArray\": \"\",\n                            \"//[svgIcon]\": \"Set the icon of the map marker pin.\",\n                            \"svgIcon\": {\n                                \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n                                \"viewBox\": \"0 0 512 512\",\n                                \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n                                \"items\": \"&lt;path d=\\\"M380.7 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM2.7 268.9c6.1-11.8 20.6-16.3 32.4-10.2L232.7 361.3l46.2-69.2-75.1-75.1c-14.6-14.6-20.4-33.9-18.4-52.1l108.8 52 39.3 39.3c16.2 16.2 18.7 41.5 6 60.6L289.8 391l128.7 66.8c13.6 7.1 29.8 7.2 43.6 .3l15.2-7.6c11.9-5.9 26.3-1.1 32.2 10.7s1.1 26.3-10.7 32.2l-15.2 7.6c-27.5 13.7-59.9 13.5-87.2-.7L12.9 301.3C1.2 295.2-3.4 280.7 2.7 268.9zM118.9 65.6L137 74.2l8.7-17.4c4-7.9 13.6-11.1 21.5-7.2s11.1 13.6 7.2 21.5l-8.5 16.9 54.7 26.2c1.5-.7 3.1-1.4 4.7-2.1l83.4-33.4c34.2-13.7 72.8 4.2 84.5 39.2l17.1 51.2 52.1 26.1c15.8 7.9 22.2 27.1 14.3 42.9s-27.1 22.2-42.9 14.3l-58.1-29c-11.4-5.7-20-15.7-24.1-27.8l-5.8-17.3-27.3 12.1-6.8 3-6.7-3.2L151.5 116.7l-9.2 18.4c-4 7.9-13.6 11.1-21.5 7.2s-11.1-13.6-7.2-21.5l9-18-17.6-8.4c-8-3.8-11.3-13.4-7.5-21.3s13.4-11.3 21.3-7.5z\\\"/&gt;\"\n                            }\n                        }\n                    }\n                ]\n            },\n            {\n                \"//[name]\": \"Name of the marker and path group on the map.\",\n                \"name\": \"Other paths\",\n                \"//[matchers]\": \"Matchers for a given map and path theme.\",\n                \"matchers\": [\n                    {\n                        \"//[matchers]\": \"List of regex string to match the name of the path. Case insensitive. Empty list matches everything.\",\n                        \"matchers\": [],\n                        \"//[theme]\": \"List of regex string to match the name of the path.\",\n                        \"theme\": {\n                            \"//[color]\": \"Color of the path. Use any valid css colors.\",\n                            \"color\": \"var(--bs-secondary)\",\n                            \"//[dashArray]\": \"Dash pattern of the path. Represents the spacing and length of the dash. Read more about dash array at: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray.\",\n                            \"dashArray\": \"\",\n                            \"//[svgIcon]\": \"Set the icon of the map marker pin.\",\n                            \"svgIcon\": {\n                                \"//[viewBox]\": \"SVG path viewBox. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox\",\n                                \"viewBox\": \"\",\n                                \"//[items]\": \"Content elements (paths, circles, rects) of the SVG icon. Icons used on the map: fontawesome.com/icons.\",\n                                \"items\": \"\"\n                            }\n                        }\n                    }\n                ]\n            }\n        ],\n        \"//[bendLongPathsTrigger]\": \"Map will bend the path if two points are this far apart on latitude axes. This intended to bend flight if only the end and the start points are given.\",\n        \"bendLongPathsTrigger\": 0.5\n    },\n    \"Faces\": {\n        \"enabled\": true,\n        \"//[sorting]\": \"Default sorting on the faces page\",\n        \"sorting\": {\n            \"method\": \"PersonCount\",\n            \"ascending\": true\n        },\n        \"//[keywordsToPersons]\": \"If a photo has the same face (person) name and keyword, the app removes the duplicate, keeping the face only.\",\n        \"keywordsToPersons\": true,\n        \"//[writeAccessMinRole]\": \"Required minimum right to star (favourite) a face.\",\n        \"writeAccessMinRole\": \"Admin\",\n        \"//[readAccessMinRole]\": \"Required minimum right to show the faces tab.\",\n        \"readAccessMinRole\": \"User\"\n    },\n    \"//[RandomPhoto]\": \"This feature enables you to generate 'random photo' urls. That URL returns a photo random selected from your gallery. You can use the url with 3rd party application like random changing desktop background. Note: With the current implementation, random link also requires login.\",\n    \"RandomPhoto\": {\n        \"//[enabled]\": \"Enables random link generation.\",\n        \"enabled\": true\n    },\n    \"Extensions\": {\n        \"enabled\": true,\n        \"//[repositoryUrl]\": \"Repository url that points to a list of extensions in .md format.\",\n        \"repositoryUrl\": \"https://raw.githubusercontent.com/bpatrik/pigallery2/master/extension/REPOSITORY.md\",\n        \"//[folder]\": \"Folder where the app stores all extensions. Individual extensions live in their own sub-folders.\",\n        \"folder\": \"extensions\",\n        \"extensions\": {},\n        \"//[cleanUpUnusedTables]\": \"Automatically removes all tables from the DB that are not used anymore.\",\n        \"cleanUpUnusedTables\": true\n    },\n    \"Upload\": {\n        \"enabled\": false,\n        \"//[minimumRole]\": \"Minimum user role to enable file upload.\",\n        \"minimumRole\": \"Admin\",\n        \"//[enforcedDirectoryConfig]\": \"Only enable upload in folder where an \\\".uploader.pg2conf\\\" is present in the folder.\",\n        \"enforcedDirectoryConfig\": false\n    },\n    \"Database\": {\n        \"//[type]\": \"SQLite is recommended.\",\n        \"type\": \"sqlite\",\n        \"//[dbFolder]\": \"All file-based data will be stored here (sqlite database, job history data).\",\n        \"dbFolder\": \"db\",\n        \"sqlite\": {\n            \"//[DBFileName]\": \"Sqlite will save the db with this filename.\",\n            \"DBFileName\": \"sqlite.db\"\n        },\n        \"mysql\": {\n            \"host\": \"localhost\",\n            \"port\": 3306,\n            \"database\": \"pigallery2\",\n            \"username\": \"\",\n            \"password\": \"\"\n        }\n    },\n    \"Indexing\": {\n        \"//[cachedFolderTimeout]\": \"If there was no indexing in this time, it reindexes. (skipped if indexes are in DB and sensitivity is low).\",\n        \"cachedFolderTimeout\": 3600000,\n        \"//[reIndexingSensitivity]\": \"Set the reindexing sensitivity. High value check the folders for change more often.  Setting to never only indexes if never indexed or explicit running the Indexing Job.\",\n        \"reIndexingSensitivity\": \"low\",\n        \"//[excludeFolderList]\": \"Folders to exclude from indexing. If an entry starts with '/' it is treated as an absolute path. If it doesn't start with '/' but contains a '/', the path is relative to the image directory. If it doesn't contain a '/', any folder with this name will be excluded.\",\n        \"excludeFolderList\": [\n            \".Trash-1000\",\n            \".dtrash\",\n            \"$RECYCLE.BIN\"\n        ],\n        \"//[excludeFileList]\": \"Files that mark a folder to be excluded from indexing. Any folder that contains a file with this name will be excluded from indexing.\",\n        \"excludeFileList\": []\n    },\n    \"//[AlbumCover]\": \"Specify a search query and sorting that the app can use to pick the best photo for an album and folder cover. There is no way to manually pick folder and album cover in the app. You can tag some of your photos with 'cover' and set that as search query or rate them to 5 and set sorting to descending by rating.\",\n    \"AlbumCover\": {\n        \"//[SearchQuery]\": \"Filters the sub-folders with this search query. If filter results no photo, the app will search again without the filter.\",\n        \"SearchQuery\": {\n            \"type\": 100,\n            \"value\": \"\"\n        },\n        \"//[Sorting]\": \"If multiple cover is available sorts them by these methods and selects the first one. Using random sorting does not allow to use any other sorting method.\",\n        \"Sorting\": [\n            {\n                \"method\": \"Rating\",\n                \"ascending\": false\n            },\n            {\n                \"method\": \"Date\",\n                \"ascending\": false\n            },\n            {\n                \"method\": \"PersonCount\",\n                \"ascending\": false\n            }\n        ]\n    },\n    \"Duplicates\": {\n        \"//[listingLimit]\": \"Maximum number of duplicates to list.\",\n        \"listingLimit\": 1000\n    },\n    \"//[Messaging]\": \"The App can send messages (like photos on the same day a year ago. aka: \\\"Top Pick\\\"). Here you can configure the delivery method.\",\n    \"Messaging\": {\n        \"//[Email]\": \"The app uses Nodemailer in the background for sending e-mails. Refer to https://nodemailer.com/usage/ if some options are not clear.\",\n        \"Email\": {\n            \"//[emailFrom]\": \"Some services do not allow sending from random e-mail addresses. Set this accordingly.\",\n            \"emailFrom\": \"noreply@pigallery2.com\",\n            \"smtp\": {\n                \"//[host]\": \"SMTP host server\",\n                \"host\": \"\",\n                \"//[port]\": \"SMTP server's port\",\n                \"port\": 587,\n                \"//[secure]\": \"Is the connection secure. See https://nodemailer.com/smtp/#tls-options for more details\",\n                \"secure\": false,\n                \"//[requireTLS]\": \"if this is true and secure is false then Nodemailer (used library in the background) tries to use STARTTLS. See https://nodemailer.com/smtp/#tls-options for more details\",\n                \"requireTLS\": true,\n                \"//[user]\": \"User to connect to the SMTP server.\",\n                \"user\": \"\",\n                \"//[password]\": \"Password to connect to the SMTP server.\",\n                \"password\": \"\"\n            }\n        }\n    },\n    \"Jobs\": {\n        \"//[maxSavedProgress]\": \"Job history size.\",\n        \"maxSavedProgress\": 20,\n        \"//[mediaProcessingBatchSize]\": \"Jobs load this many photos or videos from the DB for processing at once.\",\n        \"mediaProcessingBatchSize\": 1000,\n        \"scheduled\": [\n            {\n                \"name\": \"Indexing\",\n                \"jobName\": \"Indexing\",\n                \"config\": {\n                    \"indexChangesOnly\": true\n                },\n                \"allowParallelRun\": false,\n                \"trigger\": {\n                    \"type\": \"never\",\n                    \"periodicity\": 7,\n                    \"atTime\": 0\n                }\n            },\n            {\n                \"name\": \"Album Cover Filling\",\n                \"jobName\": \"Album Cover Filling\",\n                \"config\": {},\n                \"allowParallelRun\": false,\n                \"trigger\": {\n                    \"type\": \"after\",\n                    \"periodicity\": 7,\n                    \"atTime\": 0,\n                    \"afterScheduleName\": \"Indexing\"\n                }\n            },\n            {\n                \"name\": \"Photo Converting\",\n                \"jobName\": \"Photo Converting\",\n                \"config\": {\n                    \"sizes\": [\n                        320\n                    ],\n                    \"maxVideoSize\": 800,\n                    \"indexedOnly\": true\n                },\n                \"allowParallelRun\": false,\n                \"trigger\": {\n                    \"type\": \"after\",\n                    \"periodicity\": 7,\n                    \"atTime\": 0,\n                    \"afterScheduleName\": \"Album Cover Filling\"\n                }\n            },\n            {\n                \"name\": \"Video Converting\",\n                \"jobName\": \"Video Converting\",\n                \"config\": {\n                    \"indexedOnly\": true\n                },\n                \"allowParallelRun\": false,\n                \"trigger\": {\n                    \"type\": \"after\",\n                    \"periodicity\": 7,\n                    \"atTime\": 0,\n                    \"afterScheduleName\": \"Photo Converting\"\n                }\n            },\n            {\n                \"name\": \"GPX Compression\",\n                \"jobName\": \"GPX Compression\",\n                \"config\": {\n                    \"indexedOnly\": true\n                },\n                \"allowParallelRun\": false,\n                \"trigger\": {\n                    \"type\": \"after\",\n                    \"periodicity\": 7,\n                    \"atTime\": 0,\n                    \"afterScheduleName\": \"Video Converting\"\n                }\n            },\n            {\n                \"name\": \"Temp Folder Cleaning\",\n                \"jobName\": \"Temp Folder Cleaning\",\n                \"config\": {\n                    \"indexedOnly\": true\n                },\n                \"allowParallelRun\": false,\n                \"trigger\": {\n                    \"type\": \"after\",\n                    \"periodicity\": 7,\n                    \"atTime\": 0,\n                    \"afterScheduleName\": \"GPX Compression\"\n                }\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"user-guide/user-rights/","title":"User Rights","text":""},{"location":"user-guide/user-rights/#pigallery2-user-rights","title":"Pigallery2 user rights","text":"<p>The following users are supported in the app with these rights:</p> id Role rights who has it 1 Limited Guest listing directory using shared link 2 Guest + search no one (you can set manually in the db, if necessary) 3 User + share, list faces, create random link default role 4 Admin + settings, see duplicate photos default (pregenerated) user (also the default right if authentication is off) 5 Developer + see errors no one (you can set manually in the db, if necessary) <p>Note: If you would like to set a user rights and does not work with the role name (string) use its id.</p>"}]}